(function(e){function t(t){for(var o,a,r=t[0],l=t[1],d=t[2],u=0,p=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);c&&c(t);while(p.length)p.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],o=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(o=!1)}o&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var o={},i={app:0},n=[];function a(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=o,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(s,o,function(t){return e[t]}.bind(null,o));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"0232":function(e,t,s){},"03b2":function(e,t,s){},"041d":function(e,t,s){},"0b8a":function(e,t,s){},"19d7":function(e,t,s){"use strict";var o=s("284d"),i=s.n(o);i.a},"1b39":function(e,t,s){"use strict";var o=s("fc8e"),i=s.n(o);i.a},"1caf":function(e,t,s){"use strict";var o=s("b943"),i=s.n(o);i.a},"21ed":function(e,t,s){"use strict";var o=s("2750"),i=s.n(o);i.a},"224a":function(e,t,s){},2644:function(e,t,s){},"26fe":function(e,t,s){"use strict";var o=s("a38a"),i=s.n(o);i.a},2750:function(e,t,s){},"280a":function(e,t,s){},"284d":function(e,t,s){},2942:function(e,t,s){},"2d96":function(e,t,s){"use strict";var o=s("b8b6"),i=s.n(o);i.a},"335e":function(e,t,s){},"368d":function(e,t,s){},"37f7":function(e,t,s){},"3a3b":function(e,t,s){"use strict";var o=s("280a"),i=s.n(o);i.a},"3c38":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"paramter-input-list-wrapper"},e._l(e.filteredParameters,(function(t){return s("div",{key:t.name},[!0===e.multipleValues(t)&&"fixedCollection"!==t.type?s("div",{staticClass:"parameter-item"},[s("multiple-parameter",{attrs:{parameter:t,values:e.getParameterValue(e.nodeValues,t.name,e.path),nodeValues:e.nodeValues,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}})],1):["collection","fixedCollection"].includes(t.type)?s("div",{staticClass:"multi-parameter"},[s("div",{staticClass:"parameter-name",attrs:{title:t.displayName}},[!0===e.hideDelete||e.isReadOnly?e._e():s("div",{staticClass:"delete-option clickable",attrs:{title:"Delete"}},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Parameter Options"},on:{click:function(s){return e.deleteOption(t.name)}}})],1),e._v("\n\t\t\t\t"+e._s(t.displayName)+":\n\t\t\t\t"),t.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),s("div",["collection"===t.type?s("collection-parameter",{attrs:{parameter:t,values:e.getParameterValue(e.nodeValues,t.name,e.path),nodeValues:e.nodeValues,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}}):"fixedCollection"===t.type?s("fixed-collection-parameter",{attrs:{parameter:t,values:e.getParameterValue(e.nodeValues,t.name,e.path),nodeValues:e.nodeValues,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}}):e._e()],1)]):e.displayNodeParameter(t)?s("div",{staticClass:"parameter-item"},[!0===e.hideDelete||e.isReadOnly?e._e():s("div",{staticClass:"delete-option clickable",attrs:{title:"Delete"}},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Delete Parameter"},on:{click:function(s){return e.deleteOption(t.name)}}})],1),s("parameter-input-full",{attrs:{parameter:t,value:e.getParameterValue(e.nodeValues,t.name,e.path),displayOptions:!0,path:e.getPath(t.name)},on:{valueChanged:e.valueChanged}})],1):e._e()])})),0)},i=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"duplicate-parameter",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"parameter-name"},[e._v("\n\t\t"+e._s(e.parameter.displayName)+":\n\t\t"),e.parameter.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.parameter.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),e._l(e.values,(function(t,o){return s("div",{key:o,staticClass:"duplicate-parameter-item",class:e.parameter.type},[e.isReadOnly?e._e():s("div",{staticClass:"delete-item clickable",attrs:{title:"Delete Item"},on:{click:function(t){return e.deleteItem(o)}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1),"collection"===e.parameter.type?s("div",[s("collection-parameter",{attrs:{parameter:e.parameter,values:t,nodeValues:e.nodeValues,path:e.getPath(o),hideDelete:e.hideDelete},on:{valueChanged:e.valueChanged}})],1):s("div",[s("parameter-input",{staticClass:"duplicate-parameter-input-item",attrs:{parameter:e.parameter,value:t,displayOptions:!0,path:e.getPath(o)},on:{valueChanged:e.valueChanged}})],1)])})),s("div",{staticClass:"add-item-wrapper"},[e.values&&0===Object.keys(e.values).length||e.isReadOnly?s("div",{staticClass:"no-items-exist"},[e._v("\n\t\t\tCurrently no items exist\n\t\t")]):e._e(),e.isReadOnly?e._e():s("el-button",{staticClass:"add-item",attrs:{size:"small"},on:{click:function(t){return e.addItem()}}},[e._v(e._s(e.addButtonText))])],1)],2)},a=[],r=s("3eb9"),l=s("89e8"),d=s("9ec3"),c=s("4971"),u=s("aaf5"),p=Object(u["a"])(c["a"]).extend({name:"MultipleParameter",components:{CollectionParameter:r["default"],ParameterInput:l["a"]},props:["nodeValues","parameter","path","values"],computed:{addButtonText(){return this.parameter.typeOptions&&this.parameter.typeOptions.multipleValueButtonText?this.parameter.typeOptions.multipleValueButtonText:"Add item"},hideDelete(){return 1===this.parameter.options.length}},methods:{addItem(){const e=this.getPath();let t=Object(d["get"])(this.nodeValues,e);void 0===t&&(t=[]),t.push(JSON.parse(JSON.stringify(this.parameter.default)));const s={name:e,value:t};this.$emit("valueChanged",s)},deleteItem(e){const t={name:this.getPath(e),value:void 0};this.$emit("valueChanged",t)},getPath(e){return this.path+(void 0!==e?`[${e}]`:"")},valueChanged(e){this.$emit("valueChanged",e)}}}),h=p,m=(s("c922"),s("5e82"),s("2be6")),f=Object(m["a"])(h,n,a,!1,null,"1fc9e78c",null),w=f.exports,g=s("6fae"),v=s("4a0c"),y=Object(u["a"])(c["a"],g["a"]).extend({name:"ParameterInputList",components:{MultipleParameter:w,ParameterInputFull:v["a"]},props:["nodeValues","parameters","path","hideDelete"],computed:{filteredParameters(){return this.parameters.filter(e=>this.displayNodeParameter(e))}},methods:{multipleValues(e){return!0===this.getArgument("multipleValues",e)},getArgument(e,t){if(void 0!==t.typeOptions&&void 0!==t.typeOptions[e])return t.typeOptions[e]},getPath(e){return(this.path?this.path+".":"")+e},deleteOption(e){const t={name:this.getPath(e),value:void 0};this.$emit("valueChanged",t)},displayNodeParameter(e){return"hidden"!==e.type&&(void 0===e.displayOptions||this.displayParameter(this.nodeValues,e,this.path))},valueChanged(e){this.$emit("valueChanged",e)}},beforeCreate:function(){this.$options.components.FixedCollectionParameter=s("fe0b").default,this.$options.components.CollectionParameter=s("3eb9").default}}),k=y,b=(s("ae93"),Object(m["a"])(k,o,i,!1,null,null,null));t["default"]=b.exports},"3eb9":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"collection-parameter",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"collection-parameter-wrapper"},[0===e.getProperties.length?s("div",{staticClass:"no-items-exist"},[e._v("\n\t\t\tCurrently no properties exist\n\t\t")]):e._e(),s("parameter-input-list",{attrs:{parameters:e.getProperties,nodeValues:e.nodeValues,path:e.path,hideDelete:e.hideDelete},on:{valueChanged:e.valueChanged}}),e.parameterOptions.length>0&&!e.isReadOnly?s("div",[1===e.parameter.options.length?s("el-button",{staticClass:"add-option",attrs:{size:"small"},on:{click:function(t){return e.optionSelected(e.parameter.options[0].name)}}},[e._v(e._s(e.getPlaceholderText))]):s("el-select",{staticClass:"add-option",attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}},e._l(e.parameterOptions,(function(e){return s("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})})),1)],1):e._e()],1)])},i=[],n=s("4971"),a=s("6fae"),r=s("9ec3"),l=s("aaf5"),d=Object(l["a"])(n["a"],a["a"]).extend({name:"CollectionParameter",props:["hideDelete","nodeValues","parameter","path","values"],data(){return{selectedOption:void 0}},computed:{getPlaceholderText(){return this.parameter.placeholder?this.parameter.placeholder:"Choose Option To Add"},getProperties(){const e=[];let t;for(const s of this.propertyNames)t=this.getOptionProperties(s),void 0!==t&&e.push(t);return e},filteredOptions(){return this.parameter.options.filter(e=>this.displayNodeParameter(e))},parameterOptions(){return this.filteredOptions.filter(e=>!this.propertyNames.includes(e.name))},propertyNames(){return this.values?Object.keys(this.values):[]}},methods:{getArgument(e){if(void 0!==this.parameter.typeOptions&&void 0!==this.parameter.typeOptions[e])return this.parameter.typeOptions[e]},getOptionProperties(e){for(const t of this.parameter.options)if(t.name===e)return t},displayNodeParameter(e){return void 0===e.displayOptions||this.displayParameter(this.nodeValues,e,this.path)},optionSelected(e){const t=this.getOptionProperties(e);if(void 0===t)return;const s=`${this.path}.${t.name}`;let o;if(void 0!==t.typeOptions&&!0===t.typeOptions.multipleValues){let i;"fixedCollection"===t.type?i=Object(r["get"])(this.nodeValues,`${this.path}.${e}`,{}):(i=Object(r["get"])(this.nodeValues,`${this.path}.${e}`,[]),i.push(JSON.parse(JSON.stringify(t.default)))),o={name:s,value:i}}else o={name:s,value:JSON.parse(JSON.stringify(t.default))};this.$emit("valueChanged",o),this.selectedOption=void 0},valueChanged(e){this.$emit("valueChanged",e)}},beforeCreate:function(){this.$options.components.ParameterInputList=s("3c38").default}}),c=d,u=(s("ab7d"),s("2be6")),p=Object(u["a"])(c,o,i,!1,null,null,null);t["default"]=p.exports},"42af":function(e,t,s){},"46d0":function(e,t,s){"use strict";var o=s("f481"),i=s.n(o);i.a},"470f":function(e,t,s){"use strict";var o=s("37f7"),i=s.n(o);i.a},"48df":function(e,t,s){},4971:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("e5bf"),i=s.n(o),n=s("77f0"),a=s("aaf5");const r=Object(a["a"])(n["a"]).extend({data(){return{loadingService:null}},computed:{isReadOnly(){return!["NodeViewExisting","NodeViewNew"].includes(this.$route.name)}},methods:{convertToDisplayDate(e){return i()(e,"yyyy-mm-dd HH:MM:ss")},displayTimer(e,t=!1){if(e<6e4)return!1===t?Math.floor(e/1e3)+" sec.":e/1e3+" sec.";const s=Math.floor(e/1e3),o=Math.floor(s/60),i=(s-60*o).toString().padStart(2,"0");return`${o}:${i} min.`},editAllowedCheck(){return!this.isReadOnly||(this.$showMessage({title:"Workflow can not be changed!",message:"The workflow can not be edited as a past execution gets displayed. To make changed either open the original workflow of which the execution gets displayed or save it under a new name first.",type:"error",duration:0}),!1)},startLoading(){null===this.loadingService&&(this.loadingService=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.8)"}))},stopLoading(){null!==this.loadingService&&(this.loadingService.close(),this.loadingService=null)},async confirmMessage(e,t,s="warning",o="OK",i="Cancel"){try{return await this.$confirm(e,t,{confirmButtonText:o,cancelButtonText:i,type:s,dangerouslyUseHTMLString:!0}),!0}catch(n){return!1}}}})},"4a0c":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{staticClass:"parameter-wrapper"},[s("el-col",{staticClass:"parameter-name",class:{"multi-line":e.isMultiLineParameter},attrs:{span:e.isMultiLineParameter?24:10}},[s("span",{staticClass:"title",attrs:{title:e.parameter.displayName}},[e._v(e._s(e.parameter.displayName))]),e._v(":\n\t\t"),e.parameter.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.parameter.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),s("el-col",{staticClass:"parameter-value",attrs:{span:e.isMultiLineParameter?24:14}},[s("parameter-input",{attrs:{parameter:e.parameter,value:e.value,displayOptions:e.displayOptions,path:e.path},on:{valueChanged:e.valueChanged}})],1)],1)},i=[],n=s("9869"),a=s("89e8"),r=n["default"].extend({name:"ParameterInputFull",components:{ParameterInput:a["a"]},computed:{isMultiLineParameter(){if(this.level>4)return!0;const e=this.getArgument("rows");return void 0!==e&&e>1},level(){return this.path.split(".").length}},props:["displayOptions","parameter","path","value"],methods:{getArgument(e){if(void 0!==this.parameter.typeOptions&&void 0!==this.parameter.typeOptions[e])return this.parameter.typeOptions[e]},valueChanged(e){this.$emit("valueChanged",e)}}}),l=r,d=(s("63f3"),s("2be6")),c=Object(d["a"])(l,o,i,!1,null,null,null);t["a"]=c.exports},"4a15":function(e,t,s){"use strict";var o=s("b4ca"),i=s.n(o);i.a},"4ad1":function(e,t,s){},"4b4d":function(e,t,s){},"4c70":function(e,t,s){},"4cb6":function(e,t,s){"use strict";var o=s("fd90"),i=s.n(o);i.a},"52f2":function(e,t,s){"use strict";var o=s("e78d"),i=s.n(o);i.a},"53f5":function(e,t,s){"use strict";var o=s("ea6e"),i=s.n(o);i.a},5572:function(e,t,s){},"5c0b":function(e,t,s){"use strict";var o=s("4ad1"),i=s.n(o);i.a},"5e82":function(e,t,s){"use strict";var o=s("2644"),i=s.n(o);i.a},6188:function(e,t,s){"use strict";var o=s("aaea"),i=s.n(o);i.a},"62ca":function(e,t,s){"use strict";var o=s("224a"),i=s.n(o);i.a},"63f3":function(e,t,s){"use strict";var o=s("2942"),i=s.n(o);i.a},6929:function(e,t,s){},"6cf6":function(e,t,s){"use strict";var o=s("48df"),i=s.n(o);i.a},"6e4f":function(e,t,s){"use strict";var o=s("eaf6"),i=s.n(o);i.a},"6fae":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("e105"),i=s("7b04"),n=s("9ec3"),a=s("aaf5");const r=Object(a["a"])(i["a"]).extend({methods:{getParameterValue(e,t,s){return Object(n["get"])(e,s?s+"."+t:t)},displayParameter(e,t,s){return o["NodeHelpers"].displayParameterPath(e,t,s)},getNodeIssues(e,t,s){let i=null;if(s=s||[],!0===t.disabled)return null;if(null===e)s.includes("typeUnknown")||(i={typeUnknown:!0});else if(s.includes("parameters")||(i=o["NodeHelpers"].getNodeParametersIssues(e.properties,t)),!s.includes("credentials")){const s=this.getNodeCredentialIssues(t,e);null===i?i=s:o["NodeHelpers"].mergeIssues(i,s)}return!0!==this.hasNodeExecutionIssues(t)||s.includes("execution")||(null===i&&(i={}),i.execution=!0),i},hasNodeExecutionIssues(e){const t=this.$store.getters.getWorkflowRunData;if(null===t||!t.hasOwnProperty(e.name))return!1;for(const s of t[e.name])if(void 0!==s.error)return!0;return!1},updateNodesExecutionIssues(){const e=this.$store.getters.allNodes;for(const t of e)this.$store.commit("setNodeIssue",{node:t.name,type:"execution",value:!!this.hasNodeExecutionIssues(t)||null})},updateNodeCredentialIssues(e){const t=this.getNodeCredentialIssues(e);let s=null;null!==t&&(s=t.credentials),this.$store.commit("setNodeIssue",{node:e.name,type:"credentials",value:s})},updateNodeParameterIssues(e,t){if(void 0===t&&(t=this.$store.getters.nodeType(e.type)),null===t)return;const s=o["NodeHelpers"].getNodeParametersIssues(t.properties,e);let i=null;null!==s&&(i=s.parameters),this.$store.commit("setNodeIssue",{node:e.name,type:"parameters",value:i})},getNodeCredentialIssues(e,t){if(!0===e.disabled)return null;if(void 0===t&&(t=this.$store.getters.nodeType(e.type)),null===t||void 0===t.credentials)return null;if(void 0===t.credentials)return null;const s={};let o,i,n,a;for(const r of t.credentials)!0===this.displayParameter(e.parameters,r,"")&&(i=this.$store.getters.credentialType(r.name),n=null===i?r.name:i.displayName,void 0===e.credentials||void 0===e.credentials[r.name]?!0===r.required&&(s[r.name]=[`Credentials for "${n}" are not set.`]):(a=e.credentials[r.name],o=this.$store.getters.credentialsByType(r.name),null===o&&(o=[]),void 0===o.find(e=>e.name===a)&&(s[r.name]=[`Credentials with name "${a}" do not exist for "${n}".`])));return 0===Object.keys(s).length?null:{credentials:s}},updateNodesCredentialsIssues(){const e=this.$store.getters.allNodes;let t;for(const s of e)t=this.getNodeCredentialIssues(s),this.$store.commit("setNodeIssue",{node:s.name,type:"credentials",value:null===t?null:t.credentials})},getNodeInputData(e,t=0,s=0){if(null===e)return[];if(null===this.$store.getters.getWorkflowExecution)return[];const o=this.$store.getters.getWorkflowExecution.data,i=o.resultData.runData;return null!==i&&void 0!==i[e.name]&&i[e.name][t].data&&void 0!==i[e.name][t].data?this.getMainInputData(i[e.name][t].data,s):[]},getMainInputData(e,t){return!e||!e.hasOwnProperty("main")||void 0===e.main||e.main.length<t||null===e.main[t]?[]:e.main[t]},getBinaryData(e,t,s,o){if(null===t)return[];const i=e;if(null===i||!i[t]||!i[t][s]||!i[t][s].data)return[];const n=this.getMainInputData(i[t][s].data,o),a=[];for(let r=0;r<n.length;r++)n[r].hasOwnProperty("binary")&&void 0!==n[r].binary&&a.push(n[r].binary);return a},disableNodes(e){for(const t of e){const e={name:t.name,properties:{disabled:!t.disabled}};this.$store.commit("updateNodeProperties",e),this.updateNodeParameterIssues(t),this.updateNodeCredentialIssues(t)}}}})},"753b":function(e,t,s){},"77f0":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var o=s("9869"),i=s("8767");const n=o["default"].extend({methods:{$showMessage(e){return e.dangerouslyUseHTMLString=!0,void 0===e.position&&(e.position="bottom-right"),Object(i["Notification"])(e)},$showError(e,t,s){this.$showMessage({title:t,message:`${s}<br /><i>${e.message}</i>`,type:"error",duration:0})}}})},"79ed":function(e,t,s){},"7b04":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var o=s("9869"),i=s("2f01"),n=s("8206"),a=s.n(n);function r(e){const t={...e,workflowData:e.workflowData,data:Object(i["a"])(e.data)};return t.finished=!!t.finished&&t.finished,e.id&&(t.id=e.id),t}class l extends Error{constructor(e,t,s,o){super(e),this.name="ResponseError",t&&(this.errorCode=t),s&&(this.httpStatusCode=s),o&&(this.serverStackTrace=o)}}const d=o["default"].extend({methods:{restApi(){const e=this;return{async makeRestApiRequest(t,s,o){try{const i={method:t,url:s,baseURL:e.$store.getters.getRestUrl,headers:{sessionid:e.$store.getters.sessionId}};["PATCH","POST","PUT"].includes(t)?i.data=o:i.params=o;const n=await a.a.request(i);return n.data.data}catch(i){if("Network Error"===i.message)throw new l("API-Server can not be reached. It is probably down.");const e=i.response.data;if(void 0!==e&&void 0!==e.message)throw new l(e.message,e.code,i.response.status,e.stack);throw i}},getActiveWorkflows:()=>e.restApi().makeRestApiRequest("GET","/active"),getActivationError:t=>e.restApi().makeRestApiRequest("GET","/active/error/"+t),getCurrentExecutions:t=>{let s={};return t&&(s={filter:t}),e.restApi().makeRestApiRequest("GET","/executions-current",s)},stopCurrentExecution:t=>e.restApi().makeRestApiRequest("POST",`/executions-current/${t}/stop`),getSettings:()=>e.restApi().makeRestApiRequest("GET","/settings"),getNodeTypes:()=>e.restApi().makeRestApiRequest("GET","/node-types"),getNodeParameterOptions:(t,s,o,i)=>{const n={nodeType:t,methodName:s,credentials:i,currentNodeParameters:o};return e.restApi().makeRestApiRequest("GET","/node-parameter-options",n)},removeTestWebhook:t=>e.restApi().makeRestApiRequest("DELETE","/test-webhook/"+t),runWorkflow:async t=>e.restApi().makeRestApiRequest("POST","/workflows/run",t),createNewWorkflow:t=>e.restApi().makeRestApiRequest("POST","/workflows",t),updateWorkflow:(t,s)=>e.restApi().makeRestApiRequest("PATCH","/workflows/"+t,s),deleteWorkflow:t=>e.restApi().makeRestApiRequest("DELETE","/workflows/"+t),getWorkflow:t=>e.restApi().makeRestApiRequest("GET","/workflows/"+t),getWorkflows:t=>{let s;return t&&(s={filter:t}),e.restApi().makeRestApiRequest("GET","/workflows",s)},getWorkflowFromUrl:t=>e.restApi().makeRestApiRequest("GET","/workflows/from-url",{url:t}),createNewCredentials:t=>e.restApi().makeRestApiRequest("POST","/credentials",t),deleteCredentials:t=>e.restApi().makeRestApiRequest("DELETE","/credentials/"+t),updateCredentials:(t,s)=>e.restApi().makeRestApiRequest("PATCH","/credentials/"+t,s),getCredentials:(t,s)=>{let o;return s&&(o={includeData:s}),e.restApi().makeRestApiRequest("GET","/credentials/"+t,o)},getAllCredentials:t=>{let s;return t&&(s={filter:t}),e.restApi().makeRestApiRequest("GET","/credentials",s)},getCredentialTypes:()=>e.restApi().makeRestApiRequest("GET","/credential-types"),oAuth1CredentialAuthorize:t=>e.restApi().makeRestApiRequest("GET","/oauth1-credential/auth",t),oAuth2CredentialAuthorize:t=>e.restApi().makeRestApiRequest("GET","/oauth2-credential/auth",t),oAuth2Callback:(t,s)=>{const o={code:t,state:s};return e.restApi().makeRestApiRequest("POST","/oauth2-credential/callback",o)},getExecution:async t=>{const s=await e.restApi().makeRestApiRequest("GET","/executions/"+t);return r(s)},deleteExecutions:t=>e.restApi().makeRestApiRequest("POST","/executions/delete",t),retryExecution:(t,s)=>{let o;return!0===s&&(o={loadWorkflow:!0}),e.restApi().makeRestApiRequest("POST",`/executions/${t}/retry`,o)},getPastExecutions:(t,s,o)=>{let i={};return t&&(i={filter:t,lastId:o,limit:s}),e.restApi().makeRestApiRequest("GET","/executions",i)},getTimezones:()=>e.restApi().makeRestApiRequest("GET","/options/timezones")}}}})},"7b46":function(e,t,s){"use strict";var o=s("c570"),i=s.n(o);i.a},"847d":function(e,t,s){"use strict";var o=s("0b8a"),i=s.n(o);i.a},"85ee":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a}));const o=204800,i=250,n="node-",a="__EMPTY__"},"89e8":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.parameterInputClasses,on:{keydown:function(e){e.stopPropagation()}}},[s("expression-edit",{attrs:{dialogVisible:e.expressionEditDialogVisible,value:e.value,parameter:e.parameter,path:e.path},on:{closeDialog:e.closeExpressionEditDialog,valueChanged:e.expressionUpdated}}),s("div",{staticClass:"parameter-input ignore-key-press",style:e.parameterInputWrapperStyle},[["json","string"].includes(e.parameter.type)||null!==e.remoteParameterOptionsLoadingIssues?s("div",[s("code-edit",{attrs:{dialogVisible:e.codeEditDialogVisible,value:e.value,parameter:e.parameter},on:{closeDialog:e.closeCodeEditDialog,valueChanged:e.expressionUpdated}}),s("text-edit",{attrs:{dialogVisible:e.textEditDialogVisible,value:e.value,parameter:e.parameter},on:{closeDialog:e.closeTextEditDialog,valueChanged:e.expressionUpdated}}),!0===e.isEditor?s("div",{staticClass:"clickable",on:{click:function(t){return e.displayEditDialog()}}},[e.codeEditDialogVisible?e._e():s("prism-editor",{attrs:{lineNumbers:!0,readonly:!0,code:e.displayValue,language:"js"}})],1):s("el-input",{ref:"inputField",attrs:{size:"small",type:e.getStringInputType,rows:e.getArgument("rows"),value:e.displayValue,disabled:e.isReadOnly,title:e.displayTitle,placeholder:e.isValueExpression?"":e.parameter.placeholder},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}},[e.isValueExpression||e.isReadOnly?e._e():s("font-awesome-icon",{staticClass:"edit-window-button clickable",attrs:{slot:"suffix",icon:"external-link-alt",title:"Open Edit Window"},on:{click:function(t){return e.displayEditDialog()}},slot:"suffix"})],1)],1):"dateTime"===e.parameter.type?s("div",[s("el-date-picker",{ref:"inputField",attrs:{type:"datetime",size:"small",value:e.displayValue,title:e.displayTitle,disabled:e.isReadOnly,placeholder:e.parameter.placeholder?e.parameter.placeholder:"Select date and time","picker-options":e.dateTimePickerOptions},on:{change:e.valueChanged,focus:e.setFocus,keydown:function(e){e.stopPropagation()}},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1):"number"===e.parameter.type?s("div",[s("el-input-number",{ref:"inputField",attrs:{size:"small",value:e.displayValue,max:e.getArgument("maxValue"),min:e.getArgument("minValue"),precision:e.getArgument("numberPrecision"),step:e.getArgument("numberStepSize"),disabled:e.isReadOnly,title:e.displayTitle,placeholder:e.parameter.placeholder},on:{change:e.valueChanged,focus:e.setFocus,keydown:function(e){e.stopPropagation()}}})],1):"options"===e.parameter.type?s("el-select",{ref:"inputField",attrs:{size:"small",filterable:"",value:e.displayValue,loading:e.remoteParameterOptionsLoading,disabled:e.isReadOnly||e.remoteParameterOptionsLoading,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus}},e._l(e.parameterOptions,(function(t){return s("el-option",{key:t.value,attrs:{value:t.value,label:t.name}},[s("div",{staticClass:"option-headline"},[e._v(e._s(t.name))]),t.description?s("div",{staticClass:"option-description",domProps:{innerHTML:e._s(t.description)}}):e._e()])})),1):"multiOptions"===e.parameter.type?s("el-select",{ref:"inputField",attrs:{size:"small",filterable:"",multiple:"",value:e.displayValue,loading:e.remoteParameterOptionsLoading,disabled:e.isReadOnly||e.remoteParameterOptionsLoading,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus}},e._l(e.parameterOptions,(function(t){return s("el-option",{key:t.value,attrs:{value:t.value,label:t.name}},[s("div",{staticClass:"option-headline"},[e._v(e._s(t.name))]),t.description?s("div",{staticClass:"option-description",domProps:{innerHTML:e._s(t.description)}}):e._e()])})),1):"color"===e.parameter.type?s("div",{ref:"inputField",staticClass:"color-input"},[s("el-color-picker",{staticClass:"color-picker",attrs:{value:e.displayValue,disabled:e.isReadOnly,size:"small",title:e.displayTitle},on:{change:e.valueChanged,focus:e.setFocus}}),s("el-input",{attrs:{size:"small",type:"text",value:e.displayValue,disabled:e.isReadOnly,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(e){e.stopPropagation()},focus:e.setFocus},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1):"boolean"===e.parameter.type?s("div",[s("el-switch",{ref:"inputField",attrs:{value:e.displayValue,"active-color":"#13ce66",disabled:e.isValueExpression||e.isReadOnly},on:{change:e.valueChanged}}),s("div",{staticClass:"expression-info clickable",on:{click:function(t){e.expressionEditDialogVisible=!0}}},[e._v("Edit Expression")])],1):e._e()],1),e.displayOptionsComputed?s("div",{staticClass:"parameter-options"},[s("el-dropdown",{attrs:{trigger:"click",size:"mini"},on:{command:e.optionSelected}},[s("span",{staticClass:"el-dropdown-link"},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"cogs",title:"Parameter Options"}})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[!0===e.parameter.noDataExpression||e.isValueExpression?e._e():s("el-dropdown-item",{attrs:{command:"addExpression"}},[e._v("Add Expression")]),!0!==e.parameter.noDataExpression&&e.isValueExpression?s("el-dropdown-item",{attrs:{command:"removeExpression"}},[e._v("Remove Expression")]):e._e(),s("el-dropdown-item",{attrs:{command:"resetValue",disabled:e.isDefault,divided:""}},[e._v("Reset Value")])],1)],1)],1):e._e(),e.getIssues.length?s("div",{staticClass:"parameter-issues"},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("Issues:<br />&nbsp;&nbsp;- "+e.getIssues.join("<br />&nbsp;&nbsp;- "))},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):e._e()],1)},i=[],n=s("9ec3"),a=s("e105"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Edit "+e.parameter.displayName,"before-close":e.closeDialog}},[s("div",{staticClass:"text-editor-wrapper ignore-key-press"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t"+e._s(e.parameter.displayName)+":\n\t\t\t")]),s("div",{staticClass:"text-editor",on:{keydown:function(e){e.stopPropagation()}}},[s("prism-editor",{attrs:{lineNumbers:!0,code:e.value,language:"js"},on:{change:e.valueChanged}})],1)])])],1):e._e()},l=[],d=s("9869"),c=s("789a"),u=s.n(c),p=d["default"].extend({name:"CodeEdit",props:["dialogVisible","parameter","value"],components:{PrismEditor:u.a},data(){return{}},methods:{valueChanged(e){this.$emit("valueChanged",e)},closeDialog(){return this.$emit("closeDialog"),!1}}}),h=p,m=(s("1caf"),s("2be6")),f=Object(m["a"])(h,r,l,!1,null,"49397ad7",null),w=f.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",{on:{keydown:function(e){e.stopPropagation()}}},[s("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"expression-dialog","append-to-body":"",width:"80%",title:"Edit Expression","before-close":e.closeDialog}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"header-side-menu"},[s("div",{staticClass:"headline"},[e._v("\n\t\t\t\t\t\tEdit Expression\n\t\t\t\t\t")]),s("div",{staticClass:"sub-headline"},[e._v("\n\t\t\t\t\t\tVariable Selector\n\t\t\t\t\t")])]),s("div",{staticClass:"variable-selector"},[s("variable-selector",{attrs:{path:e.path},on:{itemSelected:e.itemSelected}})],1)]),s("el-col",{staticClass:"right-side",attrs:{span:16}},[s("div",{staticClass:"expression-editor-wrapper"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t\t\tExpression\n\t\t\t\t\t")]),s("div",{staticClass:"expression-editor"},[s("expression-input",{ref:"inputFieldExpression",attrs:{parameter:e.parameter,rows:"8",value:e.value,path:e.path},on:{change:e.valueChanged,keydown:function(t){return t.stopPropagation(),e.noOp(t)}}})],1)]),s("div",{staticClass:"expression-result-wrapper"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t\t\tResult\n\t\t\t\t\t")]),s("expression-input",{attrs:{parameter:e.parameter,resolvedValue:"true",rows:"8",value:e.value,path:e.path}})],1)])],1)],1)],1):e._e()},v=[],y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:"expression-editor",staticClass:"ignore-key-press",style:e.editorStyle,on:{keydown:function(e){e.stopPropagation()}}})])},k=[],b=(s("b8f1"),s("d5a1")),x=s.n(b),C=s("5d01"),N=s.n(C),D=s("d2e2"),E=s("aaf5"),$=Object(E["a"])(D["a"]).extend({name:"ExpressionInput",props:["rows","value","parameter","path","resolvedValue"],data(){return{editor:null}},computed:{editorStyle(){let e=1;return this.rows&&(e=parseInt(this.rows,10)),{height:Math.max(26*e+10,40)+"px"}},workflow(){return this.getWorkflow()}},watch:{value(){this.resolvedValue&&this.initValue()}},mounted(){const e=this,t=x.a.import("blots/inline");class s extends t{static create(e){const t=super.create(e);return t.setAttribute("data-value",e),t.setAttribute("class","variable"),t}static formats(t){let s=t.innerHTML.trim();e.resolvedValue&&(s=t.getAttribute("data-value"));const o=e.getPlaceholderClasses(s);return t.getAttribute("class")!==o&&t.setAttribute("class",o),!0}}s.blotName="variable",s.className="variable",s.tagName="span",x.a.register({"formats/variable":s}),N.a.DEFAULTS={expression:{trigger:/\B[\w\s]/,find:/\{\{[^\s,;:!?}]+\}\}/i,format:"variable"}},this.editor=new x.a(this.$refs["expression-editor"],{readOnly:!!this.resolvedValue,modules:{autoformat:{}}}),this.editor.root.addEventListener("blur",e=>{this.$emit("blur",e)}),this.initValue(),this.resolvedValue||(this.setFocus(),this.editor.on("text-change",()=>this.update()))},methods:{customizeVariable(e){const t={classes:[],message:e};let s;try{s=this.resolveExpression("="+e),void 0!==s?t.classes.push("valid"):t.classes.push("invalid")}catch(o){t.classes.push("invalid")}return t},resolveParameterString(e){let t;try{t=this.resolveExpression("="+e)}catch(s){return`[invalid (${s.message})]`}return void 0===t?"[not found]":t},getPlaceholderClasses(e){const t=this.customizeVariable(e);return"variable "+t.classes.join(" ")},getValue(){if(!this.editor)return"";const e=this.editor.getContents();if(!e||!e.ops)return"";let t="";return e.ops.forEach(e=>{e.insert&&(t+=e.insert)}),"="+t.replace(/\s+$/g,"")},setFocus(){this.editor.focus()},itemSelected(e){this.editor.focus();const t=this.editor.getSelection();let s=null;if(t&&(s=t.index),s)this.editor.insertText(s,`{{${e.variable}}}`,"variable",!0),this.update();else{let t=this.value;"="!==t&&(t+=" "),t+=`{{${e.variable}}}\n`,this.$emit("change",t),this.resolvedValue||d["default"].nextTick(()=>{this.initValue()})}},initValue(){if(!this.value)return;let e=this.value;"="===e.charAt(0)&&(e=e.slice(1));const t=[];e.replace(/\{\{(.*?)\}\}/gi,"*%%#_@^$1*%%#_@").split("*%%#_@").forEach(e=>{if(e)if("^"===e.charAt(0)){let s=`{{${e.slice(1)}}}`;this.resolvedValue&&(s=[null,void 0].includes(s)?"":s,s=this.resolveParameterString(s.toString())),s=[null,void 0].includes(s)?"":s,t.push({attributes:{variable:`{{${e.slice(1)}}}`},insert:s.toString()})}else t.push({insert:e});else;}),this.editor.setContents(t)},update(){this.$emit("input",this.getValue()),this.$emit("change",this.getValue())}}}),O=$,T=(s("46d0"),Object(m["a"])(O,y,k,!1,null,null,null)),A=T.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"variable-selector-wrapper",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"input-wrapper"},[s("el-input",{ref:"inputField",attrs:{placeholder:"Variable filter...",size:"small",type:"text"},model:{value:e.variableFilter,callback:function(t){e.variableFilter=t},expression:"variableFilter"}})],1),s("div",{staticClass:"result-wrapper"},e._l(e.currentResults,(function(t){return s("variable-selector-item",{key:t.key,attrs:{item:t,extendAll:e.extendAll},on:{itemSelected:e.forwardItemSelected}})})),1)])},S=[],P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"item"},[e.item.options?s("div",{staticClass:"options"},[e.item.options.length?s("div",{staticClass:"headline clickable",on:{click:function(t){e.extended=!e.extended}}},[!0!==e.extendAll?s("div",{staticClass:"options-toggle"},[e.extended?s("font-awesome-icon",{attrs:{icon:"angle-down"}}):s("font-awesome-icon",{attrs:{icon:"angle-right"}})],1):e._e(),s("div",{staticClass:"option-title",attrs:{title:e.item.key}},[e._v("\n\t\t\t\t"+e._s(e.item.name)+"\n\n\t\t\t\t"),!0===e.allowParentSelect?s("el-dropdown",{attrs:{trigger:"click"},on:{click:function(e){e.stopPropagation()},command:function(t){return e.optionSelected(t,e.item)}}},[s("span",{staticClass:"el-dropdown-link clickable",on:{click:function(e){e.stopPropagation()}}},[s("font-awesome-icon",{attrs:{icon:"dot-circle",title:"Select Item"}})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.itemAddOperations,(function(t){return s("el-dropdown-item",{key:t.command,attrs:{command:t.command}},[e._v(e._s(t.displayName))])})),1)],1):e._e()],1)]):e._e(),!e.item.options||!0!==e.extended&&!0!==e.extendAll?e._e():s("div",e._l(e.item.options,(function(t){return s("variable-selector-item",{key:t.key,staticClass:"sub-level",attrs:{item:t,extendAll:e.extendAll,allowParentSelect:t.allowParentSelect},on:{itemSelected:e.forwardItemSelected}})})),1)]):s("div",{staticClass:"value clickable",on:{click:function(t){return e.selectItem(e.item)}}},[s("div",{staticClass:"item-title",attrs:{title:e.item.key}},[e._v("\n\t\t\t"+e._s(e.item.name)+":\n\t\t\t"),s("font-awesome-icon",{attrs:{icon:"dot-circle",title:"Select Item"}})],1),s("div",{staticClass:"item-value"},[e._v(e._s(void 0!==e.item.value?e.item.value:"--- EMPTY ---"))])])])},I=[],V=d["default"].extend({name:"VariableSelectorItem",props:["allowParentSelect","extendAll","item"],computed:{itemAddOperations(){const e=[{command:"raw",displayName:"Raw value"}];return"array"===this.item.dataType?(e.push({command:"arrayLength",displayName:"Length"}),e.push({command:"arrayValues",displayName:"Values"})):"object"===this.item.dataType&&(e.push({command:"objectKeys",displayName:"Keys"}),e.push({command:"objectValues",displayName:"Values"})),e}},data(){return{extended:!1}},methods:{optionSelected(e,t){let s=t.key;"arrayValues"===e?s=t.key+".join(', ')":"arrayLength"===e?s=t.key+".length":"objectKeys"===e?s=`Object.keys(${t.key}).join(', ')`:"objectValues"===e&&(s=`Object.values(${t.key}).join(', ')`),this.$emit("itemSelected",{variable:s})},selectItem(e){this.$emit("itemSelected",{variable:e.key})},forwardItemSelected(e){this.$emit("itemSelected",e)}}}),W=V,R=(s("6e4f"),Object(m["a"])(W,P,I,!1,null,"42795557",null)),L=R.exports,M=Object(E["a"])(D["a"]).extend({name:"VariableSelector",components:{VariableSelectorItem:L},props:["path"],data(){return{variableFilter:"",selectorOpenInputIndex:null}},computed:{extendAll(){return!!this.variableFilter},currentResults(){return this.getFilterResults(this.variableFilter.toLowerCase(),0)},workflow(){return this.getWorkflow()}},methods:{forwardItemSelected(e){this.$emit("itemSelected",e)},sortOptions(e){return null===e?null:e.sort((e,t)=>{const s=e.hasOwnProperty("options"),o=t.hasOwnProperty("options");return o&&!s?1:!o&&s||e.name<t.name?-1:e.name>t.name?1:0})},removeEmptyEntries(e){if(Array.isArray(e)){const t=[];let s;return e.forEach(e=>{s=this.removeEmptyEntries(e),null!==s&&t.push(s)}),t}if(e&&e.options){const t=this.removeEmptyEntries(e.options);return Array.isArray(t)&&t.length?(e.options=this.sortOptions(t),e):null}return e},getPathNormalized(e){if(void 0===e)return"";const t=e.split("."),s=[];let o;for(const i of t){const e=i.match(/\[.*?\]/g);if(null===e)s.push(i);else for(o of("["!==i.charAt(0)&&s.push(i.substr(0,i.indexOf("["))),e))o=o.slice(1,-1),['"',"'"].includes(o.charAt(0))?(o=o.slice(1,-1),s.push(o)):s.push(`[${o}]`)}return s.join("|")},jsonDataToFilterOption(e,t,s,o,i,n,a){let r=`${t}["${s}"]`;void 0!==i&&(r+=`[${i}]`);const l=[];if(null===e)return l.push({name:s,key:r,value:"[null]"}),l;if(Array.isArray(e)){let d=s,c=t;void 0!==i&&(c+=`["${s}"]`,d=i.toString());const u=[];for(let t=0;t<e.length;t++)u.push.apply(u,this.jsonDataToFilterOption(e[t],c,d,o,t,`[Item: ${t}]`,a));l.push({name:n||s,options:u,key:r,allowParentSelect:!0,dataType:"array"})}else if("object"===typeof e){const t=[];for(const s of Object.keys(e))t.push.apply(t,this.jsonDataToFilterOption(e[s],r,s,o,void 0,void 0,a));t.length&&l.push({name:n||s,options:this.sortOptions(t),key:r,allowParentSelect:!0,dataType:"object"})}else{if(void 0!==o&&-1===s.toLowerCase().indexOf(o))return l;this.getPathNormalized(a)!==this.getPathNormalized(r)&&l.push({name:s,key:r,value:e})}return l},getNodeOutputData(e,t,s,o=0,i=0,n="main",a=0){if(!e.hasOwnProperty(t))return null;if(e[t].length<=i)return null;if(!e[t][i].hasOwnProperty("data")||null===e[t][i].data||void 0===e[t][i].data)return null;if(!e[t][i].data.hasOwnProperty(n))return null;if(e[t][i].data[n].length<=a)return null;if(null===e[t][i].data[n][a]||e[t][i].data[n][a].length<=o)return null;const r=e[t][i].data[n][a][o],l=[];if(r.hasOwnProperty("json")){const e=[];for(const o of Object.keys(r.json))e.push.apply(e,this.jsonDataToFilterOption(r.json[o],`$node["${t}"].json`,o,s));e.length&&l.push({name:"JSON",options:this.sortOptions(e)})}if(r.hasOwnProperty("binary")){const e=[];let o=[];for(const i of Object.keys(r.binary)){o=[];for(const e in r.binary[i])"data"!==e&&(s&&-1===e.toLowerCase().indexOf(s)||o.push({name:e,key:`$node["${t}"].binary.${i}.${e}`,value:r.binary[i][e]}));o.length&&e.push({name:i,key:`$node["${t}"].binary.${i}`,options:this.sortOptions(o),allowParentSelect:!0})}e.length&&l.push({name:"Binary",key:`$node["${t}"].binary`,options:this.sortOptions(e),allowParentSelect:!0})}return l},getNodeContext(e,t,s,o,i){const n=0,r=0,l="main",d=0,c=[],u=this.connectionInputData(s,l,d,n);if(null===u)return c;const p=new a["WorkflowDataProxy"](e,t,d,r,o,u),h=p.getDataProxy(),m=h.$node[o].context;for(const a of Object.keys(m))void 0!==i&&-1===a.toLowerCase().indexOf(i)||c.push({name:a,key:`$node["${o}"].context["${a}"]`,value:m[a]});return c},getNodeParameters(e,t,s,o){const i=this.workflow.getNode(e);if(null===i)return null;const n=[];for(const a in i.parameters)a!==s&&(void 0!==o&&-1===a.toLowerCase().indexOf(o)||n.push.apply(n,this.jsonDataToFilterOption(i.parameters[a],t,a,o,void 0,void 0,s)));return n},getFilterResults(e,t){const s="main",o=this.$store.getters.activeNode;if(null===o)return[];const i=this.$store.getters.getWorkflowExecution;let n=this.workflow.getParentNodes(o.name,s,1),a=this.$store.getters.getWorkflowRunData;null===a&&(a={});let r=[];const l=[];let d,c;if(null!==i){const t=i.data;d=this.getNodeContext(this.workflow,t,n,o.name,e),d.length&&l.push({name:"Context",options:this.sortOptions(d)})}if(n.length){const s=this.workflow.getNodeConnectionOutputIndex(o.name,n[0],"main");c=this.getNodeOutputData(a,n[0],e,t,0,"main",s),c&&(JSON.stringify(c).length<102400?l.push({name:"Input Data",options:this.sortOptions(c)}):l.push({name:"Input Data",options:[{name:"[Data to large]"}]}))}const u="$parameter";let p=this.path;p.startsWith("parameters.")&&(p=u+p.substring(10)),l.push({name:"Parameters",options:this.sortOptions(this.getNodeParameters(o.name,u,p,e))}),r.push({name:"Current Node",options:this.sortOptions(l)});const h=[];let m;const f=this.workflow.getParentNodes(o.name,s);for(const w of Object.keys(this.workflow.nodes))if(w!==o.name){if(m=[{name:"Parameters",options:this.sortOptions(this.getNodeParameters(w,`$node["${w}"].parameter`,void 0,e))}],null!==i){const t=i.data;n=this.workflow.getParentNodes(w,s,1),d=this.getNodeContext(this.workflow,t,n,w,e),d.length&&(m=[{name:"Context",options:this.sortOptions(d)}])}f.includes(w)&&(c=this.getNodeOutputData(a,w,e,t),c&&m.push({name:"Output Data",options:this.sortOptions(c)})),h.push({name:w,options:this.sortOptions(m)})}return r.push({name:"Nodes",options:this.sortOptions(h)}),r=this.removeEmptyEntries(r),null===r?[]:r}}}),j=M,F=(s("a542"),Object(m["a"])(j,_,S,!1,null,"0c3c6cb1",null)),B=F.exports,U=d["default"].extend({name:"ExpressionEdit",props:["dialogVisible","parameter","path","value"],components:{ExpressionInput:A,VariableSelector:B},data(){return{}},methods:{valueChanged(e){this.$emit("valueChanged",e)},closeDialog(){return this.$emit("closeDialog"),!1},itemSelected(e){this.$refs.inputFieldExpression.itemSelected(e)}}}),z=U,q=(s("fec8"),Object(m["a"])(z,g,v,!1,null,"6d3f0730",null)),J=q.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Edit "+e.parameter.displayName,"before-close":e.closeDialog}},[s("div",{staticClass:"text-editor-wrapper ignore-key-press"},[s("div",{staticClass:"editor-description"},[e._v("\n\t\t\t\t"+e._s(e.parameter.displayName)+":\n\t\t\t")]),s("div",{staticClass:"text-editor",on:{keydown:[function(e){e.stopPropagation()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeDialog()}]}},[s("el-input",{ref:"inputField",attrs:{type:"textarea",value:e.value,placeholder:e.parameter.placeholder,rows:"15"},on:{change:e.valueChanged,keydown:function(t){return t.stopPropagation(),e.noOp(t)}},model:{value:e.tempValue,callback:function(t){e.tempValue=t},expression:"tempValue"}})],1)])])],1):e._e()},K=[],Y=d["default"].extend({name:"TextEdit",props:["dialogVisible","parameter","value"],data(){return{tempValue:""}},methods:{valueChanged(e){this.$emit("valueChanged",e)},closeDialog(){return this.$emit("closeDialog"),!1}},mounted(){this.tempValue=this.value},watch:{dialogVisible(){!0===this.dialogVisible&&d["default"].nextTick(()=>{this.$refs.inputField.focus()})},value(){this.tempValue=this.value}}}),G=Y,Z=(s("6188"),Object(m["a"])(G,H,K,!1,null,"e1a93d38",null)),X=Z.exports,Q=s("4971"),ee=s("6fae"),te=s("77f0"),se=Object(E["a"])(Q["a"],ee["a"],te["a"],D["a"]).extend({name:"ParameterInput",components:{CodeEdit:w,ExpressionEdit:J,PrismEditor:u.a,TextEdit:X},props:["displayOptions","parameter","path","value","isCredential"],data(){return{codeEditDialogVisible:!1,nodeName:"",expressionAddOperation:"set",expressionEditDialogVisible:!1,remoteParameterOptions:[],remoteParameterOptionsLoading:!1,remoteParameterOptionsLoadingIssues:null,textEditDialogVisible:!1,tempValue:"",dateTimePickerOptions:{shortcuts:[{text:"Today",onClick(e){e.$emit("pick",new Date)}},{text:"Yesterday",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"A week ago",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},watch:{dependentParametersValues(){this.loadRemoteParameterOptions()},value(){this.tempValue=this.displayValue}},computed:{dependentParametersValues(){const e=this.getArgument("loadOptionsDependsOn");if(void 0===e)return null;const t=this.$store.getters.activeNode.parameters,s=this.getResolveNodeParameters(t),o=[];for(const i of e)o.push(Object(n["get"])(s,i));return o.join("|")},node(){return!0===this.isCredential?null:this.$store.getters.activeNode},displayTitle(){let e=`Parameter: "${this.shortPath}"`;return this.getIssues.length?(e+=" has issues",!0===this.isValueExpression&&(e+=" and expression"),e+="!"):!0===this.isValueExpression&&(e+=" has expression"),e},displayValue(){if(!0===this.remoteParameterOptionsLoading)return"Loading options...";let e;if(e=!1===this.isValueExpression?this.value:this.expressionValueComputed,void 0!==e&&null!==e&&"string"===this.parameter.type){const t=this.getArgument("rows");void 0!==t&&1!==t||(e=e.toString().replace(/\n/,"|"))}return e},displayOptionsComputed(){return!0!==this.isReadOnly&&("collection"!==this.parameter.type&&!0===this.displayOptions)},expressionValueComputed(){if(!0===this.isCredential||null===this.node)return null;let e;try{e=this.resolveExpression(this.value)}catch(t){e=`[ERROR: ${t.message}]`}return"number"===this.parameter.type&&(e=parseInt(e,10),isNaN(e))?null:e},getStringInputType(){if(!0===this.getArgument("password"))return"password";const e=this.getArgument("rows");return void 0!==e&&e>1?"textarea":"text"},getIssues(){if(!0===this.isCredential||null===this.node)return[];const e=this.shortPath.split(".");e.pop();const t=a["NodeHelpers"].getParameterIssues(this.parameter,this.node.parameters,e.join("."));if(["options","multiOptions"].includes(this.parameter.type)&&!1===this.remoteParameterOptionsLoading&&null===this.remoteParameterOptionsLoadingIssues){const e=this.parameterOptions.map(e=>e.value),s=[];Array.isArray(this.displayValue)?s.push.apply(s,this.displayValue):s.push(this.displayValue);for(const o of s)null!==o&&e.includes(o)||(void 0===t.parameters&&(t.parameters={}),t.parameters[this.parameter.name]=[`The value "${o}" is not supported!`])}else null!==this.remoteParameterOptionsLoadingIssues&&(void 0===t.parameters&&(t.parameters={}),t.parameters[this.parameter.name]=[`There was a problem loading the parameter options from server: "${this.remoteParameterOptionsLoadingIssues}"`]);return void 0!==t&&void 0!==t.parameters&&void 0!==t.parameters[this.parameter.name]?t.parameters[this.parameter.name]:[]},isDefault(){return this.parameter.default===this.value},isEditor(){return"code"===this.getArgument("editor")},isValueExpression(){return!0!==this.parameter.noDataExpression&&("string"===typeof this.value&&"="===this.value.charAt(0))},parameterOptions(){return void 0===this.remoteMethod?this.parameter.options:this.remoteParameterOptions},parameterInputClasses(){const e=[];return this.isValueExpression&&e.push("expression"),this.getIssues.length&&e.push("has-issues"),e},parameterInputWrapperStyle(){let e=0;const t={width:"100%"};return!0===this.displayOptionsComputed&&(e+=25),this.getIssues.length&&(e+=20),0!==e&&(t.width=`calc(100% - ${e}px)`),t},remoteMethod(){return this.getArgument("loadOptionsMethod")},shortPath(){const e=this.path.split(".");return e.shift(),e.join(".")},workflow(){return this.getWorkflow()}},methods:{getResolveNodeParameters(e){const t={};for(const s of Object.keys(e))Array.isArray(e[s])?t[s]=e[s].map(e=>this.resolveExpression(e)):"object"===typeof e[s]?t[s]=this.getResolveNodeParameters(e[s]):t[s]=this.resolveExpression(e[s]);return t},async loadRemoteParameterOptions(){if(null===this.node||void 0===this.remoteMethod||this.remoteParameterOptionsLoading)return;this.remoteParameterOptionsLoadingIssues=null,this.remoteParameterOptionsLoading=!0,this.remoteParameterOptions.length=0;const e=this.$store.getters.activeNode.parameters,t=this.getResolveNodeParameters(e);try{const e=await this.restApi().getNodeParameterOptions(this.node.type,this.remoteMethod,t,this.node.credentials);this.remoteParameterOptions.push.apply(this.remoteParameterOptions,e)}catch(s){this.remoteParameterOptionsLoadingIssues=s.message}this.remoteParameterOptionsLoading=!1},closeCodeEditDialog(){this.codeEditDialogVisible=!1},closeExpressionEditDialog(){this.expressionEditDialogVisible=!1},closeTextEditDialog(){this.textEditDialogVisible=!1},displayEditDialog(){this.isEditor?this.codeEditDialogVisible=!0:this.textEditDialogVisible=!0},getArgument(e){if(void 0!==this.parameter.typeOptions&&void 0!==this.parameter.typeOptions[e])return this.parameter.typeOptions[e]},expressionUpdated(e){this.valueChanged(e)},setFocus(){!0!==this.isReadOnly&&(this.isValueExpression?this.expressionEditDialogVisible=!0:["json","string"].includes(this.parameter.type)&&this.getArgument("alwaysOpenEditWindow")?this.displayEditDialog():(null!==this.node&&(this.nodeName=this.node.name),setTimeout(()=>{this.$refs.inputField.$el.querySelector("input").focus()})))},valueChanged(e){e instanceof Date&&(e=e.toISOString());const t={node:null!==this.node?this.node.name:this.nodeName,name:this.path,value:e};this.$emit("valueChanged",t)},optionSelected(e){"resetValue"===e?this.valueChanged(this.parameter.default):"addExpression"===e?(this.valueChanged("="+this.value),this.expressionEditDialogVisible=!0):"removeExpression"===e&&this.valueChanged(this.expressionValueComputed||null)}},mounted(){if(this.tempValue=this.displayValue,null!==this.node&&(this.nodeName=this.node.name),void 0!==this.remoteMethod&&null!==this.node&&(this.$watch(()=>this.node.credentials,()=>{this.loadRemoteParameterOptions()},{deep:!0,immediate:!0}),this.parameter.typeOptions&&this.parameter.typeOptions.reloadOnChange)){const e=this.parameter.typeOptions.reloadOnChange;for(let t=0;t<e.length;t++){const s=e[t];s in this.node.parameters&&this.$watch(()=>this.node&&this.node.parameters&&this.node.parameters[s]?this.node.parameters[s]:null,()=>{this.loadRemoteParameterOptions()},{deep:!0,immediate:!0})}}}}),oe=se,ie=(s("b3af"),s("847d"),Object(m["a"])(oe,o,i,!1,null,"62d29b22",null));t["a"]=ie.exports},"89f3":function(e,t,s){},9147:function(e,t,s){},"92fc":function(e,t,s){"use strict";var o=s("d3d8"),i=s.n(o);i.a},9321:function(e,t,s){},"9d30":function(e,t,s){"use strict";var o=s("42af"),i=s.n(o);i.a},a38a:function(e,t,s){},a46f:function(e,t,s){"use strict";var o=s("79ed"),i=s.n(o);i.a},a542:function(e,t,s){"use strict";var o=s("4b4d"),i=s.n(o);i.a},a8e0:function(e,t,s){"use strict";var o=s("4c70"),i=s.n(o);i.a},aaea:function(e,t,s){},ab7d:function(e,t,s){"use strict";var o=s("03b2"),i=s.n(o);i.a},ae93:function(e,t,s){"use strict";var o=s("041d"),i=s.n(o);i.a},b3af:function(e,t,s){"use strict";var o=s("f53f"),i=s.n(o);i.a},b455:function(e,t,s){},b47e:function(e,t,s){"use strict";var o=s("89f3"),i=s.n(o);i.a},b4ca:function(e,t,s){},b8b6:function(e,t,s){},b943:function(e,t,s){},c570:function(e,t,s){},c6ff:function(e,t,s){"use strict";var o=s("d201"),i=s.n(o);i.a},c7f5:function(e,t,s){"use strict";var o=s("6929"),i=s.n(o);i.a},c922:function(e,t,s){"use strict";var o=s("b455"),i=s.n(o);i.a},cd49:function(e,t,s){"use strict";s.r(t);var o=s("9869"),i=(s("9f9b"),s("53fe"),s("1097"),s("8767")),n=s("151b"),a=s.n(n),r=(s("5572"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{attrs:{id:"header"}},[s("router-view",{attrs:{name:"header"}})],1),s("div",{attrs:{id:"sidebar"}},[s("router-view",{attrs:{name:"sidebar"}})],1),s("div",{attrs:{id:"content"}},[s("router-view")],1)])}),l=[],d={name:"App"},c=d,u=(s("5c0b"),s("2be6")),p=Object(u["a"])(c,r,l,!1,null,null,null),h=p.exports,m=s("5f2b"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"main-header"},[s("input",{ref:"importFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.handleFileImport()}}}),s("div",{staticClass:"top-menu"},[s("div",{staticClass:"center-item"},[e.isExecutionPage?s("span",[e._v("\n\t\t\t\t\tExecution Id:\n\t\t\t\t\t"),e.isExecutionPage?s("span",{staticClass:"execution-name"},[s("strong",[e._v(e._s(e.executionId))]),e._v("\n\t\t\t\t\t\t"),e.executionFinished?s("font-awesome-icon",{staticClass:"execution-icon success",attrs:{icon:"check",title:"Execution was successful"}}):s("font-awesome-icon",{staticClass:"execution-icon error",attrs:{icon:"times",title:"Execution did fail"}})],1):e._e(),e._v("\n\t\t\t\t\t\tof Workflow\n\t\t\t\t\t"),s("span",{staticClass:"workflow-name clickable",attrs:{title:"Open Workflow"}},[s("span",{on:{click:function(t){return e.openWorkflow(e.workflowExecution.workflowId)}}},[e._v('"'+e._s(e.workflowName)+'"')])])]):e._e(),e.isReadOnly?e._e():s("span",{staticClass:"current-workflow",attrs:{index:"workflow-name"}},[e.currentWorkflow?s("span",[e._v("Workflow: "),s("span",{staticClass:"workflow-name"},[e._v(e._s(e.workflowName))])]):s("span",{staticClass:"workflow-not-saved"},[e._v("Workflow not saved!")])]),e.isWorkflowSaving?s("span",{staticClass:"saving-workflow"},[s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),e._v("\n\t\t\t\t\tSaving...\n\t\t\t\t")],1):e._e()]),e.isPushConnectionActive?e.isReadOnly?e._e():s("div",{staticClass:"workflow-active"},[e._v("\n\t\t\t\tActive:\n\t\t\t\t"),s("workflow-activator",{attrs:{"workflow-active":e.isWorkflowActive,"workflow-id":e.currentWorkflow,disabled:!e.currentWorkflow}})],1):s("div",{staticClass:"push-connection-lost"},[s("el-tooltip",{attrs:{placement:"bottom-end",effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\t\t\tServer connection could not be established."),s("br"),e._v("\n\t\t\t\t\t\tThe server is down or there is a connection problem."),s("br"),e._v("\n\t\t\t\t\t\tIt will reconnect automatically as soon as the backend can be reached.\n\t\t\t\t\t")]),s("span",[s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("\n\t\t\t\t\t\tConnection lost\n\t\t\t\t\t")],1)])],1),e.isReadOnly?s("div",{staticClass:"read-only"},[s("el-tooltip",{attrs:{placement:"bottom-end",effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n\t\t\t\t\t\tA past execution gets displayed. For that reason no data"),s("br"),e._v("\n\t\t\t\t\t\tcan be changed. To make changes or to execute it again open"),s("br"),e._v("\n\t\t\t\t\t\tthe workflow by clicking on it`s name on the left.\n\t\t\t\t\t")]),s("span",[s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("\n\t\t\t\t\t\tRead only\n\t\t\t\t\t")],1)])],1):e._e()])])])},w=[],g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workflow-activator"},[s("el-switch",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-spinner":"el-icon-loading",value:e.workflowActive,title:e.workflowActive?"Deactivate Workflow":"Activate Workflow",disabled:e.disabled||e.loading,"active-color":e.getActiveColor,"inactive-color":"#8899AA"},on:{change:e.activeChanged}}),e.couldNotBeStarted?s("div",{staticClass:"could-not-be-started"},[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},on:{click:e.displayActivationError},slot:"content"},[e._v("The workflow is set to be active but could not be started."),s("br"),e._v("Click to display error message.")]),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"},on:{click:e.displayActivationError}})],1)],1):e._e()],1)},v=[],y=s("4971"),k=s("7b04"),b=s("77f0"),x=s("d2e2"),C=s("aaf5"),N=Object(C["a"])(y["a"],k["a"],b["a"],x["a"]).extend({name:"WorkflowActivator",props:["disabled","workflowActive","workflowId"],data(){return{loading:!1}},computed:{nodesIssuesExist(){return this.$store.getters.nodesIssuesExist},isWorkflowActive(){const e=this.$store.getters.getActiveWorkflows;return e.includes(this.workflowId)},couldNotBeStarted(){return!0===this.workflowActive&&this.isWorkflowActive!==this.workflowActive},getActiveColor(){return!0===this.couldNotBeStarted?"#ff4949":"#13ce66"}},methods:{async activeChanged(e){if(void 0===this.workflowId)return void this.$showMessage({title:"Problem activating workflow",message:"The workflow did not get saved yet so can not be set active!",type:"error"});if(!0===this.nodesIssuesExist)return void this.$showMessage({title:"Problem activating workflow",message:"It is only possible to activate a workflow when all issues on all nodes got resolved!",type:"error"});let t={};const s=this.$store.getters.workflowId;if(!0===e&&this.workflowId===s){const e=await this.confirmMessage("When you activate the workflow all currently unsaved changes of the workflow will be saved.","Activate and save?","warning","Yes, activate and save!");if(!1===e)return;t=await this.getWorkflowDataToSave()}t.active=e,this.loading=!0;try{await this.restApi().updateWorkflow(this.workflowId,t)}catch(i){const t=!0===e?"activated":"deactivated";return this.$showError(i,"Problem",`There was a problem and the workflow could not be ${t}:`),void(this.loading=!1)}const o=this.$store.getters.workflowId;o===this.workflowId&&this.$store.commit("setActive",e),!0===e?this.$store.commit("setWorkflowActive",this.workflowId):this.$store.commit("setWorkflowInactive",this.workflowId),this.$emit("workflowActiveChanged",{id:this.workflowId,active:e}),this.loading=!1},async displayActivationError(){let e;try{const t=await this.restApi().getActivationError(this.workflowId);e=void 0===t?"Sorry there was a problem. No error got found to display.":`The following error occurred on workflow activation:<br /><i>${t.error.message}</i>`}catch(t){e="Sorry there was a problem requesting the error"}this.$showMessage({title:"Problem activating workflow",message:e,type:"warning",duration:0})}}}),D=N,E=(s("c7f5"),Object(u["a"])(D,g,v,!1,null,"49ebd5aa",null)),$=E.exports,O=s("6fae");const T=Object(C["a"])(O["a"],b["a"]).extend({data(){return{eventSource:null,reconnectTimeout:null,retryTimeout:null,pushMessageQueue:[]}},computed:{sessionId(){return this.$store.getters.sessionId}},methods:{pushAutomaticReconnect(){null===this.reconnectTimeout&&(this.reconnectTimeout=setTimeout(()=>{this.pushConnect()},3e3))},pushConnect(){this.pushDisconnect();const e=`${this.$store.getters.getRestUrl}/push?sessionId=${this.sessionId}`;this.eventSource=new EventSource(e),this.eventSource.addEventListener("message",this.pushMessageReceived,!1),this.eventSource.addEventListener("open",()=>{this.$store.commit("setPushConnectionActive",!0),null!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},!1),this.eventSource.addEventListener("error",()=>{this.pushDisconnect(),null!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.$store.commit("setPushConnectionActive",!1),this.pushAutomaticReconnect()},!1)},pushDisconnect(){null!==this.eventSource&&(this.eventSource.close(),this.eventSource=null,this.$store.commit("setPushConnectionActive",!1))},queuePushMessage(e,t){this.pushMessageQueue.push({event:e,retriesLeft:t}),null===this.retryTimeout&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,20))},processWaitingPushMessages(){null!==this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=null);const e=this.pushMessageQueue.length;for(let t=0;t<e;t++){const e=this.pushMessageQueue.shift();if(!1===this.pushMessageReceived(e.event,!0)){e.retriesLeft-=1,e.retriesLeft>0&&this.pushMessageQueue.unshift(e);break}}0!==this.pushMessageQueue.length&&null===this.retryTimeout&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,25))},pushMessageReceived(e,t){const s=5;let o;try{o=JSON.parse(e.data)}catch(i){return!1}if(!["testWebhookReceived"].includes(o.type)&&!0!==t&&this.pushMessageQueue.length)return this.queuePushMessage(e,s),!1;if(["nodeExecuteAfter","nodeExecuteBefore"].includes(o.type)){if(!1===this.$store.getters.isActionActive("workflowRunning"))return!1;const i=o.data;if(this.$store.getters.activeExecutionId!==i.executionId)return!0!==t&&this.queuePushMessage(e,s),!1}if("executionFinished"===o.type){const i=o.data;if(this.$store.commit("finishActiveExecution",i),!1===this.$store.getters.isActionActive("workflowRunning"))return!1;if(this.$store.getters.activeExecutionId!==i.executionIdActive)return!0!==t&&this.queuePushMessage(e,s),!1;const n=i.data;if(!0!==n.finished){let e="There was a problem executing the workflow!";n.data.resultData.error&&n.data.resultData.error.message&&(e=`There was a problem executing the workflow:<br /><strong>"${n.data.resultData.error.message}"</strong>`),this.$showMessage({title:"Problem executing workflow",message:e,type:"error"})}else this.$showMessage({title:"Workflow got executed",message:"Workflow did get executed successfully!",type:"success"});n.data.resultData.runData=this.$store.getters.getWorkflowRunData,this.$store.commit("setExecutingNode",null),this.$store.commit("setWorkflowExecutionData",n),this.$store.commit("removeActiveAction","workflowRunning"),this.updateNodesExecutionIssues()}else if("executionStarted"===o.type){const e=o.data,t={idActive:e.executionId,finished:!1,mode:e.mode,startedAt:e.startedAt,retryOf:e.retryOf,workflowId:e.workflowId,workflowName:e.workflowName};this.$store.commit("addActiveExecution",t)}else if("nodeExecuteAfter"===o.type){const e=o.data;this.$store.commit("addNodeExecutionData",e)}else if("nodeExecuteBefore"===o.type){const e=o.data;this.$store.commit("setExecutingNode",e.nodeName)}else if("testWebhookDeleted"===o.type){const e=o.data;e.workflowId===this.$store.getters.workflowId&&(this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("removeActiveAction","workflowRunning"))}else if("testWebhookReceived"===o.type){const e=o.data;e.workflowId===this.$store.getters.workflowId&&(this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("setActiveExecutionId",e.executionId)),this.processWaitingPushMessages()}return!0}}});var A=Object(C["a"])(y["a"],T,k["a"],b["a"],x["a"]).extend({name:"MainHeader",components:{WorkflowActivator:$},computed:{executionId(){return this.$route.params.id},executionFinished(){if(!this.isExecutionPage)return!1;const e=this.$store.getters.getWorkflowExecution;return null!==e&&!0===e.finished},isExecutionPage(){return!!["ExecutionById"].includes(this.$route.name)},isPushConnectionActive(){return this.$store.getters.pushConnectionActive},isWorkflowActive(){return this.$store.getters.isActive},isWorkflowSaving(){return this.$store.getters.isActionActive("workflowSaving")},currentWorkflow(){return this.$route.params.name},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowName(){return this.$store.getters.workflowName},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},methods:{async openWorkflow(e){this.$router.push({name:"NodeViewExisting",params:{name:e}})}},async mounted(){this.pushConnect()},beforeDestroy(){this.pushDisconnect()}}),_=A,S=(s("d63c"),s("eec6"),Object(u["a"])(_,f,w,!1,null,"d2352a90",null)),P=S.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"side-menu"}},[s("about",{attrs:{dialogVisible:e.aboutDialogVisible},on:{closeDialog:e.closeAboutDialog}}),s("executions-list",{attrs:{dialogVisible:e.executionsListDialogVisible},on:{closeDialog:e.closeExecutionsListOpenDialog}}),s("credentials-list",{attrs:{dialogVisible:e.credentialOpenDialogVisible},on:{closeDialog:e.closeCredentialOpenDialog}}),s("credentials-edit",{attrs:{dialogVisible:e.credentialNewDialogVisible},on:{closeDialog:e.closeCredentialNewDialog}}),s("workflow-open",{attrs:{dialogVisible:e.workflowOpenDialogVisible},on:{openWorkflow:e.openWorkflow,closeDialog:e.closeWorkflowOpenDialog}}),s("workflow-settings",{attrs:{dialogVisible:e.workflowSettingsDialogVisible},on:{closeDialog:e.closeWorkflowSettingsDialog}}),s("input",{ref:"importFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.handleFileImport()}}}),s("div",{staticClass:"side-menu-wrapper",class:{expanded:!e.isCollapsed}},[s("div",{staticClass:"clickable",attrs:{id:"collapse-change-button"},on:{click:function(t){e.isCollapsed=!e.isCollapsed}}},[s("font-awesome-icon",{staticClass:"icon",attrs:{icon:"angle-right"}})],1),s("el-menu",{attrs:{"default-active":"workflow",collapse:e.isCollapsed},on:{select:e.handleSelect}},[s("el-menu-item",{staticClass:"logo-item",attrs:{index:"logo"}},[s("a",{staticClass:"logo",attrs:{href:"https://n8n.io",target:"_blank"}},[s("img",{staticClass:"icon",attrs:{src:"/n8n-icon-small.png",alt:"n8n.io"}}),s("span",{staticClass:"logo-text",attrs:{slot:"title"},slot:"title"},[e._v("n8n.io")])])]),s("el-submenu",{attrs:{index:"workflow",title:"Workflow"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"network-wired"}}),e._v("\n\t\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Workflows")])],1),s("el-menu-item",{attrs:{index:"workflow-new"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"file"}}),e._v("\n\t\t\t\t\t\t"),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("New")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-open"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"folder-open"}}),e._v("\n\t\t\t\t\t\t"),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Open")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-save",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"save"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Save")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-save-as"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"copy"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Save As")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-rename",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"edit"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Rename")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-delete",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"trash"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Delete")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-download"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"file-download"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Download")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-import-url"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"cloud"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Import from URL")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-import-file"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"hdd"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Import from File")])],1)],2),s("el-menu-item",{attrs:{index:"workflow-settings",disabled:!e.currentWorkflow}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"cog"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Settings")])],1)],2)],2),s("el-submenu",{attrs:{index:"credentials",title:"Credentials"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"key"}}),e._v("\n\t\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Credentials")])],1),s("el-menu-item",{attrs:{index:"credentials-new"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"file"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("New")])],1)],2),s("el-menu-item",{attrs:{index:"credentials-open"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"folder-open"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Open")])],1)],2)],2),s("el-menu-item",{attrs:{index:"executions"}},[s("font-awesome-icon",{attrs:{icon:"tasks"}}),e._v("\n\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Executions")])],1),s("el-submenu",{staticClass:"help-menu",attrs:{index:"help",title:"Help"}},[s("template",{slot:"title"},[s("font-awesome-icon",{attrs:{icon:"question"}}),e._v("\n\t\t\t\t\t"),s("span",{staticClass:"item-title-root",attrs:{slot:"title"},slot:"title"},[e._v("Help")])],1),s("el-menu-item",{attrs:{index:"help-documentation"}},[s("template",{slot:"title"},[s("a",{attrs:{href:"https://docs.n8n.io",target:"_blank"}},[s("font-awesome-icon",{attrs:{icon:"book"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Documentation")])],1)])],2),s("el-menu-item",{attrs:{index:"help-forum"}},[s("template",{slot:"title"},[s("a",{attrs:{href:"https://community.n8n.io",target:"_blank"}},[s("font-awesome-icon",{attrs:{icon:"users"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Forum")])],1)])],2),s("el-menu-item",{attrs:{index:"help-examples"}},[s("template",{slot:"title"},[s("a",{attrs:{href:"https://n8n.io/workflows",target:"_blank"}},[s("font-awesome-icon",{attrs:{icon:"network-wired"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("Workflows")])],1)])],2),s("el-menu-item",{attrs:{index:"help-about"}},[s("template",{slot:"title"},[s("font-awesome-icon",{staticClass:"about-icon",attrs:{icon:"info"}}),s("span",{staticClass:"item-title",attrs:{slot:"title"},slot:"title"},[e._v("About n8n")])],1)],2)],2)],1)],1)],1)},V=[],W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{staticClass:"n8n-about",attrs:{visible:e.dialogVisible,"append-to-body":"",width:"50%",title:"About n8n","before-close":e.closeDialog}},[s("div",[s("el-row",[s("el-col",{staticClass:"info-name",attrs:{span:8}},[e._v("\n\t\t\t\t\tn8n Version:\n\t\t\t\t")]),s("el-col",{attrs:{span:16}},[e._v("\n\t\t\t\t\t"+e._s(e.versionCli)+"\n\t\t\t\t")])],1),s("el-row",[s("el-col",{staticClass:"info-name",attrs:{span:8}},[e._v("\n\t\t\t\t\tSource Code:\n\t\t\t\t")]),s("el-col",{attrs:{span:16}},[s("a",{attrs:{href:"https://github.com/n8n-io/n8n",target:"_blank"}},[e._v("https://github.com/n8n-io/n8n")])])],1),s("el-row",[s("el-col",{staticClass:"info-name",attrs:{span:8}},[e._v("\n\t\t\t\t\tLicense:\n\t\t\t\t")]),s("el-col",{attrs:{span:16}},[s("a",{attrs:{href:"https://github.com/n8n-io/n8n/blob/master/packages/cli/LICENSE.md",target:"_blank"}},[e._v("Apache 2.0 with Commons Clause")])])],1),s("div",{staticClass:"action-buttons"},[s("el-button",{attrs:{type:"success"},on:{click:e.closeDialog}},[e._v("\n\t\t\t\t\tClose\n\t\t\t\t")])],1)],1)])],1)},R=[],L=Object(C["a"])(y["a"],b["a"]).extend({name:"About",props:["dialogVisible"],computed:{versionCli(){return this.$store.getters.versionCli}},methods:{closeDialog(){return this.$emit("closeDialog"),!1}}}),M=L,j=(s("9d30"),Object(u["a"])(M,W,R,!1,null,"8c0e0dc0",null)),F=j.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",{on:{keydown:function(e){e.stopPropagation()}}},[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"55%",title:e.title,"before-close":e.closeDialog}},[s("div",{staticClass:"credential-type-item"},[e.setCredentialType?e._e():s("el-row",[s("el-col",{attrs:{span:6}},[e._v("\n\t\t\t\t\tCredential type:\n\t\t\t\t")]),s("el-col",{attrs:{span:18}},[s("el-select",{attrs:{filterable:"",placeholder:"Select Type",size:"small"},model:{value:e.credentialType,callback:function(t){e.credentialType=t},expression:"credentialType"}},e._l(e.credentialTypes,(function(e){return s("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})})),1)],1)],1)],1),e.credentialType?s("credentials-input",{attrs:{credentialTypeData:e.getCredentialTypeData(e.credentialType),credentialData:e.credentialData,nodesInit:e.nodesInit},on:{credentialsCreated:e.credentialsCreated,credentialsUpdated:e.credentialsUpdated}}):e._e()],1)],1):e._e()},U=[],z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"credentials-input-wrapper",on:{keydown:function(e){e.stopPropagation()}}},[s("el-row",[s("el-col",{staticClass:"headline-regular",attrs:{span:6}},[e._v("\n\t\t\tCredentials Name:\n\t\t\t"),s("el-tooltip",{staticClass:"credentials-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.credentialsName)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"small",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),s("br"),e.credentialProperties.length?s("div",{staticClass:"headline"},[e._v("\n\t\tCredential Data:\n\t\t"),s("el-tooltip",{staticClass:"credentials-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.credentialsData)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1):e._e(),e._l(e.credentialProperties,(function(t){return s("div",{key:t.name},[s("el-row",{staticClass:"parameter-wrapper"},[s("el-col",{staticClass:"parameter-name",attrs:{span:6}},[e._v("\n\t\t\t\t"+e._s(t.displayName)+":\n\t\t\t\t"),t.description?s("el-tooltip",{staticClass:"parameter-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.description)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1):e._e()],1),s("el-col",{attrs:{span:18}},[s("parameter-input",{attrs:{parameter:t,value:e.propertyValue[t.name],path:t.name,isCredential:!0},on:{valueChanged:e.valueChanged}})],1)],1)],1)})),e.isOAuthType?s("el-row",{staticClass:"oauth-information"},[s("el-col",{staticClass:"headline",attrs:{span:6}},[e._v("\n\t\t\tOAuth\n\t\t")]),s("el-col",{attrs:{span:18}},[!1===e.requiredPropertiesFilled?s("span",[s("el-button",{attrs:{title:"Connect OAuth Credentials",circle:"",disabled:!0}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1),e._v("\n\t\t\t\tNot all required credential properties are filled\n\t\t\t")],1):!0===e.isOAuthConnected?s("span",[s("el-button",{attrs:{title:"Reconnect OAuth Credentials",circle:""},on:{click:function(t){return t.stopPropagation(),e.oAuthCredentialAuthorize()}}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1),e._v("\n\t\t\t\tIs connected\n\t\t\t")],1):s("span",[s("el-button",{attrs:{title:"Connect OAuth Credentials",circle:""},on:{click:function(t){return t.stopPropagation(),e.oAuthCredentialAuthorize()}}},[s("font-awesome-icon",{attrs:{icon:"sign-in-alt"}})],1),e._v("\n\t\t\t\tIs NOT connected\n\t\t\t")],1),e.credentialProperties.length?s("div",[s("div",{staticClass:"clickable oauth-callback-headline",class:{expanded:!e.isMinimized},attrs:{title:e.isMinimized?"Click to display Webhook URLs":"Click to hide Webhook URLs"},on:{click:function(t){e.isMinimized=!e.isMinimized}}},[s("font-awesome-icon",{staticClass:"minimize-button minimize-icon",attrs:{icon:"angle-up"}}),e._v("\n\t\t\t\t\tOAuth Callback URL\n\t\t\t\t")],1),e.isMinimized?e._e():s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"Click to copy Callback URL",placement:"right"}},[s("div",{staticClass:"callback-url left-ellipsis clickable",on:{click:e.copyCallbackUrl}},[e._v("\n\t\t\t\t\t\t"+e._s(e.oAuthCallbackUrl)+"\n\t\t\t\t\t")])])],1):e._e()])],1):e._e(),s("el-row",{staticClass:"nodes-access-wrapper"},[s("el-col",{staticClass:"headline",attrs:{span:6}},[e._v("\n\t\t\tNodes with access:\n\t\t\t"),s("el-tooltip",{staticClass:"credentials-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.nodesWithAccess)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{attrs:{span:18}},[s("el-transfer",{attrs:{titles:["No Access","Access "],data:e.allNodesRequestingAccess},model:{value:e.nodesAccess,callback:function(t){e.nodesAccess=t},expression:"nodesAccess"}}),0===e.nodesAccess.length?s("div",{staticClass:"no-nodes-access"},[s("strong",[e._v("\n\t\t\t\t\tImportant!\n\t\t\t\t")]),s("br"),e._v("\n\t\t\t\tAdd at least one node which has access to the credentials!\n\t\t\t")]):e._e()],1)],1),s("div",{staticClass:"action-buttons"},[e.credentialDataDynamic?s("el-button",{attrs:{type:"success"},on:{click:function(t){return e.updateCredentials(!0)}}},[e._v("\n\t\t\tSave\n\t\t")]):s("el-button",{attrs:{type:"success"},on:{click:function(t){return e.createCredentials(!0)}}},[e._v("\n\t\t\tCreate\n\t\t")])],1)],2)},q=[],J=s("9ec3");const H=o["default"].extend({data(){return{copyPasteElementsGotCreated:!1}},mounted(){if(!0===this.copyPasteElementsGotCreated)return;this.copyPasteElementsGotCreated=!0;const e=document.createElement("style");e.type="text/css",e.innerHTML="\n\t\t\t.hidden-copy-paste {\n\t\t\tposition: absolute;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 10px;\n\t\t\theight: 10px;\n\t\t\tdisplay: block;\n\t\t\tfont-size: 1px;\n\t\t\tz-index: -1;\n\t\t\tcolor: transparent;\n\t\t\tbackground: transparent;\n\t\t\toverflow: hidden;\n\t\t\tborder: none;\n\t\t\tpadding: 0;\n\t\t\tresize: none;\n\t\t\toutline: none;\n\t\t\t-webkit-user-select: text;\n\t\t\tuser-select: text;\n\t\t}\n\t\t",document.getElementsByTagName("head")[0].appendChild(e);const t=-1!==navigator.appVersion.search("Safari")&&-1===navigator.appVersion.search("Chrome")&&-1===navigator.appVersion.search("CrMo")&&-1===navigator.appVersion.search("CriOS"),s=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||-1!==navigator.userAgent.toLowerCase().indexOf("trident"),o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","hidden-input-copy-paste"),o.setAttribute("class","hidden-copy-paste"),document.body.append(o);let i=null;s&&(i=document.createElement("div"),i.setAttribute("id","hidden-ie-clipboard-copy-paste"),i.setAttribute("class","hidden-copy-paste"),i.setAttribute("contenteditable","true"),document.body.append(i),document.addEventListener("beforepaste",()=>{o.is(":focus")&&this.focusIeClipboardDiv(i)},!0));let n="";const a=e=>{};o.addEventListener("input",e=>{const s=o.value;n+=s,a(n),t?(o.focus(),setTimeout(()=>{this.focusHiddenArea(o)},0)):this.focusHiddenArea(o)}),["paste"].forEach(e=>{document.addEventListener(e,Object(J["debounce"])(t=>{const s=t.path||t.composedPath&&t.composedPath();for(let e=0;e<s.length;e++)if(s[e].className&&"string"===typeof s[e].className&&(s[e].className.includes("el-message-box")||s[e].className.includes("ignore-key-press")))return;null!==i?this.ieClipboardEvent(e,i):(this.standardClipboardEvent(e,t),(!document.activeElement||document.activeElement&&-1===["textarea","text","email","password"].indexOf(document.activeElement.type))&&(this.focusHiddenArea(o),t.preventDefault()))},1e3,{leading:!0}))})},methods:{receivedCopyPasteData(e,t){},standardClipboardEvent(e,t){const s=t.clipboardData;if(null!==s&&"paste"===e){const e=s.getData("text/plain");this.receivedCopyPasteData(e,t)}},ieClipboardEvent(e,t){const s=window.clipboardData;if("paste"===e){const e=s.getData("Text");t.empty(),this.receivedCopyPasteData(e)}},focusIeClipboardDiv(e){e.focus();const t=document.createRange();t.selectNodeContents(e.get(0));const s=window.getSelection();null!==s&&(s.removeAllRanges(),s.addRange(t))},focusHiddenArea(e){e.value=" ",e.focus(),e.select()},copyToClipboard(e){const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const s=document.getSelection();if(null===s)return;const o=s.rangeCount>0&&s.getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),o&&(s.removeAllRanges(),s.addRange(o))}}});var K=s("e105"),Y=s("89e8"),G=Object(C["a"])(H,O["a"],k["a"],b["a"]).extend({name:"CredentialsInput",props:["credentialTypeData","credentialData","nodesInit"],components:{ParameterInput:Y["a"]},data(){return{isMinimized:!0,helpTexts:{credentialsData:"The credentials to set.",credentialsName:"The name the credentials should be saved as. Use a name<br />which makes it clear to what exactly they give access to.<br />For credentials of an Email account that could be the Email address itself.",nodesWithAccess:"The nodes which allowed to use this credentials."},credentialDataTemp:null,nodesAccess:[],name:"",propertyValue:{}}},computed:{allNodesRequestingAccess(){const e=[],t=this.$store.getters.allNodeTypes;let s,o;for(s of t)if(s.credentials)for(o of s.credentials)if(o.name===this.credentialTypeData.name&&!e.includes(o.name)){e.push(s.name);break}return e.map(e=>({key:e,label:this.$store.getters.nodeType(e).displayName}))},credentialProperties(){return this.credentialTypeData.properties.filter(e=>!!this.displayCredentialParameter(e)&&(!this.credentialTypeData.__overwrittenProperties||!this.credentialTypeData.__overwrittenProperties.includes(e.name)))},credentialDataDynamic(){return this.credentialData?this.credentialData:this.credentialDataTemp},isOAuthType(){if(["oAuth1Api","oAuth2Api"].includes(this.credentialTypeData.name))return!0;const e=this.parentTypes(this.credentialTypeData.name);return e.includes("oAuth1Api")||e.includes("oAuth2Api")},isOAuthConnected(){return!1!==this.isOAuthType&&(null!==this.credentialDataDynamic&&!!this.credentialDataDynamic.data.oauthTokenData)},oAuthCallbackUrl(){const e=this.parentTypes(this.credentialTypeData.name),t="oAuth2Api"===this.credentialTypeData.name||e.includes("oAuth2Api")?"oauth2":"oauth1";return this.$store.getters.getWebhookBaseUrl+`rest/${t}-credential/callback`},requiredPropertiesFilled(){for(const e of this.credentialProperties)if(!0===e.required&&!this.propertyValue[e.name])return!1;return!0}},methods:{copyCallbackUrl(){this.copyToClipboard(this.oAuthCallbackUrl),this.$showMessage({title:"Copied",message:"The callback URL got copied!",type:"success"})},parentTypes(e){const t=this.$store.getters.credentialType(e);if(void 0===t||void 0===t.extends)return[];const s=[];for(const o of t.extends)s.push(o),s.push.apply(s,this.parentTypes(o));return s},valueChanged(e){const t=e.name.split(".").pop(),s=JSON.parse(JSON.stringify(this.propertyValue));s[t]=e.value,o["default"].set(this,"propertyValue",s)},displayCredentialParameter(e){return"hidden"!==e.type&&(void 0===e.displayOptions||this.displayParameter(this.propertyValue,e,""))},async createCredentials(e){const t=this.nodesAccess.map(e=>({nodeType:e})),s={name:this.name,type:this.credentialTypeData.name,nodesAccess:t,data:K["NodeHelpers"].getNodeParameters(this.credentialTypeData.properties,this.propertyValue,!1,!1)};let o;try{o=await this.restApi().createNewCredentials(s)}catch(i){return this.$showError(i,"Problem Creating Credentials","There was a problem creating the credentials:"),null}return this.$store.commit("addCredentials",o),this.$emit("credentialsCreated",{data:o,options:{closeDialog:e}}),o},async oAuthCredentialAuthorize(){let e,t=this.credentialDataDynamic,s=!1;if(t){if(t=await this.updateCredentials(!1),null===t)return}else{if(t=await this.createCredentials(!1),s=!0,null===t)return;o["default"].set(this,"credentialDataTemp",t)}const i=this.parentTypes(this.credentialTypeData.name);try{"oAuth2Api"===this.credentialTypeData.name||i.includes("oAuth2Api")?e=await this.restApi().oAuth2CredentialAuthorize(t):("oAuth1Api"===this.credentialTypeData.name||i.includes("oAuth1Api"))&&(e=await this.restApi().oAuth1CredentialAuthorize(t))}catch(l){return void this.$showError(l,"OAuth Authorization Error","Error generating authorization URL:")}const n="scrollbars=no,resizable=yes,status=no,titlebar=noe,location=no,toolbar=no,menubar=no,width=500,height=700",a=window.open(e,"OAuth2 Authorization",n),r=e=>{"success"===e.data&&(null===this.credentialData?(o["default"].set(this,"credentialDataTemp",t),o["default"].set(this.credentialDataTemp.data,"oauthTokenData",{})):o["default"].set(this.credentialData.data,"oauthTokenData",{}),this.$store.commit("updateCredentials",this.credentialDataDynamic),a&&a.close(),!0===s&&this.$emit("credentialsCreated",{data:t,options:{closeDialog:!1}}),this.$showMessage({title:"Connected",message:"Got connected!",type:"success"})),window.removeEventListener("message",r,!1)};window.addEventListener("message",r,!1)},async updateCredentials(e){const t=[],s=[];let o;for(o of this.credentialDataDynamic.nodesAccess)this.nodesAccess.includes(o.nodeType)&&(t.push(o),s.push(o.nodeType));for(const r of this.nodesAccess)s.includes(r)||t.push({nodeType:r});const i={name:this.name,type:this.credentialTypeData.name,nodesAccess:t,data:K["NodeHelpers"].getNodeParameters(this.credentialTypeData.properties,this.propertyValue,!1,!1)};let n;try{n=await this.restApi().updateCredentials(this.credentialDataDynamic.id,i)}catch(a){return this.$showError(a,"Problem Updating Credentials","There was a problem updating the credentials:"),null}return this.$store.commit("updateCredentials",n),this.updateNodesCredentialsIssues(),this.$emit("credentialsUpdated",{data:n,options:{closeDialog:e}}),n},init(){if(this.credentialData){this.name=this.credentialData.name,this.propertyValue=this.credentialData.data;const e=this.credentialData.nodesAccess.map(e=>e.nodeType);o["default"].set(this,"nodesAccess",e)}else{this.name="",this.propertyValue={};const e=[];e.push.apply(e,this.nodesInit),o["default"].set(this,"nodesAccess",e)}for(const e of this.credentialTypeData.properties)this.propertyValue.hasOwnProperty(e.name)||(this.propertyValue[e.name]=e.default)}},watch:{credentialData(){this.init()},credentialTypeData(){this.init()}},mounted(){this.init()}}),Z=G,X=(s("f427"),Object(u["a"])(Z,z,q,!1,null,null,null)),Q=X.exports,ee=Object(C["a"])(k["a"],b["a"]).extend({name:"CredentialsEdit",props:["dialogVisible","editCredentials","setCredentialType","nodesInit"],components:{CredentialsInput:Q},data(){return{credentialData:null,credentialType:null}},computed:{credentialTypes(){const e=this.$store.getters.allCredentialTypes;return null===e?[]:e},title(){if(this.editCredentials){const e=this.$store.getters.credentialType(this.editCredentials.type);return`Edit Credentials: "${e.displayName}"`}if(this.credentialType){const e=this.$store.getters.credentialType(this.credentialType);return`Create New Credentials: "${e.displayName}"`}return"Create New Credentials"}},watch:{async dialogVisible(e,t){if(e){if(this.editCredentials){const e=this.$store.getters.credentialType(this.editCredentials.type);if(null===e)return this.$showMessage({title:"Credential type not known",message:`Credentials of type "${this.editCredentials.type}" are not known.`,type:"error",duration:0}),void this.closeDialog();if(void 0===this.editCredentials.id)return this.$showMessage({title:"Credential ID missing",message:"The ID of the credentials which should be edited is missing!",type:"error"}),void this.closeDialog();let t;try{t=await this.restApi().getCredentials(this.editCredentials.id,!0)}catch(s){return this.$showError(s,"Problem loading credentials","There was a problem loading the credentials:"),void this.closeDialog()}if(void 0===t)return this.$showMessage({title:"Credentials not found",message:"Could not find the credentials with the id: "+this.editCredentials.id,type:"error",duration:0}),void this.closeDialog();if(void 0===t)return void this.$showMessage({title:"Problem loading credentials",message:"No credentials could be loaded!",type:"error"});this.credentialData=t}else{if(this.credentialType||this.setCredentialType){const e=this.$store.getters.credentialType(this.credentialType||this.setCredentialType);if(null===e)return this.$showMessage({title:"Credential type not known",message:`Credentials of type "${this.credentialType||this.setCredentialType}" are not known.`,type:"error",duration:0}),void this.closeDialog()}this.credentialData=null}(this.setCredentialType||this.credentialData&&this.credentialData.type)&&(this.credentialType=this.setCredentialType||this.credentialData&&this.credentialData.type)}else this.credentialType=null}},methods:{getCredentialProperties(e){const t=this.$store.getters.credentialType(e);if(null===t)throw new Error("Could not find credentials of type: "+e);if(void 0===t.extends)return t.properties;const s=[];for(const o of t.extends){const e=this.getCredentialProperties(o);K["NodeHelpers"].mergeNodeProperties(s,e)}return K["NodeHelpers"].mergeNodeProperties(s,t.properties),s},getCredentialTypeData(e){let t=this.$store.getters.credentialType(e);return null===t||void 0===t.extends||(t=JSON.parse(JSON.stringify(t)),t.properties=this.getCredentialProperties(t.name)),t},credentialsCreated(e){this.$emit("credentialsCreated",e),this.$showMessage({title:"Credentials created",message:`The credential "${e.data.name}" got created!`,type:"success"}),!0===e.options.closeDialog&&this.closeDialog()},credentialsUpdated(e){this.$emit("credentialsUpdated",e),this.$showMessage({title:"Credentials updated",message:`The credential "${e.data.name}" got updated!`,type:"success"}),!0===e.options.closeDialog&&this.closeDialog()},closeDialog(){this.$emit("closeDialog")}}}),te=ee,se=(s("52f2"),Object(u["a"])(te,B,U,!1,null,null,null)),oe=se.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.dialogVisible?s("div",[s("credentials-edit",{attrs:{dialogVisible:e.credentialEditDialogVisible,setCredentialType:e.editCredentials&&e.editCredentials.type,editCredentials:e.editCredentials},on:{closeDialog:e.closeCredentialEditDialog,credentialsUpdated:e.reloadCredentialList,credentialsCreated:e.reloadCredentialList}}),s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Credentials","before-close":e.closeDialog}},[s("div",{staticClass:"text-very-light"},[e._v("\n\t\t\tYour saved credentials:\n\t\t")]),s("el-button",{staticClass:"new-credentials-button",attrs:{title:"Create New Credentials"},on:{click:function(t){return e.createCredential()}}},[s("font-awesome-icon",{attrs:{icon:"plus"}}),s("div",{staticClass:"next-icon-text"},[e._v("\n\t\t\t\tAdd New\n\t\t\t")])],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],attrs:{data:e.credentials,"default-sort":{prop:"name",order:"ascending"},stripe:"","max-height":"450"},on:{"row-click":e.editCredential}},[s("el-table-column",{attrs:{property:"name",label:"Name","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{property:"type",label:"Type","class-name":"clickable",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e.credentialTypeDisplayNames[t.row.type])+"\n\t\t\t\t")]}}],null,!1,3674899926)}),s("el-table-column",{attrs:{property:"createdAt",label:"Created","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{property:"updatedAt",label:"Updated","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{label:"Operations",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{title:"Edit Credentials",icon:"el-icon-edit",circle:""},on:{click:function(s){return s.stopPropagation(),e.editCredential(t.row)}}}),s("el-button",{attrs:{title:"Delete Credentials",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(s){return s.stopPropagation(),e.deleteCredential(t.row)}}})]}}],null,!1,2350281508)})],1)],1)],1):e._e()},ne=[],ae=Object(C["a"])(y["a"],O["a"],k["a"],b["a"]).extend({name:"CredentialsList",props:["dialogVisible"],components:{CredentialsEdit:oe},data(){return{credentialEditDialogVisible:!1,credentialTypeDisplayNames:{},credentials:[],displayAddCredentials:!1,editCredentials:null,isDataLoading:!1}},watch:{dialogVisible(e){e&&(this.loadCredentials(),this.loadCredentialTypes())}},methods:{closeCredentialEditDialog(){this.credentialEditDialogVisible=!1},closeDialog(){return this.$emit("closeDialog"),!1},createCredential(){this.editCredentials=null,this.credentialEditDialogVisible=!0},editCredential(e){const t={id:e.id,name:e.name,type:e.type};this.editCredentials=t,this.credentialEditDialogVisible=!0},reloadCredentialList(){this.loadCredentials()},loadCredentialTypes(){if(0===Object.keys(this.credentialTypeDisplayNames).length&&null!==this.$store.getters.allCredentialTypes)for(const e of this.$store.getters.allCredentialTypes)this.credentialTypeDisplayNames[e.name]=e.displayName},loadCredentials(){this.isDataLoading=!0;try{this.credentials=JSON.parse(JSON.stringify(this.$store.getters.allCredentials))}catch(e){return this.$showError(e,"Proble loading credentials","There was a problem loading the credentials:"),void(this.isDataLoading=!1)}this.credentials.forEach(e=>{e.createdAt=this.convertToDisplayDate(e.createdAt),e.updatedAt=this.convertToDisplayDate(e.updatedAt)}),this.isDataLoading=!1},async deleteCredential(e){const t=await this.confirmMessage(`Are you sure that you want to delete the credentials "${e.name}"?`,"Delete Credentials?","warning","Yes, delete!");if(!1!==t){try{await this.restApi().deleteCredentials(e.id)}catch(s){return void this.$showError(s,"Problem deleting credentials","There was a problem deleting the credentials:")}this.$store.commit("removeCredentials",e),this.updateNodesCredentialsIssues(),this.$showMessage({title:"Credentials deleted",message:`The credential "${e.name}" got deleted!`,type:"success"}),this.loadCredentials()}}}}),re=ae,le=(s("19d7"),Object(u["a"])(re,ie,ne,!1,null,null,null)),de=le.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Workflow Executions ("+e.combinedExecutions.length+"/"+e.combinedExecutionsCount+")","before-close":e.closeDialog}},[s("div",{staticClass:"filters"},[s("el-row",[s("el-col",{staticClass:"filter-headline",attrs:{span:4}},[e._v("\n\t\t\t\t\tFilters:\n\t\t\t\t")]),s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{placeholder:"Select Workflow",size:"small",filterable:""},on:{change:e.handleFilterChanged},model:{value:e.filter.workflowId,callback:function(t){e.$set(e.filter,"workflowId",t)},expression:"filter.workflowId"}},e._l(e.workflows,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:2}},[e._v("\n\t\t\t\t")]),s("el-col",{attrs:{span:4}},[s("el-select",{attrs:{placeholder:"Select Status",size:"small",filterable:""},on:{change:e.handleFilterChanged},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:8}},[e._v("\n\t\t\t\t")])],1)],1),s("div",{staticClass:"selection-options"},[!0===e.checkAll||!0===e.isIndeterminate?s("span",[e._v("\n\t\t\t\tSelected: "+e._s(e.numSelected)+"/"+e._s(e.finishedExecutionsCount)+"\n\t\t\t\t"),s("el-button",{attrs:{type:"danger",title:"Delete Selected",icon:"el-icon-delete",size:"mini",circle:""},on:{click:e.handleDeleteSelected}})],1):e._e()]),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],attrs:{data:e.combinedExecutions,stripe:"","row-class-name":e.getRowClass}},[s("el-table-column",{attrs:{label:"",width:"30"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Check all")])]}},{key:"default",fn:function(t){return[void 0!==t.row.stoppedAt&&t.row.id?s("el-checkbox",{attrs:{value:e.selectedItems[t.row.id.toString()]||e.checkAll},on:{change:function(s){return e.handleCheckboxChanged(t.row.id)}}},[e._v("Check all")]):e._e()]}}])}),s("el-table-column",{attrs:{property:"startedAt",label:"Started At / ID",width:"205"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t"+e._s(e.convertToDisplayDate(t.row.startedAt))),s("br"),t.row.id?s("small",[e._v("ID: "+e._s(t.row.id))]):e._e(),t.row.idActive&&void 0===t.row.id&&void 0===t.row.stoppedAt?s("small",[e._v("Active-ID: "+e._s(t.row.idActive))]):e._e()]}}])}),s("el-table-column",{attrs:{property:"workflowName",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"workflow-name"},[e._v("\n\t\t\t\t\t\t"+e._s(t.row.workflowName||"[UNSAVED WORKFLOW]")+"\n\t\t\t\t\t")]),void 0===t.row.stoppedAt?s("span",[e._v("\n\t\t\t\t\t\t(running)\n\t\t\t\t\t")]):e._e(),void 0!==t.row.retryOf?s("span",[s("br"),s("small",[e._v('Retry of "'+e._s(t.row.retryOf)+'"')])]):void 0!==t.row.retrySuccessId?s("span",[s("br"),s("small",[e._v('Success retry "'+e._s(t.row.retrySuccessId)+'"')])]):e._e()]}}])}),s("el-table-column",{attrs:{label:"Status",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.statusTooltipText(t.row))},slot:"content"}),void 0===t.row.stoppedAt?s("span",{staticClass:"status-badge running"},[e._v("\n\t\t\t\t\t\t\tRunning\n\t\t\t\t\t\t")]):t.row.finished?s("span",{staticClass:"status-badge success"},[e._v("\n\t\t\t\t\t\t\tSuccess\n\t\t\t\t\t\t")]):s("span",{staticClass:"status-badge error"},[e._v("\n\t\t\t\t\t\t\tError\n\t\t\t\t\t\t")])]),s("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleRetryClick}},[s("span",{staticClass:"el-dropdown-link"},[void 0===t.row.stoppedAt||t.row.finished||void 0!==t.row.retryOf||void 0!==t.row.retrySuccessId?e._e():s("el-button",{staticClass:"retry-button",attrs:{circle:"",type:"text",size:"small",title:"Retry execution"}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1)],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{command:"currentlySaved",row:t.row}}},[e._v("Retry with currently saved workflow")]),s("el-dropdown-item",{attrs:{command:{command:"original",row:t.row}}},[e._v("Retry with original workflow")])],1)],1)]}}])}),s("el-table-column",{attrs:{property:"mode",label:"Mode",width:"100",align:"center"}}),s("el-table-column",{attrs:{label:"Running Time",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0===t.row.stoppedAt?s("span",[s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),s("execution-time",{attrs:{"start-time":t.row.startedAt}})],1):s("span",[e._v("\n\t\t\t\t\t\t"+e._s(e.displayTimer(new Date(t.row.stoppedAt).getTime()-new Date(t.row.startedAt).getTime(),!0))+"\n\t\t\t\t\t")])]}}])}),s("el-table-column",{attrs:{label:"",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0===t.row.stoppedAt&&t.row.idActive?s("span",[s("el-button",{attrs:{circle:"",title:"Stop Execution",loading:e.stoppingExecutions.includes(t.row.idActive),size:"mini"},on:{click:function(s){return s.stopPropagation(),e.stopExecution(t.row.idActive)}}},[s("font-awesome-icon",{attrs:{icon:"stop"}})],1)],1):t.row.id?s("span",[s("el-button",{attrs:{circle:"",title:"Open Past Execution",size:"mini"},on:{click:function(s){return s.stopPropagation(),e.displayExecution(t.row)}}},[s("font-awesome-icon",{attrs:{icon:"folder-open"}})],1)],1):e._e()]}}])})],1),e.finishedExecutionsCount>e.finishedExecutions.length?s("div",{staticClass:"load-more"},[s("el-button",{attrs:{title:"Load More",size:"small",disabled:e.isDataLoading},on:{click:function(t){return e.loadMore()}}},[s("font-awesome-icon",{attrs:{icon:"sync"}}),e._v(" Load More\n\t\t\t")],1)],1):e._e()],1)],1)},ue=[],pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e._v("\n\t"+e._s(e.time)+"\n")])},he=[],me=Object(C["a"])(y["a"]).extend({name:"ExecutionTime",props:["startTime"],computed:{time(){if(!this.startTime)return"...";const e=this.nowTime-new Date(this.startTime).getTime();return this.displayTimer(e)}},data(){return{nowTime:-1,intervalTimer:null}},mounted(){this.setNow(),this.intervalTimer=setInterval(()=>{this.setNow()},1e3)},destroyed(){null!==this.intervalTimer&&clearInterval(this.intervalTimer)},methods:{setNow(){this.nowTime=(new Date).getTime()}}}),fe=me,we=(s("26fe"),Object(u["a"])(fe,pe,he,!1,null,null,null)),ge=we.exports,ve=Object(C["a"])(y["a"],k["a"],b["a"]).extend({name:"ExecutionsList",props:["dialogVisible"],components:{ExecutionTime:ge,WorkflowActivator:$},data(){return{finishedExecutions:[],finishedExecutionsCount:0,checkAll:!1,filter:{status:"ALL",workflowId:"ALL"},isDataLoading:!1,requestItemsPerRequest:10,selectedItems:{},stoppingExecutions:[],workflows:[],statuses:[{id:"ALL",name:"Any Status"},{id:"error",name:"Error"},{id:"running",name:"Running"},{id:"success",name:"Success"}]}},computed:{activeExecutions(){return this.$store.getters.getActiveExecutions},combinedExecutions(){const e=[];return["ALL","running"].includes(this.filter.status)&&e.push.apply(e,this.activeExecutions),["ALL","error","success"].includes(this.filter.status)&&e.push.apply(e,this.finishedExecutions),e},combinedExecutionsCount(){return this.activeExecutions.length+this.finishedExecutionsCount},numSelected(){return!0===this.checkAll?this.finishedExecutionsCount:Object.keys(this.selectedItems).length},isIndeterminate(){return!0!==this.checkAll&&this.numSelected>0},workflowFilterCurrent(){const e={};return"ALL"!==this.filter.workflowId&&(e.workflowId=this.filter.workflowId),e},workflowFilterPast(){const e={};return"ALL"!==this.filter.workflowId&&(e.workflowId=this.filter.workflowId),["error","success"].includes(this.filter.status)&&(e.finished="success"===this.filter.status),e}},watch:{dialogVisible(e,t){e&&this.openDialog()}},methods:{closeDialog(){return this.$emit("closeDialog"),!1},displayExecution(e){this.$router.push({name:"ExecutionById",params:{id:e.id}}),this.closeDialog()},handleCheckAllChange(){!1===this.checkAll&&o["default"].set(this,"selectedItems",{})},handleCheckboxChanged(e){this.selectedItems[e]?o["default"].delete(this.selectedItems,e):o["default"].set(this.selectedItems,e,!0)},async handleDeleteSelected(){const e=await this.confirmMessage(`Are you sure that you want to delete the ${this.numSelected} selected executions?`,"Delete Executions?","warning","Yes, delete!");if(!1===e)return;this.isDataLoading=!0;const t={};!0===this.checkAll?t.deleteBefore=this.finishedExecutions[0].startedAt:t.ids=Object.keys(this.selectedItems),t.filters=this.workflowFilterPast;try{await this.restApi().deleteExecutions(t)}catch(s){return this.isDataLoading=!1,void this.$showError(s,"Problem deleting executions","There was a problem deleting the executions:")}this.isDataLoading=!1,this.$showMessage({title:"Execution deleted",message:"The executions got deleted!",type:"success"}),o["default"].set(this,"selectedItems",{}),this.checkAll=!1,this.refreshData()},handleFilterChanged(){this.refreshData()},handleRetryClick(e){let t=!1;"currentlySaved"===e.command&&(t=!0),this.retryExecution(e.row,t)},getRowClass(e){const t=[];return void 0===e.row.stoppedAt&&t.push("currently-running"),t.join(" ")},getWorkflowName(e){const t=this.workflows.find(t=>t.id===e);if(void 0!==t)return t.name},async loadActiveExecutions(){const e=await this.restApi().getCurrentExecutions(this.workflowFilterCurrent);for(const t of e)void 0!==t.workflowId&&void 0===t.workflowName&&(t.workflowName=this.getWorkflowName(t.workflowId));this.$store.commit("setActiveExecutions",e)},async loadFinishedExecutions(){if("running"===this.filter.status)return this.finishedExecutions=[],void(this.finishedExecutionsCount=0);const e=await this.restApi().getPastExecutions(this.workflowFilterPast,this.requestItemsPerRequest);this.finishedExecutions=e.results,this.finishedExecutionsCount=e.count},async loadMore(){if("running"===this.filter.status)return;this.isDataLoading=!0;const e=this.workflowFilterPast;let t,s;if(0!==this.finishedExecutions.length){const e=this.finishedExecutions.slice(-1)[0];t=e.id}try{s=await this.restApi().getPastExecutions(e,this.requestItemsPerRequest,t)}catch(o){return this.isDataLoading=!1,void this.$showError(o,"Problem loading workflows","There was a problem loading the workflows:")}this.finishedExecutions.push.apply(this.finishedExecutions,s.results),this.finishedExecutionsCount=s.count,this.isDataLoading=!1},async loadWorkflows(){try{const e=await this.restApi().getWorkflows();e.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),e.unshift({id:"ALL",name:"All Workflows"}),o["default"].set(this,"workflows",e)}catch(e){this.$showError(e,"Problem loading workflows","There was a problem loading the workflows:")}},async openDialog(){o["default"].set(this,"selectedItems",{}),this.filter.workflowId="ALL",this.checkAll=!1,await this.loadWorkflows(),await this.refreshData()},async retryExecution(e,t){this.isDataLoading=!0;try{const s=await this.restApi().retryExecution(e.id,t);!0===s?this.$showMessage({title:"Retry successful",message:"The retry was successful!",type:"success"}):this.$showMessage({title:"Retry unsuccessful",message:"The retry was not successful!",type:"error"}),this.isDataLoading=!1}catch(s){this.$showError(s,"Problem with retry","There was a problem with the retry:"),this.isDataLoading=!1}},async refreshData(){this.isDataLoading=!0;try{const e=this.loadActiveExecutions(),t=this.loadFinishedExecutions();await Promise.all([e,t])}catch(e){this.$showError(e,"Problem loading","There was a problem loading the data:")}this.isDataLoading=!1},statusTooltipText(e){return void 0===e.stoppedAt?"The worklow is currently executing.":!0===e.finished&&void 0!==e.retryOf?`The workflow execution was a retry of "${e.retryOf}" and it was successful.`:!0===e.finished?"The worklow execution was successful.":void 0!==e.retryOf?`The workflow execution was a retry of "${e.retryOf}" and failed.<br />New retries have to be started from the original execution.`:void 0!==e.retrySuccessId?`The workflow execution failed but the retry "${e.retrySuccessId}" was successful.`:"The workflow execution failed."},async stopExecution(e){try{this.stoppingExecutions.push(e);await this.restApi().stopCurrentExecution(e);const t=this.stoppingExecutions.indexOf(e);this.stoppingExecutions.splice(t,1),this.$showMessage({title:"Execution stopped",message:`The execution with the id "${e}" got stopped!`,type:"success"}),this.refreshData()}catch(t){this.$showError(t,"Problem stopping execution","There was a problem stopping the execuction:")}}}}),ye=ve,ke=(s("92fc"),s("53f5"),Object(u["a"])(ye,ce,ue,!1,null,"68ec3db4",null)),be=ke.exports,xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:"Open Workflow","before-close":e.closeDialog,top:"5vh"}},[s("div",{staticClass:"text-very-light"},[e._v("\n\t\t\tSelect a workflow to open:\n\t\t")]),s("div",{staticClass:"search-wrapper ignore-key-press"},[s("el-input",{ref:"inputFieldFilter",attrs:{placeholder:"Workflow filter..."},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],staticClass:"search-table",attrs:{data:e.filteredWorkflows,stripe:"","default-sort":{prop:"updatedAt",order:"descending"}},on:{"cell-click":e.openWorkflow}},[s("el-table-column",{attrs:{property:"name",label:"Name","class-name":"clickable",sortable:""}}),s("el-table-column",{attrs:{property:"createdAt",label:"Created","class-name":"clickable",width:"225",sortable:""}}),s("el-table-column",{attrs:{property:"updatedAt",label:"Updated","class-name":"clickable",width:"225",sortable:""}}),s("el-table-column",{attrs:{label:"Active",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("workflow-activator",{attrs:{"workflow-active":t.row.active,"workflow-id":t.row.id},on:{workflowActiveChanged:e.workflowActiveChanged}})]}}])})],1)],1)],1)},Ce=[],Ne=Object(C["a"])(y["a"],k["a"],b["a"]).extend({name:"WorkflowOpen",props:["dialogVisible"],components:{WorkflowActivator:$},data(){return{filterText:"",isDataLoading:!1,workflows:[]}},computed:{filteredWorkflows(){return this.workflows.filter(e=>""===this.filterText||-1!==e.name.toLowerCase().indexOf(this.filterText.toLowerCase()))}},watch:{dialogVisible(e,t){e&&(this.filterText="",this.openDialog(),o["default"].nextTick(()=>{this.$refs.inputFieldFilter.focus()}))}},methods:{closeDialog(){return this.$emit("closeDialog"),!1},openWorkflow(e,t){"Active"!==t.label&&this.$emit("openWorkflow",e.id)},openDialog(){this.isDataLoading=!0,this.restApi().getWorkflows().then(e=>{this.workflows=e,this.workflows.forEach(e=>{e.createdAt=this.convertToDisplayDate(e.createdAt),e.updatedAt=this.convertToDisplayDate(e.updatedAt)}),this.isDataLoading=!1}).catch(e=>{this.$showError(e,"Problem loading workflows","There was a problem loading the workflows:"),this.isDataLoading=!1})},workflowActiveChanged(e){for(const t of this.workflows)t.id===e.id&&(t.active=e.active)}}}),De=Ne,Ee=(s("a8e0"),Object(u["a"])(De,xe,Ce,!1,null,"7e5f85b0",null)),$e=Ee.exports,Oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("el-dialog",{staticClass:"workflow-settings",attrs:{visible:e.dialogVisible,"append-to-body":"",width:"50%",title:"Workflow Settings","before-close":e.closeDialog}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tError Workflow:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.errorWorkflow)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Workflow",size:"small",filterable:""},model:{value:e.workflowSettings.errorWorkflow,callback:function(t){e.$set(e.workflowSettings,"errorWorkflow",t)},expression:"workflowSettings.errorWorkflow"}},e._l(e.workflows,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tTimezone:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.timezone)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Timezone",size:"small",filterable:""},model:{value:e.workflowSettings.timezone,callback:function(t){e.$set(e.workflowSettings,"timezone",t)},expression:"workflowSettings.timezone"}},e._l(e.timezones,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Data Error Execution:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveDataErrorExecution)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveDataErrorExecution,callback:function(t){e.$set(e.workflowSettings,"saveDataErrorExecution",t)},expression:"workflowSettings.saveDataErrorExecution"}},e._l(e.saveDataErrorExecutionOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Data Success Execution:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveDataSuccessExecution)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveDataSuccessExecution,callback:function(t){e.$set(e.workflowSettings,"saveDataSuccessExecution",t)},expression:"workflowSettings.saveDataSuccessExecution"}},e._l(e.saveDataSuccessExecutionOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("el-row",[s("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v("\n\t\t\t\t\tSave Manual Executions:\n\t\t\t\t\t"),s("el-tooltip",{staticClass:"setting-info",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.saveManualExecutions)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),s("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[s("el-select",{attrs:{placeholder:"Select Option",size:"small",filterable:""},model:{value:e.workflowSettings.saveManualExecutions,callback:function(t){e.$set(e.workflowSettings,"saveManualExecutions",t)},expression:"workflowSettings.saveManualExecutions"}},e._l(e.saveManualOptions,(function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),s("div",{staticClass:"action-buttons"},[s("el-button",{attrs:{type:"success"},on:{click:e.saveSettings}},[e._v("\n\t\t\t\t\tSave\n\t\t\t\t")])],1)],1)])],1)},Te=[],Ae=Object(C["a"])(y["a"],k["a"],b["a"]).extend({name:"WorkflowSettings",props:["dialogVisible"],data(){return{isLoading:!0,helpTexts:{errorWorkflow:'The workflow to run in case the current one fails.<br />To function correctly that workflow has to contain an "Error Trigger" node!',timezone:'The timezone in which the workflow should run. Gets for example used by "Cron" node.',saveDataErrorExecution:"If data data of executions should be saved in case they failed.",saveDataSuccessExecution:"If data data of executions should be saved in case they succeed.",saveManualExecutions:"If data data of executions should be saved when started manually from the editor."},defaultValues:{timezone:"America/New_York",saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveManualExecutions:!1},saveDataErrorExecutionOptions:[],saveDataSuccessExecutionOptions:[],saveManualOptions:[],timezones:[],workflowSettings:{},workflows:[]}},watch:{dialogVisible(e,t){e&&this.openDialog()}},methods:{closeDialog(){return this.$emit("closeDialog"),!1},async loadSaveDataErrorExecutionOptions(){this.saveDataErrorExecutionOptions.length=0,this.saveDataErrorExecutionOptions.push.apply(this.saveDataErrorExecutionOptions,[{key:"DEFAULT",value:"Default - "+("all"===this.defaultValues.saveDataErrorExecution?"Save":"Do not save")},{key:"all",value:"Save"},{key:"none",value:"Do not save"}])},async loadSaveDataSuccessExecutionOptions(){this.saveDataSuccessExecutionOptions.length=0,this.saveDataSuccessExecutionOptions.push.apply(this.saveDataSuccessExecutionOptions,[{key:"DEFAULT",value:"Default - "+("all"===this.defaultValues.saveDataSuccessExecution?"Save":"Do not save")},{key:"all",value:"Save"},{key:"none",value:"Do not save"}])},async loadSaveManualOptions(){this.saveManualOptions.length=0,this.saveManualOptions.push({key:"DEFAULT",value:"Default - "+(!0===this.defaultValues.saveManualExecutions?"Yes":"No")}),this.saveManualOptions.push({key:!0,value:"Yes"}),this.saveManualOptions.push({key:!1,value:"No"})},async loadTimezones(){if(0!==this.timezones.length)return;const e=await this.restApi().getTimezones();let t=e[this.defaultValues.timezone];void 0===t&&(t="Default Timezone not valid!"),this.timezones.push({key:"DEFAULT",value:"Default - "+t});for(const s of Object.keys(e))this.timezones.push({key:s,value:e[s]})},async loadWorkflows(){const e=await this.restApi().getWorkflows();e.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),e.unshift({id:void 0,name:"- No Workflow -"}),o["default"].set(this,"workflows",e)},async openDialog(){this.$route.params.name;if(void 0===this.$route.params.name)return this.$showMessage({title:"No workflow active",message:"No workflow active to display settings of.",type:"error",duration:0}),void this.closeDialog();this.defaultValues.saveDataErrorExecution=this.$store.getters.saveDataErrorExecution,this.defaultValues.saveDataSuccessExecution=this.$store.getters.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.$store.getters.saveManualExecutions,this.defaultValues.timezone=this.$store.getters.timezone,this.isLoading=!0;const e=[];e.push(this.loadWorkflows()),e.push(this.loadSaveDataErrorExecutionOptions()),e.push(this.loadSaveDataSuccessExecutionOptions()),e.push(this.loadSaveManualOptions()),e.push(this.loadTimezones());try{await Promise.all(e)}catch(s){this.$showError(s,"Problem loading settings","The following error occurred loading the data:")}const t=JSON.parse(JSON.stringify(this.$store.getters.workflowSettings));void 0===t.timezone&&(t.timezone="DEFAULT"),void 0===t.saveDataErrorExecution&&(t.saveDataErrorExecution="DEFAULT"),void 0===t.saveDataSuccessExecution&&(t.saveDataSuccessExecution="DEFAULT"),void 0===t.saveManualExecutions&&(t.saveManualExecutions="DEFAULT"),o["default"].set(this,"workflowSettings",t),this.isLoading=!1},async saveSettings(){const e={settings:this.workflowSettings};this.isLoading=!0;try{await this.restApi().updateWorkflow(this.$route.params.name,e)}catch(s){return this.$showError(s,"Problem saving settings","There was a problem saving the settings:"),void(this.isLoading=!1)}const t={};for(const o of Object.keys(this.workflowSettings))"DEFAULT"!==this.workflowSettings[o]&&(t[o]=this.workflowSettings[o]);this.$store.commit("setWorkflowSettings",t),this.isLoading=!1,this.$showMessage({title:"Settings saved",message:"The workflow settings got saved!",type:"success"}),this.closeDialog()}}}),_e=Ae,Se=(s("6cf6"),Object(u["a"])(_e,Oe,Te,!1,null,"183cfcad",null)),Pe=Se.exports;const Ie=Object(C["a"])(O["a"],k["a"],b["a"],x["a"]).extend({methods:{async saveCurrentWorkflow(e=!1){const t=this.$route.params.name;let s="";if(void 0===t||!0===e){if(s=await this.$prompt("Enter workflow name","Name",{confirmButtonText:"Save",cancelButtonText:"Cancel"}).then(e=>e.value).catch(()=>{}),void 0===s)return;if(["",null].includes(s))return void this.$showMessage({title:"Name missing",message:"No name for the workflow got entered and could so not be saved!",type:"error"})}try{this.$store.commit("addActiveAction","workflowSaving");let o=await this.getWorkflowDataToSave();void 0===t||!0===e?(o.name=s.trim(),!0===e&&(o.active=!1),o=await this.restApi().createNewWorkflow(o),this.$store.commit("setActive",o.active||!1),this.$store.commit("setWorkflowId",o.id),this.$store.commit("setWorkflowName",o.name),this.$store.commit("setWorkflowSettings",o.settings||{})):await this.restApi().updateWorkflow(t,o),this.$route.params.name!==o.id&&this.$router.push({name:"NodeViewExisting",params:{name:o.id,action:"workflowSave"}}),this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:"Workflow saved",message:`The workflow "${o.name}" got saved!`,type:"success"})}catch(o){this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:"Problem saving workflow",message:`There was a problem saving the workflow: "${o.message}"`,type:"error"})}}}}),Ve=Object(C["a"])(k["a"],x["a"]).extend({methods:{async runWorkflowApi(e){if(!1===this.$store.getters.pushConnectionActive)throw new Error("No active connection to server. It is maybe down.");let t;this.$store.commit("addActiveAction","workflowRunning");try{t=await this.restApi().runWorkflow(e)}catch(s){throw this.$store.commit("removeActiveAction","workflowRunning"),s}return void 0!==t.executionId&&this.$store.commit("setActiveExecutionId",t.executionId),!0===t.waitingForWebhook&&this.$store.commit("setExecutionWaitingForWebhook",!0),t},async runWorkflow(e){if(!0===this.$store.getters.isActionActive("workflowRunning"))return;const t=this.getWorkflow();try{const s=this.$store.getters.nodesIssuesExist;if(!0===s){const e=this.checkReadyForExecution(t);if(null!==e){const t=[];let s;for(const o of Object.keys(e)){s=K["NodeHelpers"].nodeIssuesToString(e[o]);for(const e of s)t.push(`${o}: ${e}`)}return void this.$showMessage({title:"Workflow can not be executed",message:"The workflow has issues. Please fix them first:<br />&nbsp;&nbsp;- "+t.join("<br />&nbsp;&nbsp;- "),type:"error",duration:0})}}const o=t.getParentNodes(e,"main",1),i=this.$store.getters.getWorkflowRunData;let n;const a=[];if(null!==i&&0!==Object.keys(i).length){n={};for(const e of o){const s=t.getParentNodes(e,"main");s.push(e);for(const e of s){if(void 0===i[e]||0===i[e].length){a.push(e);break}n[e]=i[e].slice(0,1)}}0===Object.keys(n).length&&(n=void 0)}0===a.length&&a.push(e);const r=await this.getWorkflowDataToSave(),l={workflowData:r,runData:n,startNodes:a};e&&(l.destinationNode=e);const d={id:"__IN_PROGRESS__",finished:!1,mode:"manual",startedAt:new Date,stoppedAt:void 0,workflowId:t.id,data:{resultData:{runData:n||{},startNodes:a,workflowData:r}},workflowData:{id:this.$store.getters.workflowId,name:r.name,active:r.active,createdAt:0,updatedAt:0,...r}};return this.$store.commit("setWorkflowExecutionData",d),await this.runWorkflowApi(l)}catch(s){return void this.$showError(s,"Problem running workflow","There was a problem running the workflow:")}}}});var We=s("7ada"),Re=Object(C["a"])(y["a"],k["a"],b["a"],x["a"],Ve,Ie).extend({name:"MainHeader",components:{About:F,CredentialsEdit:oe,CredentialsList:de,ExecutionsList:be,WorkflowOpen:$e,WorkflowSettings:Pe},data(){return{aboutDialogVisible:!1,isCollapsed:!0,credentialNewDialogVisible:!1,credentialOpenDialogVisible:!1,executionsListDialogVisible:!1,stopExecutionInProgress:!1,workflowOpenDialogVisible:!1,workflowSettingsDialogVisible:!1}},computed:{exeuctionId(){return this.$route.params.id},executionFinished(){if(!this.isExecutionPage)return!1;const e=this.$store.getters.getWorkflowExecution;return null!==e&&!0===e.finished},executionWaitingForWebhook(){return this.$store.getters.executionWaitingForWebhook},isExecutionPage(){return!!["ExecutionById"].includes(this.$route.name)},isWorkflowActive(){return this.$store.getters.isActive},currentWorkflow(){return this.$route.params.name},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowName(){return this.$store.getters.workflowName},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},methods:{clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},closeAboutDialog(){this.aboutDialogVisible=!1},closeWorkflowOpenDialog(){this.workflowOpenDialogVisible=!1},closeWorkflowSettingsDialog(){this.workflowSettingsDialogVisible=!1},closeExecutionsListOpenDialog(){this.executionsListDialogVisible=!1},closeCredentialOpenDialog(){this.credentialOpenDialogVisible=!1},closeCredentialNewDialog(){this.credentialNewDialogVisible=!1},async stopExecution(){const e=this.$store.getters.activeExecutionId;if(null!==e){try{this.stopExecutionInProgress=!0;await this.restApi().stopCurrentExecution(e);this.$showMessage({title:"Execution stopped",message:`The execution with the id "${e}" got stopped!`,type:"success"})}catch(t){this.$showError(t,"Problem stopping execution","There was a problem stopping the execuction:")}this.stopExecutionInProgress=!1}},async openWorkflow(e){this.$router.push({name:"NodeViewExisting",params:{name:e}}),this.workflowOpenDialogVisible=!1},async handleFileImport(){const e=new FileReader;e.onload=e=>{const t=e.target.result;let s;try{s=JSON.parse(t)}catch(o){return void this.$showMessage({title:"Could not import file",message:"The file does not contain valid JSON data.",type:"error"})}this.$root.$emit("importWorkflowData",{data:s})};const t=this.$refs.importFile;null!==t&&null!==t.files&&0!==t.files.length&&e.readAsText(t.files[0])},async handleSelect(e,t){if("workflow-open"===e)this.workflowOpenDialogVisible=!0;else if("workflow-import-file"===e)this.$refs.importFile.click();else if("workflow-import-url"===e)try{const e=await this.$prompt("Workflow URL:","Import Workflow from URL:",{confirmButtonText:"Import",cancelButtonText:"Cancel",inputErrorMessage:"Invalid URL",inputPattern:/^http[s]?:\/\/.*\.json$/i});this.$root.$emit("importWorkflowUrl",{url:e.value})}catch(s){}else if("workflow-rename"===e){const e=await this.$prompt("Enter new workflow name","Rename",{inputValue:this.workflowName,confirmButtonText:"Rename",cancelButtonText:"Cancel"}).then(e=>e.value).catch(()=>{});if(void 0===e||e===this.workflowName)return;const t=this.$store.getters.workflowId,s={name:e};try{await this.restApi().updateWorkflow(t,s)}catch(o){return void this.$showError(o,"Problem renaming the workflow","There was a problem renaming the workflow:")}this.$store.commit("setWorkflowName",e),this.$showMessage({title:"Workflow renamed",message:`The workflow got renamed to "${e}"!`,type:"success"})}else if("workflow-delete"===e){const e=await this.confirmMessage(`Are you sure that you want to delete the workflow "${this.workflowName}"?`,"Delete Workflow?","warning","Yes, delete!");if(!1===e)return;let t;try{t=await this.restApi().deleteWorkflow(this.currentWorkflow)}catch(o){return void this.$showError(o,"Problem deleting the workflow","There was a problem deleting the workflow:")}this.$showMessage({title:"Workflow got deleted",message:`The workflow "${this.workflowName}" got deleted!`,type:"success"}),this.$router.push({name:"NodeViewNew"})}else if("workflow-download"===e){const e=await this.getWorkflowDataToSave(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json;charset=utf-8"});let s=this.$store.getters.workflowName||"unsaved_workflow";s=s.replace(/[^a-z0-9]/gi,"_"),Object(We["saveAs"])(t,s+".json")}else"workflow-save"===e?this.saveCurrentWorkflow():"workflow-save-as"===e?this.saveCurrentWorkflow(!0):"help-about"===e?this.aboutDialogVisible=!0:"workflow-settings"===e?this.workflowSettingsDialogVisible=!0:"workflow-new"===e?(this.$router.push({name:"NodeViewNew"}),this.$showMessage({title:"Workflow created",message:"A new workflow got created!",type:"success"})):"credentials-open"===e?this.credentialOpenDialogVisible=!0:"credentials-new"===e?this.credentialNewDialogVisible=!0:"execution-open-workflow"===e?null!==this.workflowExecution&&this.openWorkflow(this.workflowExecution.workflowId):"executions"===e&&(this.executionsListDialogVisible=!0)}},async mounted(){this.$root.$on("openWorkflowDialog",async()=>{this.workflowOpenDialogVisible=!0})}}),Le=Re,Me=(s("1b39"),Object(u["a"])(Le,I,V,!1,null,null,null)),je=Me.exports,Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-view-root"},[s("div",{staticClass:"node-view-wrapper",class:e.workflowClasses,on:{mousedown:e.mouseDown,mouseup:e.mouseUp,wheel:e.wheelScroll}},[s("div",{staticClass:"node-view-background",style:e.backgroundStyle}),s("div",{staticClass:"node-view",style:e.workflowStyle,attrs:{id:"node-view"}},e._l(e.nodes,(function(t){return s("node",{key:e.getNodeIndex(t.name),attrs:{id:"node-"+e.getNodeIndex(t.name),name:t.name,isReadOnly:e.isReadOnly,instance:e.instance},on:{duplicateNode:e.duplicateNode,deselectAllNodes:e.deselectAllNodes,deselectNode:e.nodeDeselectedByName,nodeSelected:e.nodeSelectedByName,removeNode:e.removeNode,runWorkflow:e.runWorkflow}})})),1)]),s("DataDisplay",{on:{valueChanged:e.valueChanged}}),e.createNodeActive||e.isReadOnly?e._e():s("div",{staticClass:"node-creator-button",attrs:{title:"Add Node"},on:{click:e.openNodeCreator}},[s("el-button",{attrs:{icon:"el-icon-plus",circle:""}})],1),s("node-creator",{attrs:{active:e.createNodeActive},on:{nodeTypeSelected:e.nodeTypeSelected,closeNodeCreator:e.closeNodeCreator}}),s("div",{staticClass:"zoom-menu"},[s("button",{staticClass:"button-white",attrs:{title:"Zoom In"},on:{click:function(t){return e.setZoom("in")}}},[s("font-awesome-icon",{attrs:{icon:"search-plus"}})],1),s("button",{staticClass:"button-white",attrs:{title:"Zoom Out"},on:{click:function(t){return e.setZoom("out")}}},[s("font-awesome-icon",{attrs:{icon:"search-minus"}})],1),1!==e.nodeViewScale?s("button",{staticClass:"button-white",attrs:{title:"Reset Zoom"},on:{click:function(t){return e.setZoom("reset")}}},[s("font-awesome-icon",{attrs:{icon:"undo",title:"Reset Zoom"}})],1):e._e()]),e.isReadOnly?e._e():s("div",{staticClass:"workflow-execute-wrapper"},[s("el-button",{staticClass:"workflow-run-button",class:{running:e.workflowRunning},attrs:{type:"text",disabled:e.workflowRunning,title:"Executes the Workflow from the Start or Webhook Node."},on:{click:function(t){return t.stopPropagation(),e.runWorkflow()}}},[s("div",{staticClass:"run-icon"},[e.workflowRunning?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):s("font-awesome-icon",{attrs:{icon:"play-circle"}})],1),e._v("\n\n\t\t\t"+e._s(e.runButtonText)+"\n\t\t")]),!0!==e.workflowRunning||e.executionWaitingForWebhook?e._e():s("el-button",{staticClass:"stop-execution",attrs:{circle:"",type:"text",title:e.stopExecutionInProgress?"Stopping current execution":"Stop current execution"},on:{click:function(t){return t.stopPropagation(),e.stopExecution()}}},[s("font-awesome-icon",{class:{"fa-spin":e.stopExecutionInProgress},attrs:{icon:"stop"}})],1),!0===e.workflowRunning&&!0===e.executionWaitingForWebhook?s("el-button",{staticClass:"stop-execution",attrs:{circle:"",type:"text",title:"Stop waiting for Webhook call"},on:{click:function(t){return t.stopPropagation(),e.stopWaitingForWebhook()}}},[s("font-awesome-icon",{class:{"fa-spin":e.stopExecutionInProgress},attrs:{icon:"stop"}})],1):e._e(),e.isReadOnly||!e.workflowExecution||e.workflowRunning?e._e():s("el-button",{staticClass:"clear-execution",attrs:{circle:"",type:"text",title:"Deletes the current Execution Data."},on:{click:function(t){return t.stopPropagation(),e.clearExecutionData()}}},[s("font-awesome-icon",{staticClass:"clear-execution-icon",attrs:{icon:"trash"}})],1)],1)],1)},Be=[],Ue=s("0369"),ze=s("85ee");const qe=o["default"].extend({methods:{getNodeIndex(e){let t=this.$store.getters.getNodeIndex(e);return-1===t&&(this.$store.commit("addToNodeIndex",e),t=this.$store.getters.getNodeIndex(e)),t.toString()}}}),Je=Object(C["a"])(qe).extend({data(){return{selectActive:!1,selectBox:document.createElement("span")}},computed:{isMacOs(){return/(ipad|iphone|ipod|mac)/i.test(navigator.platform)}},mounted(){this.createSelectBox()},methods:{createSelectBox(){this.selectBox.id="select-box",this.selectBox.style.margin="0px auto",this.selectBox.style.border="2px dotted #FF0000",this.selectBox.style.position="fixed",this.selectBox.style.zIndex="100",this.selectBox.style.visibility="hidden",this.selectBox.addEventListener("mouseup",this.mouseUpMouseSelect),this.$el.appendChild(this.selectBox)},isCtrlKeyPressed(e){return this.isMacOs?e.metaKey:e.ctrlKey},showSelectBox(e){this.selectBox.x=e.pageX,this.selectBox.y=e.pageY,this.selectBox.style.left=e.pageX+"px",this.selectBox.style.top=e.pageY+"px",this.selectBox.style.visibility="visible",this.selectActive=!0},updateSelectBox(e){const t=this.getSelectionBox(e);this.selectBox.style.left=t.x+"px",this.selectBox.style.top=t.y+"px",this.selectBox.style.width=t.width+"px",this.selectBox.style.height=t.height+"px"},hideSelectBox(){this.selectBox.style.visibility="hidden",this.selectBox.x=0,this.selectBox.y=0,this.selectBox.style.left="0px",this.selectBox.style.top="0px",this.selectBox.style.width="0px",this.selectBox.style.height="0px",this.selectActive=!1},getSelectionBox(e){return{x:Math.min(e.pageX,this.selectBox.x),y:Math.min(e.pageY,this.selectBox.y),width:Math.abs(e.pageX-this.selectBox.x),height:Math.abs(e.pageY-this.selectBox.y)}},getNodesInSelection(e){const t=[],s=this.getSelectionBox(e),o=this.$store.getters.getNodeViewOffsetPosition;return s.x-=o[0],s.y-=o[1],this.$store.getters.allNodes.forEach(e=>{e.position[0]<s.x||e.position[0]>s.x+s.width||e.position[1]<s.y||e.position[1]>s.y+s.height||t.push(e)}),t},mouseDownMouseSelect(e){!0!==this.isCtrlKeyPressed(e)&&(this.$store.getters.isActionActive("dragActive")||(this.showSelectBox(e),this.$el.addEventListener("mousemove",this.mouseMoveSelect)))},mouseUpMouseSelect(e){if(!1===this.selectActive)return;this.$el.removeEventListener("mousemove",this.mouseMoveSelect),this.deselectAllNodes();const t=this.getNodesInSelection(e);t.forEach(e=>{this.nodeSelected(e)}),this.hideSelectBox()},mouseMoveSelect(e){0!==e.buttons?this.updateSelectBox(e):this.mouseUpMouseSelect(e)},nodeDeselected(e){this.$store.commit("removeNodeFromSelection",e);const t="node-"+this.getNodeIndex(e.name);this.instance.removeFromDragSelection(t)},nodeSelected(e){this.$store.commit("addSelectedNode",e);const t="node-"+this.getNodeIndex(e.name);this.instance.addToDragSelection(t)},deselectAllNodes(){this.instance.clearDragSelection(),this.$store.commit("resetSelectedNodes"),this.$store.commit("setLastSelectedNode",null),this.$store.commit("setLastSelectedNodeOutputIndex",null),this.$store.commit("setActiveNode",null)}}}),He=Object(C["a"])(qe).extend({data(){return{moveLastPosition:[0,0]}},computed:{controlKeyCode(){return this.isMacOs?"Meta":"Control"},isMacOs(){return/(ipad|iphone|ipod|mac)/i.test(navigator.platform)}},methods:{isCtrlKeyPressed(e){return this.isMacOs?e.metaKey:e.ctrlKey},moveWorkflow(e){const t=this.$store.getters.getNodeViewOffsetPosition,s=t[0]+(e.pageX-this.moveLastPosition[0]),o=t[1]+(e.pageY-this.moveLastPosition[1]);this.$store.commit("setNodeViewOffsetPosition",[s,o]),this.moveLastPosition[0]=e.pageX,this.moveLastPosition[1]=e.pageY},mouseDownMoveWorkflow(e){!1!==this.isCtrlKeyPressed(e)&&(this.$store.getters.isActionActive("dragActive")||(this.$store.commit("setNodeViewMoveInProgress",!0),this.moveLastPosition[0]=e.pageX,this.moveLastPosition[1]=e.pageY,this.$el.addEventListener("mousemove",this.mouseMoveNodeWorkflow)))},mouseUpMoveWorkflow(e){!1!==this.$store.getters.isNodeViewMoveInProgress&&(this.$el.removeEventListener("mousemove",this.mouseMoveNodeWorkflow),this.$store.commit("setNodeViewMoveInProgress",!1))},mouseMoveNodeWorkflow(e){0!==e.buttons?this.moveWorkflow(e):this.mouseUp(e)},wheelMoveWorkflow(e){const t=this.$store.getters.getNodeViewOffsetPosition,s=t[0]-e.deltaX,o=t[1]-e.deltaY;this.$store.commit("setNodeViewOffsetPosition",[s,o])}}});var Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"el-fade-in"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.node,expression:"node"}],staticClass:"data-display-wrapper close-on-click",on:{click:e.close}},[s("div",{staticClass:"data-display"},[s("NodeSettings",{on:{valueChanged:e.valueChanged}}),s("RunData"),s("div",{staticClass:"close-button clickable close-on-click",attrs:{title:"Close"}},[s("i",{staticClass:"el-icon-close close-on-click"})])],1)])])},Ye=[],Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-settings",on:{keydown:function(e){e.stopPropagation()}}},[s("div",{staticClass:"header-side-menu"},[e.node?s("span",[s("display-with-change",{attrs:{"key-name":"name"},on:{valueChanged:e.valueChanged}}),e.nodeType?s("a",{staticClass:"node-info",attrs:{href:"http://n8n.io/nodes/"+e.nodeType.name,target:"_blank"}},[s("el-tooltip",{staticClass:"clickable",attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("<strong>Node Description:</strong><br />"+e.nodeTypeDescription+"<br /><br /><strong>For more information and usage examples click!</strong>")},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1):e._e()],1):s("span",[e._v("No node active")])]),e.node&&!e.nodeValid?s("div",{staticClass:"node-is-not-valid"},[e._v('\n\t\tThe node is not valid as its type "'+e._s(e.node.type)+'" is unknown.\n\t')]):e._e(),e.node&&e.nodeValid?s("div",{staticClass:"node-parameters-wrapper"},[s("el-tabs",{attrs:{stretch:""}},[s("el-tab-pane",{attrs:{label:"Parameters"}},[s("node-credentials",{attrs:{node:e.node},on:{credentialSelected:e.credentialSelected}}),s("node-webhooks",{attrs:{node:e.node,nodeType:e.nodeType}}),s("parameter-input-list",{attrs:{parameters:e.parametersNoneSetting,hideDelete:!0,nodeValues:e.nodeValues,path:"parameters"},on:{valueChanged:e.valueChanged}}),0===e.parametersNoneSetting.length?s("div",[e._v("\n\t\t\t\t\tThe node does not have any parameters.\n\t\t\t\t")]):e._e()],1),s("el-tab-pane",{attrs:{label:"Node"}},[s("parameter-input-list",{attrs:{parameters:e.nodeSettings,hideDelete:!0,nodeValues:e.nodeValues,path:""},on:{valueChanged:e.valueChanged}}),s("parameter-input-list",{attrs:{parameters:e.parametersSetting,nodeValues:e.nodeValues,path:"parameters"},on:{valueChanged:e.valueChanged}})],1)],1)],1):e._e()])},Ze=[],Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"static-text-wrapper"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.editActive,expression:"!editActive"}],attrs:{title:"Click to change"}},[s("span",{staticClass:"static-text",on:{mousedown:e.startEdit}},[e._v(e._s(e.currentValue))])]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.editActive,expression:"editActive"}]},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],ref:"inputField",staticClass:"edit-field",attrs:{type:"text"},domProps:{value:e.newValue},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.setValue(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:(t.stopPropagation(),t.preventDefault(),e.cancelEdit(t))},function(t){return t.stopPropagation(),e.noOp(t)}],blur:e.cancelEdit,input:function(t){t.target.composing||(e.newValue=t.target.value)}}}),s("font-awesome-icon",{staticClass:"icons clickable",attrs:{icon:"times",title:"Cancel Edit"},on:{mousedown:e.cancelEdit}}),s("font-awesome-icon",{staticClass:"icons clickable",attrs:{icon:"check",title:"Set Value"},on:{mousedown:e.setValue}})],1)])},Qe=[],et=Object(C["a"])(y["a"]).extend({name:"DisplayWithChange",props:{keyName:String},computed:{node(){return this.$store.getters.activeNode},currentValue(){this.keyName.split(".");const e=(e,t)=>t.split(".").reduce((e,t)=>e&&e[t],e);return e(this.node,this.keyName)}},watch:{currentValue(e){this.editActive=!1}},data:()=>({editActive:!1,newValue:""}),methods:{noOp(){},startEdit(){!0!==this.isReadOnly&&(this.editActive=!0,this.newValue=this.currentValue,setTimeout(()=>{this.$refs.inputField.focus()}))},cancelEdit(){this.editActive=!1},setValue(){const e={value:this.newValue,name:this.keyName};this.$emit("valueChanged",e),this.editActive=!1}}}),tt=et,st=(s("e1e8"),Object(u["a"])(tt,Xe,Qe,!1,null,null,null)),ot=st.exports,it=s("4a0c"),nt=s("3c38"),at=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.credentialTypesNodeDescriptionDisplayed.length?s("div",{staticClass:"node-credentials"},[s("credentials-edit",{attrs:{dialogVisible:e.credentialNewDialogVisible,editCredentials:e.editCredentials,setCredentialType:e.addType,nodesInit:e.nodesInit},on:{closeDialog:e.closeCredentialNewDialog,credentialsCreated:e.credentialsCreated,credentialsUpdated:e.credentialsUpdated}}),s("div",{staticClass:"headline"},[e._v("\n\t\tCredentials\n\t")]),e._l(e.credentialTypesNodeDescriptionDisplayed,(function(t){return s("div",{key:t.name,staticClass:"credential-data"},[e.displayCredentials(t)?s("el-row",[s("el-col",{staticClass:"parameter-name",attrs:{span:10}},[e._v("\n\t\t\t\t"+e._s(e.credentialTypeNames[t.name])+":\n\t\t\t")]),s("el-col",{staticClass:"parameter-value",class:e.getIssues(t.name).length?"has-issues":"",attrs:{span:12}},[s("div",{staticClass:"credential-issues"},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s("Issues:<br />&nbsp;&nbsp;- "+e.getIssues(t.name).join("<br />&nbsp;&nbsp;- "))},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1),s("div",{style:e.credentialInputWrapperStyle(t.name)},[s("el-select",{attrs:{disabled:e.isReadOnly,placeholder:"Select Credential",size:"small"},on:{change:function(s){return e.credentialSelected(t.name)}},model:{value:e.credentials[t.name],callback:function(s){e.$set(e.credentials,t.name,s)},expression:"credentials[credentialTypeDescription.name]"}},e._l(e.credentialOptions[t.name],(function(e,t){return s("el-option",{key:e.name+"_"+t,attrs:{label:e.name,value:e.name}})})),1)],1)]),s("el-col",{staticClass:"parameter-value",attrs:{span:2}},[e.credentials[t.name]?s("font-awesome-icon",{staticClass:"update-credentials clickable",attrs:{icon:"pen",title:"Update Credentials"},on:{click:function(s){return e.updateCredentials(t.name)}}}):e._e()],1)],1):e._e()],1)}))],2):e._e()},rt=[],lt=Object(C["a"])(y["a"],O["a"],k["a"],b["a"]).extend({name:"NodeCredentials",props:["node"],components:{CredentialsEdit:oe,ParameterInput:Y["a"]},computed:{credentialTypesNode(){return this.credentialTypesNodeDescription.map(e=>e.name)},credentialTypesNodeDescriptionDisplayed(){return this.credentialTypesNodeDescription.filter(e=>this.displayCredentials(e))},credentialTypesNodeDescription(){const e=this.node,t=this.$store.getters.nodeType(e.type);return t&&t.credentials?t.credentials:[]},credentialTypeNames(){const e={};let t;for(const s of this.credentialTypesNode)t=this.$store.getters.credentialType(s),e[s]=null!==t?t.displayName:s;return e}},data(){return{addType:void 0,credentialNewDialogVisible:!1,credentialOptions:{},credentials:{},editCredentials:null,newCredentialText:"- Create New -",nodesInit:void 0}},watch:{node(){this.init()}},methods:{closeCredentialNewDialog(){this.credentialNewDialogVisible=!1},async credentialsCreated(e){await this.credentialsUpdated(e)},credentialsUpdated(e){this.credentialTypesNode.includes(e.data.type)&&(this.init(),o["default"].set(this.credentials,e.data.type,e.data.name),this.credentialSelected(e.data.type),!0===e.options.closeDialog&&this.closeCredentialNewDialog())},credentialInputWrapperStyle(e){let t=0;const s={width:"100%"};return this.getIssues(e).length&&(t+=20),0!==t&&(s.width=`calc(100% - ${t}px)`),s},credentialSelected(e){const t=this.credentials[e];t===this.newCredentialText&&(this.addType=e,this.editCredentials=null,this.nodesInit=[this.node.type],this.credentialNewDialogVisible=!0,this.credentials[e]=void 0);const s=this.node,o={name:s.name,properties:{credentials:JSON.parse(JSON.stringify(this.credentials))}};this.$emit("credentialSelected",o)},displayCredentials(e){return void 0===e.displayOptions||this.displayParameter(this.node.parameters,e,"")},getIssues(e){const t=this.node;return void 0===t.issues||void 0===t.issues.credentials?[]:t.issues.credentials.hasOwnProperty(e)?t.issues.credentials[e]:[]},updateCredentials(e){this.credentials[e];const t=this.credentials[e],s=this.credentialOptions[e].find(e=>e.name===t);if(void 0===s)return void this.$showMessage({title:"Credentials not found",message:`The credentials named "${t}" of type "${e}" could not be found!`,type:"error"});const o={id:s.id,name:t,type:e};this.editCredentials=o,this.addType=e,this.credentialNewDialogVisible=!0},init(){const e=this.node,t={name:this.newCredentialText};let s=[];for(const i of this.credentialTypesNode)s=this.$store.getters.credentialsByType(i),s.push(t),o["default"].set(this.credentialOptions,i,s);e.credentials?o["default"].set(this,"credentials",JSON.parse(JSON.stringify(e.credentials))):o["default"].set(this,"credentials",{})}},mounted(){this.init()}}),dt=lt,ct=(s("f408"),Object(u["a"])(dt,at,rt,!1,null,null,null)),ut=ct.exports,pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.webhooksNode.length?s("div",{staticClass:"webhoooks"},[s("div",{staticClass:"clickable headline",class:{expanded:!e.isMinimized},attrs:{title:e.isMinimized?"Click to display Webhook URLs":"Click to hide Webhook URLs"},on:{click:function(t){e.isMinimized=!e.isMinimized}}},[s("font-awesome-icon",{staticClass:"minimize-button minimize-icon",attrs:{icon:"angle-up"}}),e._v("\n\t\tWebhook URLs\n\t")],1),s("el-collapse-transition",[e.isMinimized?e._e():s("div",{staticClass:"node-webhooks"},[s("div",{staticClass:"url-selection"},[s("el-row",[s("el-col",{staticClass:"mode-selection-headline",attrs:{span:10}},[e._v("\n\t\t\t\t\t\tDisplay URL for:\n\t\t\t\t\t")]),s("el-col",{attrs:{span:14}},[s("el-radio-group",{attrs:{size:"mini"},model:{value:e.showUrlFor,callback:function(t){e.showUrlFor=t},expression:"showUrlFor"}},[s("el-radio-button",{attrs:{label:"Production"}}),s("el-radio-button",{attrs:{label:"Test"}})],1)],1)],1)],1),e._l(e.webhooksNode,(function(t,o){return s("el-tooltip",{key:o,staticClass:"item",attrs:{effect:"light",content:"Click to copy Webhook URL",placement:"left"}},[s("div",{staticClass:"webhook-wrapper"},[s("div",{staticClass:"http-field"},[s("div",{staticClass:"http-method"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.getValue(t,"httpMethod"))),s("br")])]),s("div",{staticClass:"url-field"},[s("div",{staticClass:"webhook-url left-ellipsis clickable",on:{click:function(s){return e.copyWebhookUrl(t)}}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.getWebhookUrl(t,"path"))),s("br")])])])])}))],2)])],1):e._e()},ht=[],mt=Object(C["a"])(H,b["a"],x["a"]).extend({name:"NodeWebhooks",props:["node","nodeType"],data(){return{isMinimized:!0,showUrlFor:"Production"}},computed:{webhooksNode(){return null===this.nodeType||void 0===this.nodeType.webhooks?[]:this.nodeType.webhooks}},methods:{copyWebhookUrl(e){const t=this.getWebhookUrl(e);this.copyToClipboard(t),this.$showMessage({title:"Copied",message:"The webhook URL got copied!",type:"success"})},getValue(e,t){if(void 0===e[t])return"empty";try{return this.resolveExpression(e[t])}catch(s){return"[INVALID EXPRESSION]"}},getWebhookUrl(e){let t=this.$store.getters.getWebhookUrl;"Test"===this.showUrlFor&&(t=this.$store.getters.getWebhookTestUrl);const s=this.$store.getters.workflowId,o=this.getValue(e,"path");return K["NodeHelpers"].getNodeWebhookUrl(t,s,this.node,o)}},watch:{node(){this.isMinimized=!0}}}),ft=mt,wt=(s("21ed"),Object(u["a"])(ft,pt,ht,!1,null,"15247bb3",null)),gt=wt.exports,vt=Object(C["a"])(y["a"],O["a"]).extend({name:"NodeSettings",components:{DisplayWithChange:ot,NodeCredentials:ut,ParameterInputFull:it["a"],ParameterInputList:nt["default"],NodeWebhooks:gt},computed:{nodeType(){this.node;return this.node?this.$store.getters.nodeType(this.node.type):null},nodeTypeDescription(){return this.nodeType&&this.nodeType.description?this.nodeType.description:"No description found"},headerStyle(){return this.node?{"background-color":this.node.color}:{}},node(){return this.$store.getters.activeNode},parametersSetting(){return this.parameters.filter(e=>e.isNodeSetting)},parametersNoneSetting(){return this.parameters.filter(e=>!e.isNodeSetting)},parameters(){return null===this.nodeType?[]:this.nodeType.properties},isColorDefaultValue(){return null!==this.nodeType&&this.node.color===this.nodeType.defaults.color},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},data(){return{nodeValid:!0,nodeColor:null,nodeValues:{color:"#ff0000",alwaysOutputData:!1,notesInFlow:!1,continueOnFail:!1,retryOnFail:!1,maxTries:3,waitBetweenTries:1e3,notes:"",parameters:{}},nodeSettings:[{displayName:"Notes",name:"notes",type:"string",typeOptions:{rows:5},default:"",noDataExpression:!0,description:"Notes to save with the node."},{displayName:"Notes In Flow",name:"notesInFlow",type:"boolean",default:!1,noDataExpression:!0,description:"If activated it will display the above notes in the flow as subtitle."},{displayName:"Node Color",name:"color",type:"color",default:"#ff0000",noDataExpression:!0,description:"The color of the node in the flow."},{displayName:"Always Output Data",name:"alwaysOutputData",type:"boolean",default:!1,noDataExpression:!0,description:"If activated and the node does not have any data for the first output,<br />it returns an empty item anyway. Be careful setting this on<br />IF-Nodes as it could easily cause an infinite loop."},{displayName:"Retry On Fail",name:"retryOnFail",type:"boolean",default:!1,noDataExpression:!0,description:"If activated it will automatically retry the node again multiple times."},{displayName:"Max. Tries",name:"maxTries",type:"number",typeOptions:{minValue:2,maxValue:5},default:3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:"How often it should try to execute the node before it should fail."},{displayName:"Wait Between Tries",name:"waitBetweenTries",type:"number",typeOptions:{minValue:0,maxValue:5e3},default:1e3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:"How long to wait between ties. Value in ms."},{displayName:"Continue On Fail",name:"continueOnFail",type:"boolean",default:!1,noDataExpression:!0,description:"If activated and the node fails the workflow will simply continue running.<br />It will then simply pass through the input data so the workflow has<br />to be set up to handle the case that different data gets returned."}]}},watch:{node(e,t){this.setNodeValues()}},methods:{noOp(){},setValue(e,t){const s=e.split(".");let i=s.pop(),n=!1;if(void 0!==i&&i.includes("[")){const e=i.match(/(.*)\[(\d+)\]$/);e&&(s.push(e[1]),i=e[2],n=!0)}if(0===s.length)null===t?o["default"].delete(this.nodeValues,i):o["default"].set(this.nodeValues,i,t);else if(null===t){let e=Object(J["get"])(this.nodeValues,s.join("."));o["default"].delete(e,i),!0===n&&0===e.length&&(i=s.pop(),e=Object(J["get"])(this.nodeValues,s.join(".")),o["default"].delete(e,i))}else"object"===typeof t?o["default"].set(Object(J["get"])(this.nodeValues,s.join(".")),i,JSON.parse(JSON.stringify(t))):o["default"].set(Object(J["get"])(this.nodeValues,s.join(".")),i,t)},credentialSelected(e){this.$store.commit("updateNodeProperties",e);const t=this.$store.getters.nodeByName(e.name);this.updateNodeCredentialIssues(t)},valueChanged(e){let t;t=e.hasOwnProperty("value")?e.value:Object(J["get"])(this.nodeValues,e.name);const s=e.node||this.node.name,i=this.$store.getters.nodeByName(s);if("name"===e.name){const o={value:t,oldValue:s,name:e.name};this.$emit("valueChanged",o),this.$store.commit("setActiveNode",t)}else if(e.name.startsWith("parameters.")){const s=this.$store.getters.nodeType(i.type);let n=K["NodeHelpers"].getNodeParameters(s.properties,i.parameters,!1,!1);n=JSON.parse(JSON.stringify(n));const a=e.name.split(".").slice(1).join("."),r=a.match(/(.*)\[(\d+)\]$/);if(void 0===e.value&&null!==r){const e=r[1],t=r[2],s=Object(J["get"])(n,e);Array.isArray(s)&&(s.splice(parseInt(t,10),1),o["default"].set(n,e,s))}else void 0===t?Object(J["unset"])(n,a):Object(J["set"])(n,a,t);n=K["NodeHelpers"].getNodeParameters(s.properties,n,!0,!1);for(const e of Object.keys(n))n&&null!==n[e]&&void 0!==n[e]&&this.setValue("parameters."+e,n[e]);const l={name:i.name,value:n};this.$store.commit("setNodeParameters",l),this.updateNodeParameterIssues(i,s),this.updateNodeCredentialIssues(i)}else{o["default"].set(this.nodeValues,e.name,t);const s={name:i.name,key:e.name,value:t};this.$store.commit("setNodeValue",s)}},setNodeValues(){if(this.node)if(null!==this.nodeType){this.nodeValid=!0;const e=[];this.node.color&&(e.push("color"),o["default"].set(this.nodeValues,"color",this.node.color)),this.node.notes&&(e.push("notes"),o["default"].set(this.nodeValues,"notes",this.node.notes)),this.node.alwaysOutputData&&(e.push("alwaysOutputData"),o["default"].set(this.nodeValues,"alwaysOutputData",this.node.alwaysOutputData)),this.node.continueOnFail&&(e.push("continueOnFail"),o["default"].set(this.nodeValues,"continueOnFail",this.node.continueOnFail)),this.node.notesInFlow&&(e.push("notesInFlow"),o["default"].set(this.nodeValues,"notesInFlow",this.node.notesInFlow)),this.node.retryOnFail&&(e.push("retryOnFail"),o["default"].set(this.nodeValues,"retryOnFail",this.node.retryOnFail)),this.node.maxTries&&(e.push("maxTries"),o["default"].set(this.nodeValues,"maxTries",this.node.maxTries)),this.node.waitBetweenTries&&(e.push("waitBetweenTries"),o["default"].set(this.nodeValues,"waitBetweenTries",this.node.waitBetweenTries));for(const t of this.nodeSettings)e.includes(t.name)||o["default"].set(this.nodeValues,t.name,t.default),"color"===t.name&&(t.default=this.nodeType.defaults.color);o["default"].set(this.nodeValues,"parameters",JSON.parse(JSON.stringify(this.node.parameters)))}else this.nodeValid=!1}},mounted(){this.setNodeValues()}}),yt=vt,kt=(s("e82f"),Object(u["a"])(yt,Ge,Ze,!1,null,null,null)),bt=kt.exports,xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.workflowRunning,expression:"workflowRunning"}],staticClass:"run-data-view"},[s("BinaryDataDisplay",{attrs:{windowVisible:e.binaryDataDisplayVisible,displayData:e.binaryDataDisplayData},on:{close:e.closeBinaryDataDisplay}}),e.node&&!e.isReadOnly?s("el-button",{staticClass:"execute-node-button",attrs:{disabled:e.workflowRunning,title:"Executes node "+e.node.name+" and all not already executed nodes before it."},on:{click:function(t){return t.stopPropagation(),e.runWorkflow(e.node.name)}}},[s("div",{staticClass:"run-icon-button"},[e.workflowRunning?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):s("font-awesome-icon",{attrs:{icon:"play-circle"}})],1),e._v("\n\n\t\tExecute Node\n\t")]):e._e(),s("div",{staticClass:"header"},[s("div",{staticClass:"title-text"},[e.dataCount<this.MAX_DISPLAY_ITEMS_AUTO_ALL&&e.dataSize<e.MAX_DISPLAY_DATA_SIZE?s("strong",[e._v("\n\t\t\t\tResults: "+e._s(e.dataCount)+"\n\t\t\t")]):s("strong",[e._v("Results:\n\t\t\t\t"),s("el-select",{on:{click:function(e){e.stopPropagation()}},model:{value:e.maxDisplayItems,callback:function(t){e.maxDisplayItems=t},expression:"maxDisplayItems"}},e._l(e.maxDisplayItemsOptions,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v("/\n\t\t\t\t"+e._s(e.dataCount)+"\n\t\t\t")],1),e._v("\n\t\t\t\n\t\t\t"),e.runMetadata?s("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[s("strong",[e._v("Start Time:")]),e._v(" "+e._s(e.runMetadata.startTime)),s("br"),s("strong",[e._v("Execution Time:")]),e._v(" "+e._s(e.runMetadata.executionTime)+" ms\n\t\t\t\t"),s("font-awesome-icon",{staticClass:"primary-color",attrs:{slot:"reference",icon:"info-circle"},slot:"reference"})],1):e._e(),e.maxOutputIndex>0?s("span",[e._v("\n\t\t\t\t| Output:\n\t\t\t\t"),s("el-select",{on:{click:function(e){e.stopPropagation()}},model:{value:e.outputIndex,callback:function(t){e.outputIndex=t},expression:"outputIndex"}},e._l(e.maxOutputIndex+1,(function(t){return s("el-option",{key:t,attrs:{label:e.getOutputName(t-1),value:t-1}})})),1)],1):e._e(),e.maxRunIndex>0?s("span",[e._v("\n\t\t\t\t| Data of Execution:\n\t\t\t\t"),s("el-select",{on:{click:function(e){e.stopPropagation()}},model:{value:e.runIndex,callback:function(t){e.runIndex=t},expression:"runIndex"}},e._l(e.maxRunIndex+1,(function(t){return s("el-option",{key:t,attrs:{label:t+"/"+(e.maxRunIndex+1),value:t-1}})})),1)],1):e._e()],1),e.node&&null!==e.workflowRunData&&e.workflowRunData.hasOwnProperty(e.node.name)&&!e.workflowRunData[e.node.name][e.runIndex].error?s("div",{staticClass:"title-data-display-selector",on:{click:function(e){e.stopPropagation()}}},[s("el-radio-group",{attrs:{size:"mini"},model:{value:e.displayMode,callback:function(t){e.displayMode=t},expression:"displayMode"}},[s("el-radio-button",{attrs:{label:"JSON",disabled:!1===e.showData}}),s("el-radio-button",{attrs:{label:"Table"}}),0!==e.binaryData.length?s("el-radio-button",{attrs:{label:"Binary"}}):e._e()],1)],1):e._e()]),s("div",{staticClass:"data-display-content"},[e.node&&null!==e.workflowRunData&&e.workflowRunData.hasOwnProperty(e.node.name)?s("span",[e.workflowRunData[e.node.name][e.runIndex].error?s("div",{staticClass:"error-display"},[s("div",{staticClass:"error-message"},[e._v("ERROR: "+e._s(e.workflowRunData[e.node.name][e.runIndex].error.message))]),s("pre",[s("code",[e._v(e._s(e.workflowRunData[e.node.name][e.runIndex].error.stack))])])]):s("span",[!1===e.showData?s("div",{staticClass:"to-much-data"},[s("h3",[e._v("\n\t\t\t\t\t\tNode contains large amount of data\n\t\t\t\t\t")]),s("div",{staticClass:"text"},[e._v("\n\t\t\t\t\t\tThe node contains "+e._s(parseInt(e.dataSize/1024).toLocaleString())+" KB of data."),s("br"),e._v("\n\t\t\t\t\t\tDisplaying it could cause problems!"),s("br"),s("br"),e._v("\n\t\t\t\t\t\tIf you decide to display it anyway avoid the JSON view!\n\t\t\t\t\t")]),s("el-button",{attrs:{size:"small"},on:{click:function(t){e.displayMode="Table",e.showData=!0}}},[s("font-awesome-icon",{attrs:{icon:"eye"}}),e._v("\n\t\t\t\t\t\tDisplay Data Anyway\n\t\t\t\t\t")],1)],1):["JSON","Table"].includes(e.displayMode)?s("div",[0===e.jsonData.length?s("div",{staticClass:"no-data"},[e._v("\n\t\t\t\t\t\tNo text data found\n\t\t\t\t\t")]):"Table"===e.displayMode?s("div",[null!==e.tableData&&0===e.tableData.columns.length?s("div",{staticClass:"no-data"},[e._v("\n\t\t\t\t\t\t\tEntries exist but they do not contain any JSON data.\n\t\t\t\t\t\t")]):null!==e.tableData?s("table",[s("tr",e._l(e.tableData.columns,(function(t){return s("th",{key:t},[e._v(e._s(t))])})),0),e._l(e.tableData.data,(function(t,o){return s("tr",{key:o},e._l(t,(function(t,o){return s("td",{key:o},[e._v(e._s([null,void 0].includes(t)?"":t))])})),0)}))],2):e._e()]):"JSON"===e.displayMode?s("json-tree",{staticClass:"json-data",attrs:{data:e.jsonData,level:10}}):e._e()],1):"Binary"===e.displayMode?s("div",[0===e.binaryData.length?s("div",{staticClass:"no-data"},[e._v("\n\t\t\t\t\t\tNo binary data found\n\t\t\t\t\t")]):s("div",e._l(e.binaryData,(function(t,o){return s("div",{key:o},[s("div",{staticClass:"binary-data-row-index"},[s("div",{staticClass:"binary-data-cell-index"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(o+1)+"\n\t\t\t\t\t\t\t\t")])]),s("div",{staticClass:"binary-data-row"},e._l(t,(function(t,i){return s("div",{key:o+"_"+i,staticClass:"binary-data-cell"},[s("div",{staticClass:"binary-data-information"},[s("div",{staticClass:"binary-data-cell-name"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(i)+"\n\t\t\t\t\t\t\t\t\t\t")]),t.fileName?s("div",[s("div",{staticClass:"label"},[e._v("File Name: ")]),s("div",{staticClass:"value"},[e._v(e._s(t.fileName))])]):e._e(),t.fileExtension?s("div",[s("div",{staticClass:"label"},[e._v("File Extension:")]),s("div",{staticClass:"value"},[e._v(e._s(t.fileExtension))])]):e._e(),t.mimeType?s("div",[s("div",{staticClass:"label"},[e._v("Mime Type: ")]),s("div",{staticClass:"value"},[e._v(e._s(t.mimeType))])]):e._e(),s("div",{staticClass:"binary-data-show-data-button-wrapper"},[s("el-button",{staticClass:"binary-data-show-data-button",attrs:{size:"mini"},on:{click:function(t){return e.displayBinaryData(o,i)}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\tShow Binary Data\n\t\t\t\t\t\t\t\t\t\t\t")])],1)])])})),0)])})),0)]):e._e()])]):s("div",{staticClass:"message"},[e._m(0)])])],1)},Ct=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("strong",[e._v("No data")]),s("br"),s("br"),e._v("\n\t\t\t\tTo display data execute the node first by pressing the execute button above.\n\t\t\t")])}],Nt=s("3e55"),Dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.windowVisible?s("div",{staticClass:"binary-data-window"},[s("el-button",{staticClass:"binary-data-window-back",attrs:{size:"small",title:"Back to overview page",icon:"el-icon-arrow-left"},on:{click:function(t){return t.stopPropagation(),e.closeWindow(t)}}},[e._v("\n\t\tBack to list\n\t")]),s("div",{staticClass:"binary-data-window-wrapper"},[null===e.binaryData?s("div",[e._v("\n\t\t\tData to display did not get found\n\t\t")]):e._e(),s("embed",{staticClass:"binary-data",class:e.embedClass,attrs:{src:"data:"+e.binaryData.mimeType+";base64,"+e.binaryData.data}})])],1):e._e()},Et=[],$t=Object(C["a"])(O["a"]).extend({name:"BinaryDataDisplay",props:["displayData","windowVisible"],computed:{binaryData(){const e=this.getBinaryData(this.workflowRunData,this.displayData.node,this.displayData.runIndex,this.displayData.outputIndex);return 0===e.length||this.displayData.index>=e.length||void 0===e[this.displayData.index][this.displayData.key]?null:e[this.displayData.index][this.displayData.key]},embedClass(){return null!==this.binaryData&&void 0!==this.binaryData.mimeType&&this.binaryData.mimeType.startsWith("image")?["image"]:["other"]},workflowRunData(){const e=this.$store.getters.getWorkflowExecution;if(null===e)return null;const t=e.data;return t.resultData.runData}},methods:{closeWindow(){return this.$emit("close"),!1}}}),Ot=$t,Tt=(s("62ca"),Object(u["a"])(Ot,Dt,Et,!1,null,null,null)),At=Tt.exports,_t=Object(C["a"])(y["a"],O["a"],Ve).extend({name:"RunData",components:{BinaryDataDisplay:At,JsonTree:Nt["a"]},data(){return{binaryDataPreviewActive:!1,dataSize:0,displayMode:"Table",runIndex:0,showData:!1,outputIndex:0,maxDisplayItems:25,binaryDataDisplayVisible:!1,binaryDataDisplayData:null,MAX_DISPLAY_DATA_SIZE:ze["a"],MAX_DISPLAY_ITEMS_AUTO_ALL:ze["b"]}},computed:{workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunData(){if(null===this.workflowExecution)return null;const e=this.workflowExecution.data;return e.resultData.runData},maxDisplayItemsOptions(){return[25,50,100,250,500,1e3,this.dataCount].filter(e=>e<=this.dataCount)},node(){return this.$store.getters.activeNode},runMetadata(){if(!this.node||null===this.workflowExecution)return null;const e=this.workflowRunData;if(null===e||!e.hasOwnProperty(this.node.name))return null;if(e[this.node.name].length<=this.runIndex)return null;const t=e[this.node.name][this.runIndex];return{executionTime:t.executionTime,startTime:new Date(t.startTime).toLocaleString()}},dataCount(){if(null===this.node)return 0;const e=this.workflowRunData;if(null===e||!e.hasOwnProperty(this.node.name))return 0;if(e[this.node.name].length<=this.runIndex)return 0;if(e[this.node.name][this.runIndex].hasOwnProperty("error"))return 1;if(!e[this.node.name][this.runIndex].hasOwnProperty("data")||void 0===e[this.node.name][this.runIndex].data)return 0;const t=this.getMainInputData(e[this.node.name][this.runIndex].data,this.outputIndex);return t.length},maxOutputIndex(){if(null===this.node)return 0;const e=this.workflowRunData;return null!==e&&e.hasOwnProperty(this.node.name)?e[this.node.name].length<this.runIndex||void 0===e[this.node.name][this.runIndex].data||void 0===e[this.node.name][this.runIndex].data.main?0:e[this.node.name][this.runIndex].data.main.length-1:0},maxRunIndex(){if(null===this.node)return 0;const e=this.workflowRunData;return null!==e&&e.hasOwnProperty(this.node.name)&&e[this.node.name].length?e[this.node.name].length-1:0},jsonData(){let e=this.getNodeInputData(this.node,this.runIndex,this.outputIndex);return 0!==e.length&&Array.isArray(e)?(null!==this.maxDisplayItems&&(e=e.slice(0,this.maxDisplayItems)),this.convertToJson(e)):[]},tableData(){let e=this.getNodeInputData(this.node,this.runIndex,this.outputIndex);if(0!==e.length)return null!==this.maxDisplayItems&&(e=e.slice(0,this.maxDisplayItems)),this.convertToTable(e)},binaryData(){return null===this.node?[]:this.getBinaryData(this.workflowRunData,this.node.name,this.runIndex,this.outputIndex)}},methods:{getOutputName(e){if(null===this.node)return e+1;const t=this.$store.getters.nodeType(this.node.type);return!t.hasOwnProperty("outputNames")||t.outputNames.length<=e?e+1:t.outputNames[e]},closeBinaryDataDisplay(){this.binaryDataDisplayVisible=!1,this.binaryDataDisplayData=null},convertToJson(e){const t=[];return e.forEach(e=>{e.hasOwnProperty("json")&&t.push(e.json)}),t},convertToTable(e){const t=[],s=[];let o,i,n;return e.forEach(e=>{e.hasOwnProperty("json")&&(n=e.json,i=[],o=Object.keys(n),s.forEach(e=>{n.hasOwnProperty(e)?(i.push(n[e]),o.splice(o.indexOf(e),1)):i.push(null)}),o.forEach(e=>{s.push(e),i.push(n[e])}),t.push(i))}),t.forEach(e=>{s.length>e.length&&e.push.apply(e,new Array(s.length-e.length))}),{columns:s,data:t}},clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},displayBinaryData(e,t){this.binaryDataDisplayVisible=!0,this.binaryDataDisplayData={node:this.node.name,runIndex:this.runIndex,outputIndex:this.outputIndex,index:e,key:t}},refreshDataSize(){this.showData=!1;const e=this.getNodeInputData(this.node,this.runIndex,this.outputIndex),t=e.slice(0,this.maxDisplayItems||e.length).map(e=>e.json);this.dataSize=JSON.stringify(t).length,this.dataSize<this.MAX_DISPLAY_DATA_SIZE&&(this.showData=!0),"Binary"===this.displayMode&&0===this.binaryData.length&&(this.displayMode="Table")}},watch:{node(e,t){this.outputIndex=0,this.maxDisplayItems=25,this.refreshDataSize()},jsonData(){this.refreshDataSize()},displayMode(){this.closeBinaryDataDisplay()},maxRunIndex(){this.runIndex=Math.min(this.runIndex,this.maxRunIndex)}},mounted(){}}),St=_t,Pt=(s("4cb6"),Object(u["a"])(St,xt,Ct,!1,null,null,null)),It=Pt.exports,Vt=o["default"].extend({name:"DataDisplay",components:{NodeSettings:bt,RunData:It},computed:{node(){return this.$store.getters.activeNode}},methods:{valueChanged(e){this.$emit("valueChanged",e)},nodeTypeSelected(e){this.$emit("nodeTypeSelected",e)},close(e){e.target.className&&e.target.className.includes&&e.target.className.includes("close-on-click")&&this.$store.commit("setActiveNode",null)}}}),Wt=Vt,Rt=(s("b47e"),Object(u["a"])(Wt,Ke,Ye,!1,null,null,null)),Lt=Rt.exports,Mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-wrapper",style:e.nodePosition},[s("div",{ref:e.data.name,staticClass:"node-default",class:e.nodeClass,style:e.nodeStyle,on:{dblclick:e.setNodeActive,click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.mouseLeftClick(t)}}},[e.hasIssues?s("div",{staticClass:"node-info-icon node-issues"},[s("el-tooltip",{attrs:{placement:"top",effect:"light"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.nodeIssues)},slot:"content"}),s("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):s("el-badge",{staticClass:"node-info-icon data-count",attrs:{hidden:0===e.workflowDataItems,value:e.workflowDataItems}}),s("div",{staticClass:"node-executing-info",attrs:{title:"Node is executing"}},[s("font-awesome-icon",{attrs:{icon:"sync-alt",spin:""}})],1),e.isReadOnly?e._e():s("div",{staticClass:"node-options"},[s("div",{staticClass:"option",attrs:{title:"Delete Node"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.stopPropagation(),"button"in t&&0!==t.button?null:e.deleteNode(t))}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1),s("div",{staticClass:"option",attrs:{title:"Activate/Deactivate Node"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.stopPropagation(),"button"in t&&0!==t.button?null:e.disableNode(t))}}},[s("font-awesome-icon",{attrs:{icon:e.nodeDisabledIcon}})],1),s("div",{staticClass:"option",attrs:{title:"Duplicate Node"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.stopPropagation(),"button"in t&&0!==t.button?null:e.duplicateNode(t))}}},[s("font-awesome-icon",{attrs:{icon:"clone"}})],1),e.isReadOnly?e._e():s("div",{staticClass:"option touch",attrs:{title:"Edit Node"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.stopPropagation(),"button"in t&&0!==t.button?null:e.setNodeActive(t))}}},[s("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"cog"}})],1),e.isReadOnly||e.workflowRunning?e._e():s("div",{staticClass:"option",attrs:{title:"Execute Node"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.stopPropagation(),"button"in t&&0!==t.button?null:e.executeNode(t))}}},[s("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"play-circle"}})],1)]),s("NodeIcon",{staticClass:"node-icon",style:e.nodeIconStyle,attrs:{nodeType:e.nodeType,size:"60"}})],1),s("div",{staticClass:"node-description"},[s("div",{staticClass:"node-name",attrs:{title:e.data.name}},[e._v("\n\t\t\t"+e._s(e.data.name)+"\n\t\t")]),void 0!==e.nodeSubtitle?s("div",{staticClass:"node-subtitle",attrs:{title:e.nodeSubtitle}},[e._v("\n\t\t\t"+e._s(e.nodeSubtitle)+"\n\t\t")]):e._e()])])},jt=[];const Ft=Object(C["a"])(qe).extend({mounted(){null!==this.data&&this.__addNode(this.data)},data(){return{}},computed:{data(){return this.$store.getters.nodeByName(this.name)},hasIssues(){return!(void 0===this.data.issues||!Object.keys(this.data.issues).length)},isMacOs(){return/(ipad|iphone|ipod|mac)/i.test(navigator.platform)},nodeName(){return ze["c"]+this.nodeIndex},nodeIndex(){return this.$store.getters.getNodeIndex(this.data.name).toString()},nodePosition(){const e={left:this.data.position[0]+"px",top:this.data.position[1]+"px"};return e},nodeStyle(){const e={"border-color":this.data.color};return e}},props:["name","nodeId","instance","isReadOnly"],methods:{__addNode(e){let t=this.$store.getters.nodeType(e.type);const s={main:{input:{uuid:"-input",maxConnections:-1,endpoint:"Rectangle",endpointStyle:{width:t&&t.outputs.length>2?9:10,height:t&&t.outputs.length>2?18:24,fill:"#777",stroke:"#777",lineWidth:0},dragAllowedWhenFull:!0},output:{uuid:"-output",maxConnections:-1,endpoint:"Dot",endpointStyle:{radius:t&&t.outputs.length>2?7:11,fill:"#555",outlineStroke:"none"},dragAllowedWhenFull:!0}}};t||(t=this.$store.getters.nodeType("n8n-nodes-base.noOp"));const o={input:{1:["Left"],2:[[0,.3,-1,0],[0,.7,-1,0]],3:[[0,.25,-1,0],[0,.5,-1,0],[0,.75,-1,0]],4:[[0,.2,-1,0],[0,.4,-1,0],[0,.6,-1,0],[0,.8,-1,0]]},output:{1:["Right"],2:[[1,.3,1,0],[1,.7,1,0]],3:[[1,.25,1,0],[1,.5,1,0],[1,.75,1,0]],4:[[1,.2,1,0],[1,.4,1,0],[1,.6,1,0],[1,.8,1,0]]}};let i,n,a,r,l={};t.inputs.forEach(e=>{n=s[e].input,l.hasOwnProperty(e)?l[e]++:l[e]=0,i=l[e],a=o.input[t.inputs.length][i],r={uuid:""+this.nodeIndex+n.uuid+i,anchor:a,maxConnections:n.maxConnections,endpoint:n.endpoint,endpointStyle:n.endpointStyle,isSource:!1,isTarget:!this.isReadOnly,parameters:{nodeIndex:this.nodeIndex,type:e,index:i},dragAllowedWhenFull:n.dragAllowedWhenFull,dropOptions:{tolerance:"touch",hoverClass:"dropHover"}},t.inputNames&&(r.overlays=[["Label",{id:"input-name-label",location:[-2,.5],label:t.inputNames[i],cssClass:"node-input-endpoint-label",visible:!0}]]),this.instance.addEndpoint(this.nodeName,r)}),l={},t.outputs.forEach(e=>{n=s[e].output,l.hasOwnProperty(e)?l[e]++:l[e]=0,i=l[e],a=o.output[t.outputs.length][i],r={uuid:""+this.nodeIndex+n.uuid+i,anchor:a,maxConnections:n.maxConnections,endpoint:n.endpoint,endpointStyle:n.endpointStyle,isSource:!this.isReadOnly,isTarget:!1,parameters:{nodeIndex:this.nodeIndex,type:e,index:i},dragAllowedWhenFull:n.dragAllowedWhenFull,dragProxy:["Rectangle",{width:1,height:1,strokeWidth:0}]},t.outputNames&&(r.overlays=[["Label",{id:"output-name-label",location:[1.75,.5],label:t.outputNames[i],cssClass:"node-output-endpoint-label",visible:!0}]]),this.instance.addEndpoint(this.nodeName,r)}),this.instance.draggable(this.nodeName,{grid:[10,10],start:e=>!0!==this.isReadOnly&&(e.e&&!this.$store.getters.isNodeSelected(this.data.name)&&(this.instance.clearDragSelection(),this.$store.commit("resetSelectedNodes")),this.$store.commit("addActiveAction","dragActive"),!0),stop:e=>{if(this.$store.getters.isActionActive("dragActive")){const e=this.$store.getters.getSelectedNodes.slice(),t=e.map(e=>e.name);let s;t.includes(this.data.name)||e.push(this.data),e.forEach(e=>{const t="node-"+this.getNodeIndex(e.name),o=document.getElementById(t);if(null===o)return;s=[parseInt(o.style.left.slice(0,-2),10),parseInt(o.style.top.slice(0,-2),10)];const i={name:e.name,properties:{position:s}};this.$store.commit("updateNodeProperties",i)})}},filter:".node-description, .node-description .node-name, .node-description .node-subtitle"})},isCtrlKeyPressed(e){return this.isMacOs?e.metaKey:e.ctrlKey},mouseLeftClick(e){this.$store.getters.isActionActive("dragActive")?this.$store.commit("removeActiveAction","dragActive"):(!1===this.isCtrlKeyPressed(e)&&this.$emit("deselectAllNodes"),this.$store.getters.isNodeSelected(this.data.name)?this.$emit("deselectNode",this.name):this.$emit("nodeSelected",this.name))}}});var Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-icon-wrapper",style:e.iconStyleData},[null!==e.nodeIconData?s("div",{staticClass:"icon"},["file"===e.nodeIconData.type?s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.nodeIconData.path}}):"fa"===e.nodeIconData.type?s("font-awesome-icon",{attrs:{icon:e.nodeIconData.path}}):e._e()],1):s("div",{staticClass:"node-icon-placeholder"},[e._v("\n\t\t"+e._s(null!==e.nodeType?e.nodeType.displayName.charAt(0):"?")+"\n\t")])])},Ut=[],zt=o["default"].extend({name:"NodeIcon",props:["nodeType","size"],computed:{iconStyleData(){if(!this.size)return{};const e=parseInt(this.size,10);return{width:e+"px",height:e+"px","font-size":Math.floor(.6*parseInt(this.size,10))+"px","line-height":e+"px","border-radius":Math.ceil(e/2)+"px"}},nodeIconData(){if(null===this.nodeType)return null;const e=this.$store.getters.getRestUrl;if(this.nodeType.icon){let t,s;[t,s]=this.nodeType.icon.split(":");const o={type:t,path:s};return"file"===t&&(o.path=e+"/node-icon/"+this.nodeType.name),o}return null}}}),qt=zt,Jt=(s("4a15"),Object(u["a"])(qt,Bt,Ut,!1,null,null,null)),Ht=Jt.exports,Kt=Object(C["a"])(Ft,x["a"]).extend({name:"Node",components:{NodeIcon:Ht},computed:{workflowDataItems(){const e=this.$store.getters.getWorkflowResultDataByNodeName(this.data.name);return null===e?0:e.length},isExecuting(){return this.$store.getters.executingNode===this.data.name},nodeIconStyle(){return{color:this.data.disabled?"#ccc":this.data.color}},nodeType(){return this.$store.getters.nodeType(this.data.type)},nodeClass(){const e=[];return this.data.disabled&&e.push("disabled"),this.isExecuting&&e.push("executing"),0!==this.workflowDataItems&&e.push("has-data"),this.hasIssues&&e.push("has-issues"),this.isTouchDevice&&e.push("is-touch-device"),e},nodeIssues(){if(void 0===this.data.issues)return"";const e=K["NodeHelpers"].nodeIssuesToString(this.data.issues,this.data);return"Issues:<br />&nbsp;&nbsp;- "+e.join("<br />&nbsp;&nbsp;- ")},nodeDisabledIcon(){return!1===this.data.disabled?"pause":"play"},nodeSubtitle(){if(this.data.notesInFlow)return this.data.notes;if(null!==this.nodeType&&void 0!==this.nodeType.subtitle)return this.workflow.getSimpleParameterValue(this.data,this.nodeType.subtitle);if(void 0!==this.data.parameters.operation){const e=this.data.parameters.operation;if(null===this.nodeType)return e;const t=this.nodeType.properties.find(e=>"operation"===e.name);if(void 0===t)return e;if(void 0===t.options)return e;const s=t.options.find(e=>e.value===this.data.parameters.operation);return void 0===s?e:s.name}},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},workflow(){return this.getWorkflow()}},data(){return{isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints}},methods:{disableNode(){this.disableNodes([this.data])},executeNode(){this.$emit("runWorkflow",this.data.name)},deleteNode(){o["default"].nextTick(()=>{this.$emit("removeNode",this.data.name)})},duplicateNode(){o["default"].nextTick(()=>{this.$emit("duplicateNode",this.data.name)})},setNodeActive(){this.$store.commit("setActiveNode",this.data.name)}}}),Yt=Kt,Gt=(s("470f"),s("3a3b"),Object(u["a"])(Yt,Mt,jt,!1,null,null,null)),Zt=Gt.exports,Xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-creator-wrapper"},[s("transition",{attrs:{name:"el-zoom-in-top"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"node-creator"},[s("div",{staticClass:"close-button clickable close-on-click",attrs:{title:"Close"},on:{click:e.closeCreator}},[s("i",{staticClass:"el-icon-close close-on-click"})]),s("div",{staticClass:"header"},[e._v("\n\t\t\t\tCreate Node\n\t\t\t")]),e.active?s("node-create-list",{ref:"list",on:{nodeTypeSelected:e.nodeTypeSelected}}):e._e()],1)])],1)},Qt=[],es=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"input-wrapper"},[s("el-input",{ref:"inputField",attrs:{placeholder:"Type to filter...",size:"small",type:"text","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keydown:function(t){return e.nodeFilterKeyDown(t)}},model:{value:e.nodeFilter,callback:function(t){e.nodeFilter=t},expression:"nodeFilter"}})],1),s("div",{staticClass:"type-selector"},[s("el-tabs",{attrs:{stretch:""},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}},[s("el-tab-pane",{attrs:{label:"Regular",name:"Regular"}}),s("el-tab-pane",{attrs:{label:"Trigger",name:"Trigger"}}),s("el-tab-pane",{attrs:{label:"All",name:"All"}})],1)],1),s("div",{staticClass:"node-create-list-wrapper"},[s("div",{staticClass:"node-create-list"},[0===e.filteredNodeTypes.length?s("div",{staticClass:"no-results"},[e._v("\n\t\t\t\tNo node found which matches active filter!\n\t\t\t")]):e._e(),e._l(e.filteredNodeTypes,(function(t,o){return s("node-create-item",{key:t.name,attrs:{active:o===e.activeNodeTypeIndex,nodeType:t},on:{nodeTypeSelected:e.nodeTypeSelected}})}))],2)])])},ts=[],ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-item clickable",class:{active:e.active},on:{click:function(t){return e.nodeTypeSelected(e.nodeType)}}},[s("NodeIcon",{staticClass:"node-icon",style:e.nodeIconStyle,attrs:{nodeType:e.nodeType}}),s("div",{staticClass:"name"},[e._v("\n\t\t"+e._s(e.nodeType.displayName)+"\n\t")]),s("div",{staticClass:"description"},[e._v("\n\t\t"+e._s(e.nodeType.description)+"\n\t")])],1)},os=[],is=o["default"].extend({name:"NodeCreateItem",components:{NodeIcon:Ht},props:["active","filter","nodeType"],computed:{nodeIconStyle(){return{color:this.nodeType.defaults.color}}},methods:{nodeTypeSelected(e){this.$emit("nodeTypeSelected",e.name)}}}),ns=is,as=(s("7b46"),Object(u["a"])(ns,ss,os,!1,null,"158c0be6",null)),rs=as.exports,ls=o["default"].extend({name:"NodeCreateList",components:{NodeCreateItem:rs},data(){return{activeNodeTypeIndex:0,nodeFilter:"",selectedType:"Regular"}},computed:{nodeTypes(){return this.$store.getters.allNodeTypes},filteredNodeTypes(){const e=this.nodeFilter.toLowerCase(),t=this.$store.getters.allNodeTypes,s=t.filter(t=>{if(e&&-1===t.displayName.toLowerCase().indexOf(e))return!1;if("All"!==this.selectedType){if("Trigger"===this.selectedType&&!t.group.includes("trigger"))return!1;if("Regular"===this.selectedType&&t.group.includes("trigger"))return!1}return!0});let o,i;return s.sort((e,t)=>(o=e.displayName.toLowerCase(),i=t.displayName.toLowerCase(),o<i?-1:o>i?1:0)),s}},watch:{nodeFilter(e,t){this.activeNodeTypeIndex=0}},methods:{nodeFilterKeyDown(e){const t=this.filteredNodeTypes[this.activeNodeTypeIndex];"ArrowDown"===e.key?(this.activeNodeTypeIndex++,this.activeNodeTypeIndex=Math.min(this.activeNodeTypeIndex,this.filteredNodeTypes.length-1)):"ArrowUp"===e.key?(this.activeNodeTypeIndex--,this.activeNodeTypeIndex=Math.max(this.activeNodeTypeIndex,0)):"Enter"===e.key&&t&&this.nodeTypeSelected(t.name),["Escape","Tab"].includes(e.key)||e.stopPropagation()},nodeTypeSelected(e){this.$emit("nodeTypeSelected",e)}}}),ds=ls,cs=(s("e596"),Object(u["a"])(ds,es,ts,!1,null,"13b5470e",null)),us=cs.exports,ps=o["default"].extend({name:"NodeCreator",components:{NodeCreateList:us},props:["active"],data(){return{}},watch:{active(e,t){!0===e&&setTimeout(()=>{this.$refs.list&&this.$refs.list.$refs.inputField&&this.$refs.list.$refs.inputField.focus()})}},methods:{closeCreator(){this.$emit("closeNodeCreator")},nodeTypeSelected(e){this.$emit("nodeTypeSelected",e)}}}),hs=ps,ms=(s("a46f"),Object(u["a"])(hs,Xt,Qt,!1,null,"99ab4b7a",null)),fs=ms.exports,ws=Object(C["a"])(H,y["a"],Je,He,k["a"],b["a"],x["a"],Ve).extend({name:"NodeView",components:{DataDisplay:Lt,Node:Zt,NodeCreator:fs,NodeSettings:bt,RunData:It},errorCaptured:(e,t,s)=>{console.error("errorCaptured"),console.error(e)},watch:{$route:"initView",activeNode(){this.createNodeActive=!1}},computed:{activeNode(){return this.$store.getters.activeNode},executionWaitingForWebhook(){return this.$store.getters.executionWaitingForWebhook},lastSelectedNode(){return this.$store.getters.lastSelectedNode},connections(){return this.$store.getters.allConnections},nodes(){return this.$store.getters.allNodes},runButtonText(){return!1===this.workflowRunning?"Execute Workflow":!0===this.executionWaitingForWebhook?"Waiting for Webhook-Call":"Executing Workflow"},workflowStyle(){const e=this.$store.getters.getNodeViewOffsetPosition;return{left:e[0]+"px",top:e[1]+"px"}},backgroundStyle(){const e=this.$store.getters.getNodeViewOffsetPosition;return{transform:`scale(${this.nodeViewScale})`,"background-position":`right ${-e[0]}px bottom ${-e[1]}px`}},workflowClasses(){const e=[];return!0===this.ctrlKeyPressed&&(!0===this.$store.getters.isNodeViewMoveInProgress?e.push("move-in-process"):e.push("move-active")),(this.selectActive||!0===this.ctrlKeyPressed)&&e.push("do-not-select"),e},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},data(){return{createNodeActive:!1,instance:Ue["jsPlumb"].getInstance(),lastClickPosition:[450,450],nodeViewScale:1,ctrlKeyPressed:!1,debouncedFunctions:[],stopExecutionInProgress:!1}},beforeDestroy(){document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp)},methods:{async callDebounced(...e){const t=e.shift(),s=e.shift();void 0===this.debouncedFunctions[t]&&(this.debouncedFunctions[t]=Object(J["debounce"])(this[t],s,{leading:!0})),await this.debouncedFunctions[t].apply(this,e)},clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},openNodeCreator(){this.createNodeActive=!0},async openExecution(e){let t;this.resetWorkspace();try{t=await this.restApi().getExecution(e)}catch(s){return void this.$showError(s,"Problem loading execution","There was a problem opening the execution:")}if(void 0===t)throw new Error(`Execution with id "${e}" could not be found!`);this.$store.commit("setWorkflowName",t.workflowData.name),this.$store.commit("setWorkflowId",ze["d"]),this.$store.commit("setWorkflowExecutionData",t),await this.addNodes(JSON.parse(JSON.stringify(t.workflowData.nodes)),JSON.parse(JSON.stringify(t.workflowData.connections)))},async openWorkflow(e){let t;this.resetWorkspace();try{t=await this.restApi().getWorkflow(e)}catch(s){return void this.$showError(s,"Problem opening workflow","There was a problem opening the workflow:")}if(void 0===t)throw new Error(`Workflow with id "${e}" could not be found!`);this.$store.commit("setActive",t.active||!1),this.$store.commit("setWorkflowId",e),this.$store.commit("setWorkflowName",t.name),this.$store.commit("setWorkflowSettings",t.settings||{}),await this.addNodes(t.nodes,t.connections)},mouseDown(e){const t=this.$store.getters.getNodeViewOffsetPosition;this.lastClickPosition[0]=e.pageX-t[0],this.lastClickPosition[1]=e.pageY-t[1],this.mouseDownMouseSelect(e),this.mouseDownMoveWorkflow(e),this.createNodeActive=!1},mouseUp(e){this.mouseUpMouseSelect(e),this.mouseUpMoveWorkflow(e)},wheelScroll(e){this.wheelMoveWorkflow(e)},keyUp(e){e.key===this.controlKeyCode&&(this.ctrlKeyPressed=!1)},async keyDown(e){const t=e.path||e.composedPath&&e.composedPath();for(let s=0;s<t.length;s++)if(t[s].className&&"string"===typeof t[s].className&&(t[s].className.includes("el-message-box")||t[s].className.includes("ignore-key-press")))return;if("d"===e.key)this.callDebounced("deactivateSelectedNode",350);else if("Delete"===e.key)e.stopPropagation(),e.preventDefault(),this.callDebounced("deleteSelectedNodes",500);else if("Escape"===e.key)this.createNodeActive=!1,this.$store.commit("setActiveNode",null);else if("Tab"===e.key)this.createNodeActive=!this.createNodeActive&&!this.isReadOnly;else if(e.key===this.controlKeyCode)this.ctrlKeyPressed=!0;else if("F2"===e.key){const e=this.lastSelectedNode;null!==e&&this.callDebounced("renameNodePrompt",1500,e.name)}else if("+"===e.key)this.callDebounced("setZoom",300,"in");else if("-"===e.key)this.callDebounced("setZoom",300,"out");else if("0"===e.key&&!0===this.isCtrlKeyPressed(e))this.callDebounced("setZoom",300,"reset");else if("a"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.callDebounced("selectAllNodes",1e3);else if("c"===e.key&&!0===this.isCtrlKeyPressed(e))this.callDebounced("copySelectedNodes",1e3);else if("x"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.callDebounced("cutSelectedNodes",1e3);else if("o"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.$root.$emit("openWorkflowDialog");else if("n"===e.key&&!0===this.isCtrlKeyPressed(e)&&!0===e.altKey)e.stopPropagation(),e.preventDefault(),this.$router.push({name:"NodeViewNew"}),this.$showMessage({title:"Created",message:"A new workflow got created!",type:"success"});else if("s"===e.key&&!0===this.isCtrlKeyPressed(e))e.stopPropagation(),e.preventDefault(),this.callDebounced("saveCurrentWorkflow",1e3);else if("Enter"===e.key){const e=this.$store.getters.lastSelectedNode;null!==e&&this.$store.commit("setActiveNode",e.name)}else if("ArrowRight"===e.key&&!0===e.shiftKey)e.stopPropagation(),e.preventDefault(),this.callDebounced("selectDownstreamNodes",1e3);else if("ArrowRight"===e.key){const e=this.$store.getters.lastSelectedNode;if(null===e)return;const t=this.$store.getters.connectionsByNodeName(e.name);if(void 0===t.main||0===t.main.length)return;this.callDebounced("nodeSelectedByName",100,t.main[0][0].node,!1,!0)}else if("ArrowLeft"===e.key&&!0===e.shiftKey)e.stopPropagation(),e.preventDefault(),this.callDebounced("selectUpstreamNodes",1e3);else if("ArrowLeft"===e.key){const e=this.$store.getters.lastSelectedNode;if(null===e)return;const t=this.getWorkflow();if(!t.connectionsByDestinationNode.hasOwnProperty(e.name))return;const s=t.connectionsByDestinationNode[e.name];if(void 0===s.main||0===s.main.length)return;this.callDebounced("nodeSelectedByName",100,s.main[0][0].node,!1,!0)}else if(["ArrowUp","ArrowDown"].includes(e.key)){const t=this.$store.getters.lastSelectedNode;if(null===t)return;const s=this.getWorkflow();if(!s.connectionsByDestinationNode.hasOwnProperty(t.name))return;const o=s.connectionsByDestinationNode[t.name];if(void 0===o.main||0===o.main.length)return;const i=o.main[0][0].node,n=this.$store.getters.connectionsByNodeName(i);if(void 0===n.main||0===n.main.length)return;let a,r="ArrowUp"===e.key?-99999999:99999999,l=null;for(const d of n.main)for(const s of d)s.node!==t.name&&(a=this.$store.getters.nodeByName(s.node),"ArrowUp"===e.key?a.position[1]<=t.position[1]&&a.position[1]>r&&(l=a.name,r=a.position[1]):a.position[1]>=t.position[1]&&a.position[1]<r&&(l=a.name,r=a.position[1]));null!==l&&this.callDebounced("nodeSelectedByName",100,l,!1,!0)}},deactivateSelectedNode(){!1!==this.editAllowedCheck()&&this.disableNodes(this.$store.getters.getSelectedNodes)},deleteSelectedNodes(){const e=this.$store.getters.getSelectedNodes.map(e=>e.name);e.forEach(e=>{this.removeNode(e)})},selectAllNodes(){this.nodes.forEach(e=>{this.nodeSelectedByName(e.name)})},selectUpstreamNodes(){const e=this.$store.getters.lastSelectedNode;if(null===e)return;this.deselectAllNodes();const t=this.getWorkflow();for(const s of t.getParentNodes(e.name))this.nodeSelectedByName(s);this.nodeSelectedByName(e.name)},selectDownstreamNodes(){const e=this.$store.getters.lastSelectedNode;if(null===e)return;this.deselectAllNodes();const t=this.getWorkflow();for(const s of t.getChildNodes(e.name))this.nodeSelectedByName(s);this.nodeSelectedByName(e.name)},cutSelectedNodes(){this.copySelectedNodes(),this.deleteSelectedNodes()},copySelectedNodes(){this.getSelectedNodesToSave().then(e=>{const t=JSON.stringify(e,null,2);this.copyToClipboard(t)})},setZoom(e){"in"===e?this.nodeViewScale*=1.25:"out"===e?this.nodeViewScale/=1.25:this.nodeViewScale=1;const t=this.nodeViewScale,s=this.instance.getContainer(),o=["webkit","moz","ms","o"],i="scale("+t+")";for(let n=0;n<o.length;n++)s.style[o[n]+"Transform"]=i;s.style["transform"]=i,this.instance.setZoom(t)},async stopExecution(){const e=this.$store.getters.activeExecutionId;if(null!==e){try{this.stopExecutionInProgress=!0;await this.restApi().stopCurrentExecution(e);this.$showMessage({title:"Execution stopped",message:`The execution with the id "${e}" got stopped!`,type:"success"})}catch(t){this.$showError(t,"Problem stopping execution","There was a problem stopping the execuction:")}this.stopExecutionInProgress=!1}},async stopWaitingForWebhook(){let e;try{e=await this.restApi().removeTestWebhook(this.$store.getters.workflowId)}catch(t){return void this.$showError(t,"Problem deleting the test-webhook","There was a problem deleting webhook:")}this.$showMessage({title:"Webhook got deleted",message:"The webhook got deleted!",type:"success"})},async receivedCopyPasteData(e){let t;if(e.match(/^http[s]?:\/\/.*\.json$/i)){if(!1===this.editAllowedCheck())return;const s=await this.confirmMessage(`Import workflow from this URL:<br /><i>${e}<i>`,"Import Workflow from URL?","warning","Yes, import!");if(!1===s)return;if(t=await this.getWorkflowDataFromUrl(e),void 0===t)return}else try{if(t=JSON.parse(e),!1===this.editAllowedCheck())return}catch(s){return}return this.importWorkflowData(t)},async getWorkflowDataFromUrl(e){let t;this.startLoading();try{t=await this.restApi().getWorkflowFromUrl(e)}catch(s){return this.stopLoading(),void this.$showError(s,"Problem loading workflow","There was a problem loading the workflow data from URL:")}return this.stopLoading(),t},async importWorkflowData(e){if(e.hasOwnProperty("nodes")&&e.hasOwnProperty("connections"))try{this.deselectAllNodes(),this.updateNodePositions(e,this.getNewNodePosition());const t=await this.addNodesToWorkflow(e);setTimeout(()=>{t.nodes.forEach(e=>{this.nodeSelectedByName(e.name)})})}catch(t){this.$showError(t,"Problem importing workflow","There was a problem importing workflow data:")}},closeNodeCreator(){this.createNodeActive=!1},nodeTypeSelected(e){this.addNodeButton(e),this.createNodeActive=!1},nodeDeselectedByName(e){const t=this.$store.getters.nodeByName(e);t&&this.nodeDeselected(t)},nodeSelectedByName(e,t=!1,s){!0===s&&this.deselectAllNodes();const o=this.$store.getters.nodeByName(e);o&&this.nodeSelected(o),this.$store.commit("setLastSelectedNode",o.name),this.$store.commit("setLastSelectedNodeOutputIndex",null),!0===t&&this.$store.commit("setActiveNode",o.name)},canUsePosition(e,t){return!(Math.abs(e[0]-t[0])<=100&&Math.abs(e[1]-t[1])<=50)},getNewNodePosition(e,t){void 0===e&&(e=this.lastClickPosition),e=e.slice(),t||(t=[50,50]);let s,o,i=!1;do{for(i=!1,s=0;s<this.nodes.length;s++)if(o=this.nodes[s],!this.canUsePosition(o.position,e)){i=!0;break}!0===i&&(e[0]+=t[0],e[1]+=t[1])}while(!0===i);return e},getUniqueNodeName(e,t){t=t||[];const s=this.$store.getters.allNodes.map(e=>e.name);if(!s.includes(e)&&!t.includes(e))return e;const o=e.match(/(.*[a-zA-Z])(\d*)/);let i,n,a,r,l=1;null===o?(l=parseInt(e,10),n="",r=n+l):([i,n,a]=o,""!==a&&(l=parseInt(a,10)),r=n);while(s.includes(r)||t.includes(r))r=n+l++;return r},showMaxNodeTypeError(e){const t=e.maxNodes;this.$showMessage({title:"Could not create node!",message:`Node can not be created because in a workflow max. ${t} ${1===t?"node":"nodes"} of type "${e.displayName}" ${1===t?"is":"are"} allowed!`,type:"error",duration:0})},async addNodeButton(e){if(!1===this.editAllowedCheck())return;const t=this.$store.getters.nodeType(e);if(null===t)return void this.$showMessage({title:"Could not create node!",message:`Node of type "${e}" could not be created as it is not known.`,type:"error"});if(void 0!==t.maxNodes&&this.getNodeTypeCount(e)>=t.maxNodes)return void this.showMaxNodeTypeError(t);const s={name:t.defaults.name,type:t.name,typeVersion:t.version,position:[0,0],parameters:{}},i=this.$store.getters.lastSelectedNode,n=this.$store.getters.lastSelectedNodeOutputIndex;s.position=i?this.getNewNodePosition([i.position[0]+150,i.position[1]],[100,0]):this.getNewNodePosition(),s.name=this.getUniqueNodeName(s.name),await this.addNodes([s]),this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(s.name,!0)});const a=n||0;if(i){await o["default"].nextTick();let e=this.$store.getters.connectionsByNodeName(i.name);e=JSON.parse(JSON.stringify(e));for(const o of Object.keys(e))a<=e[o].length&&e[o][a].forEach(e=>{const t=[{node:i.name,type:o,index:a},e];this.__removeConnection(t,!0);const n=[{node:s.name,type:o,index:0},e];this.__addConnection(n,!0)});const t=[{node:i.name,type:"main",index:a},{node:s.name,type:"main",index:0}];this.__addConnection(t,!0)}},initNodeView(){const e=[];!1===this.isReadOnly&&e.push.apply(e,[["Arrow",{location:1,foldback:.7,width:12}],["Label",{id:"drop-add-node",label:"Drop connection<br />to create node",cssClass:"drop-add-node-label",location:.5}]]),this.instance.importDefaults({Connector:["Bezier",{curviness:40}],Endpoint:["Dot",{radius:5}],DragOptions:{cursor:"pointer",zIndex:5e3},PaintStyle:{strokeWidth:2,stroke:"#334455"},EndpointStyle:{radius:9,fill:"#acd",stroke:"red"},HoverPaintStyle:{stroke:"#ff6d5a",lineWidth:4},EndpointHoverStyle:{fill:"#ff6d5a",stroke:"#acd"},ConnectionOverlays:e,Container:"#node-view"}),this.instance.bind("connectionAborted",e=>{const t=this.$store.getters.getNodeNameByIndex(e.sourceId.slice(ze["c"].length));this.$store.commit("setLastSelectedNode",t);const s=e.getParameters();this.$store.commit("setLastSelectedNodeOutputIndex",s.index),this.createNodeActive=!0}),this.instance.bind("connection",e=>{const t=e.sourceEndpoint.getParameters(),s=e.targetEndpoint.getParameters(),o=this.$store.getters.getNodeNameByIndex(t.nodeIndex),i=this.$store.getters.getNodeNameByIndex(s.nodeIndex),n=this.$store.getters.nodeByName(o),a=this.$store.getters.nodeByName(i);if(e.sourceEndpoint.anchor.lastReturnValue[0]>=e.targetEndpoint.anchor.lastReturnValue[0]?(e.connection.setConnector(["Flowchart",{cornerRadius:15}]),e.connection.addOverlay(["Arrow",{location:.55,foldback:.7,width:12}]),e.connection.setPaintStyle({strokeWidth:2,stroke:"#334455"})):Math.abs(e.sourceEndpoint.anchor.lastReturnValue[1]-e.targetEndpoint.anchor.lastReturnValue[1])<30&&e.connection.setConnector(["Straight"]),e.connection.removeOverlay("drop-add-node"),!1===this.isReadOnly){let t;e.connection.bind("mouseover",s=>{void 0!==t&&clearTimeout(t);const o=e.connection.getOverlay("remove-connection");o.setVisible(!0)}),e.connection.bind("mouseout",s=>{t=setTimeout(()=>{const s=e.connection.getOverlay("remove-connection");s.setVisible(!1),t=void 0},500)}),e.connection.addOverlay(["Label",{id:"remove-connection",label:'<span class="delete-connection clickable" title="Delete Connection">x</span>',cssClass:"remove-connection-label",visible:!1,events:{mousedown:()=>{this.__removeConnectionByConnectionInfo(e,!0)}}}])}const r=this.$store.getters.nodeType(a.type);if(void 0!==r.inputNames)for(const u of r.inputNames){const t=r.inputNames[s.index];e.connection.getOverlay("input-name-label")&&e.connection.removeOverlay("input-name-label"),e.connection.addOverlay(["Label",{id:"input-name-label",label:t,cssClass:"connection-input-name-label",location:.8}])}const l=this.$store.getters.nodeType(n.type);if(void 0!==l.outputNames)for(const u of l.outputNames){const s=l.outputNames[t.index];e.connection.getOverlay("output-name-label")&&e.connection.removeOverlay("output-name-label"),e.connection.addOverlay(["Label",{id:"output-name-label",label:s,cssClass:"connection-output-name-label",location:.2}])}const d=e.connection.endpoints[0].getOverlay("output-name-label");[null,void 0].includes(d)||d.setVisible(!1);const c=e.targetEndpoint.getOverlay("input-name-label");[null,void 0].includes(c)||c.setVisible(!1),this.$store.commit("addConnection",{connection:[{node:o,type:t.type,index:t.index},{node:i,type:s.type,index:s.index}]})});const t=(e,t,s)=>{if(void 0!==e&&e.connections.length===s){const t=e.getOverlay("output-name-label");[null,void 0].includes(t)||t.setVisible(!0)}if(void 0!==t&&t.connections.length===s){const e=t.getOverlay("input-name-label");[null,void 0].includes(e)||e.setVisible(!0)}};this.instance.bind("connectionMoved",e=>{t(e.originalSourceEndpoint,e.originalTargetEndpoint,0);const s=e.originalSourceEndpoint.getParameters(),o=e.originalTargetEndpoint.getParameters(),i=[{node:this.$store.getters.getNodeNameByIndex(s.nodeIndex),type:s.type,index:s.index},{node:this.$store.getters.getNodeNameByIndex(o.nodeIndex),type:o.type,index:o.index}];this.__removeConnection(i,!1),e.connection.removeOverlays()}),this.instance.bind("connectionDetached",e=>{t(e.sourceEndpoint,e.targetEndpoint,1),e.connection.removeOverlays(),this.__removeConnectionByConnectionInfo(e,!1)})},async newWorkflow(){await this.resetWorkspace();const e=[{name:"Start",type:"n8n-nodes-base.start",typeVersion:1,position:[250,300],parameters:{}}];await this.addNodes(e)},async initView(){if("workflowSave"===this.$route.params.action)return Promise.resolve();if("ExecutionById"===this.$route.name){const e=this.$route.params.id;await this.openExecution(e)}else{let e=null;this.$route.params.name&&(e=this.$route.params.name),null!==e?await this.openWorkflow(e):await this.newWorkflow()}document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp)},__addConnection(e,t=!1){if(!0===t){const t=[`${this.getNodeIndex(e[0].node)}-output${e[0].index}`,`${this.getNodeIndex(e[1].node)}-input${e[1].index}`];this.instance.connect({uuids:t,detachable:!this.isReadOnly})}else this.$store.commit("addConnection",{connection:e})},__removeConnection(e,t=!1){if(!0===t){const t=this.instance.getConnections({source:ze["c"]+this.getNodeIndex(e[0].node),target:ze["c"]+this.getNodeIndex(e[1].node)});t.forEach(e=>{this.instance.deleteConnection(e)})}this.$store.commit("removeConnection",{connection:e})},__removeConnectionByConnectionInfo(e,t=!1){const s=e.sourceEndpoint.getParameters(),o=e.targetEndpoint.getParameters(),i=[{node:this.$store.getters.getNodeNameByIndex(s.nodeIndex),type:s.type,index:s.index},{node:this.$store.getters.getNodeNameByIndex(o.nodeIndex),type:o.type,index:o.index}];this.__removeConnection(i,t)},async duplicateNode(e){if(!1===this.editAllowedCheck())return;const t=this.$store.getters.nodeByName(e),s=this.$store.getters.nodeType(t.type);if(void 0!==s.maxNodes&&this.getNodeTypeCount(t.type)>=s.maxNodes)return void this.showMaxNodeTypeError(s);const o=JSON.parse(JSON.stringify(this.getNodeDataToSave(t)));o.name=this.getUniqueNodeName(o.name),o.position=this.getNewNodePosition([t.position[0],t.position[1]+150],[0,150]),await this.addNodes([o]),this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(o.name,!0)})},removeNode(e){if(!1===this.editAllowedCheck())return;const t=this.$store.getters.nodeByName(e),s=["n8n-nodes-base.start"];if(s.includes(t.type)){let e=!1;for(const o of this.nodes)if(o.name!==t.name&&s.includes(o.type)){e=!0;break}if(!1===e)return}const o=this.$store.getters.getNodeIndex(e),i="node-"+o;this.instance.setSuspendDrawing(!0),this.instance.removeAllEndpoints(i),this.instance.destroyDraggable(i),this.$store.commit("removeAllNodeConnection",t),this.$store.commit("removeNode",t),this.instance.setSuspendDrawing(!1,!0),this.$store.commit("removeNodeFromSelection",t),-1!==o&&this.$store.commit("setNodeIndex",{index:o,name:null})},valueChanged(e){"name"===e.name&&e.oldValue&&this.renameNode(e.oldValue,e.value)},async renameNodePrompt(e){try{const t=this.$prompt("New Name:",`Rename Node: "${e}"`,{customClass:"rename-prompt",confirmButtonText:"Rename",cancelButtonText:"Cancel",inputErrorMessage:"Invalid Name",inputValue:e});await o["default"].nextTick();const s=document.querySelector(".rename-prompt .el-input__inner");s&&(s.focus(),s.select());const i=await t;this.renameNode(e,i.value)}catch(t){}},async renameNode(e,t){if(e===t)return;t=this.getUniqueNodeName(t);const s=this.getWorkflow(void 0,void 0,!0);s.renameNode(e,t),this.$store.commit("renameNodeSelectedAndExecution",{old:e,new:t}),this.instance&&this.instance.deleteEveryEndpoint(),this.$store.commit("removeAllConnections"),this.$store.commit("removeAllNodes"),await o["default"].nextTick(),await this.addNodes(Object.values(s.nodes),s.connectionsBySourceNode),this.deselectAllNodes(),this.nodeSelectedByName(t)},async addNodes(e,t){if(!e||!e.length)return;let s,i;if(e.forEach(e=>{if(s=this.$store.getters.nodeType(e.type),e.hasOwnProperty("disabled")||(e.disabled=!1),e.hasOwnProperty("color")||s&&s.defaults.color&&(e.color=s.defaults.color),e.hasOwnProperty("parameters")||(e.parameters={}),null!==s){let o=null;try{o=K["NodeHelpers"].getNodeParameters(s.properties,e.parameters,!0,!1)}catch(t){console.error(`There was a problem loading the node-parameters of node: "${e.name}"`),console.error(t)}e.parameters=null!==o?o:{}}i=this.getNodeIssues(s,e),null!==i&&(e.issues=i),this.$store.commit("addNode",e)}),await o["default"].nextTick(),this.instance.setSuspendDrawing(!0),void 0!==t){let e;for(const s of Object.keys(t))for(const o of Object.keys(t[s]))for(let i=0;i<t[s][o].length;i++)t[s][o][i].forEach(t=>{e=[{node:s,type:o,index:i},{node:t.node,type:t.type,index:t.index}],this.__addConnection(e,!0)})}this.instance.setSuspendDrawing(!1,!0)},async addNodesToWorkflow(e){const t={},s=[];if(!e.nodes)throw new Error("No nodes given to add!");const o=this.getNodeTypesMaxCount();let i,n;const a=[];e.nodes.forEach(e=>{if(void 0!==o[e.type]){if(o[e.type].exist>=o[e.type].max)return void(t[e.name]=o[e.type].nodeNames[0]);o[e.type].exist+=1}i=e.name,n=this.getUniqueNodeName(e.name,s),s.push(n),t[i]=n,a.push(e)});const r={},l=e.connections,d=a.map(e=>e.name);let c,u,p,h,m;for(c of Object.keys(l)){if(!d.includes(c))continue;const e={};for(u of Object.keys(l[c]))for(e[u]=[],p=0;p<l[c][u].length;p++){const t=[];for(h=0;h<l[c][u][p].length;h++){m=l[c][u][p][h],d.includes(m.node)&&t.push(m)}e[u].push(t)}r[c]=e}const f=this.getWorkflow(a,r);for(i in t)i!==t[i]&&f.renameNode(i,t[i]);return await this.addNodes(Object.values(f.nodes),f.connectionsBySourceNode),{nodes:Object.values(f.nodes),connections:f.connectionsBySourceNode}},getSelectedNodesToSave(){const e={nodes:[],connections:{}};let t;const s=[];for(const u of this.$store.getters.getSelectedNodes){try{t=this.getNodeDataToSave(u),s.push(u.name)}catch(c){return Promise.reject(c)}e.nodes.push(t)}let o,i,n,a,r,l,d;return e.nodes.forEach(t=>{if(i=this.$store.getters.connectionsByNodeName(t.name),0!==Object.keys(i).length){for(n of(d={},Object.keys(i)))for(r=0;r<i[n].length;r++){for(o=[],a=0;a<i[n][r].length;a++)l=i[n][r][a],-1!==s.indexOf(l.node)&&o.push(l);o.length&&(d.hasOwnProperty(n)||(d[n]=[]),d[n][r]=o)}Object.keys(d).length&&(e.connections[t.name]=d)}}),Promise.resolve(e)},resetWorkspace(){return this.instance&&this.instance.deleteEveryEndpoint(),!0===this.executionWaitingForWebhook&&this.restApi().removeTestWebhook(this.$store.getters.workflowId).catch(()=>{}),this.$store.commit("removeAllConnections"),this.$store.commit("removeAllNodes"),this.$store.commit("setWorkflowExecutionData",null),this.$store.commit("resetAllNodesIssues"),this.$store.commit("setActive",!1),this.$store.commit("setWorkflowId",ze["d"]),this.$store.commit("setWorkflowName",""),this.$store.commit("setWorkflowSettings",{}),this.$store.commit("setActiveExecutionId",null),this.$store.commit("setExecutingNode",null),this.$store.commit("removeActiveAction","workflowRunning"),this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("resetNodeIndex"),this.$store.commit("resetSelectedNodes"),this.$store.commit("setNodeViewOffsetPosition",[0,0]),Promise.resolve()},async loadActiveWorkflows(){const e=await this.restApi().getActiveWorkflows();this.$store.commit("setActiveWorkflows",e)},async loadSettings(){const e=await this.restApi().getSettings();this.$store.commit("setUrlBaseWebhook",e.urlBaseWebhook),this.$store.commit("setEndpointWebhook",e.endpointWebhook),this.$store.commit("setEndpointWebhookTest",e.endpointWebhookTest),this.$store.commit("setSaveDataErrorExecution",e.saveDataErrorExecution),this.$store.commit("setSaveDataSuccessExecution",e.saveDataSuccessExecution),this.$store.commit("setSaveManualExecutions",e.saveManualExecutions),this.$store.commit("setTimezone",e.timezone),this.$store.commit("setVersionCli",e.versionCli)},async loadNodeTypes(){const e=await this.restApi().getNodeTypes();this.$store.commit("setNodeTypes",e)},async loadCredentialTypes(){const e=await this.restApi().getCredentialTypes();this.$store.commit("setCredentialTypes",e)},async loadCredentials(){const e=await this.restApi().getAllCredentials();this.$store.commit("setCredentials",e)}},async mounted(){this.$root.$on("importWorkflowData",async e=>{await this.importWorkflowData(e.data)}),this.$root.$on("importWorkflowUrl",async e=>{const t=await this.getWorkflowDataFromUrl(e.url);void 0!==t&&await this.importWorkflowData(t)}),this.startLoading();const e=[this.loadActiveWorkflows(),this.loadCredentials(),this.loadCredentialTypes(),this.loadNodeTypes(),this.loadSettings()];try{await Promise.all(e)}catch(t){return void this.$showError(t,"Init Problem","There was a problem loading init data:")}this.instance.ready(async()=>{try{this.initNodeView(),await this.initView()}catch(t){this.$showError(t,"Init Problem","There was a problem initializing the workflow:")}this.stopLoading()})},destroyed(){this.resetWorkspace()}}),gs=ws,vs=(s("ce61"),s("2d96"),Object(u["a"])(gs,Fe,Be,!1,null,"3fd6f0de",null)),ys=vs.exports;o["default"].use(m["a"]);var ks=new m["a"]({mode:"history",base:"/",routes:[{path:"/execution/:id",name:"ExecutionById",components:{default:ys,header:P,sidebar:je}},{path:"/oauth2/callback",name:"oAuth2Callback",components:{}},{path:"/workflow",name:"NodeViewNew",components:{default:ys,header:P,sidebar:je}},{path:"/workflow/:name",name:"NodeViewExisting",components:{default:ys,header:P,sidebar:je}},{path:"/",redirect:"/workflow"}]}),bs=s("4bea"),xs=s("96ee"),Cs=s("dc04"),Ns=s("9ce4");o["default"].use(Ns["a"]);const Ds=new Ns["a"].Store({strict:!1,state:{activeExecutions:[],activeWorkflows:[],activeActions:[],activeNode:null,baseUrl:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_URL_BASE_API?Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_URL_BASE_API:"/",credentials:null,credentialTypes:null,endpointWebhook:"webhook",endpointWebhookTest:"webhook-test",executionId:null,executingNode:"",executionWaitingForWebhook:!1,pushConnectionActive:!1,saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveManualExecutions:!1,timezone:"America/New_York",versionCli:"0.0.0",workflowExecutionData:null,lastSelectedNode:null,lastSelectedNodeOutputIndex:null,nodeIndex:[],nodeTypes:[],nodeViewOffsetPosition:[0,0],nodeViewMoveInProgress:!1,selectedNodes:[],sessionId:Math.random().toString(36).substring(2,15),urlBaseWebhook:"http://localhost:5678/",workflow:{id:ze["d"],name:"",active:!1,createdAt:-1,updatedAt:-1,connections:{},nodes:[],settings:{}}},mutations:{addActiveAction(e,t){e.activeActions.includes(t)||e.activeActions.push(t)},removeActiveAction(e,t){const s=e.activeActions.indexOf(t);-1!==s&&e.activeActions.splice(s,1)},addActiveExecution(e,t){const s=e.activeExecutions.find(e=>e.idActive===t.idActive);void 0===s?e.activeExecutions.unshift(t):void 0===s.workflowName&&(s.workflowName=t.workflowName)},finishActiveExecution(e,t){const s=e.activeExecutions.find(e=>e.idActive===t.executionIdActive);void 0!==s&&(void 0!==t.executionIdDb&&o["default"].set(s,"id",t.executionIdDb),o["default"].set(s,"finished",t.data.finished),o["default"].set(s,"stoppedAt",t.data.stoppedAt))},setActiveExecutions(e,t){o["default"].set(e,"activeExecutions",t)},setActiveWorkflows(e,t){e.activeWorkflows=t},setWorkflowActive(e,t){const s=e.activeWorkflows.indexOf(t);-1===s&&e.activeWorkflows.push(t)},setWorkflowInactive(e,t){const s=e.activeWorkflows.indexOf(t);-1!==s&&e.selectedNodes.splice(s,1)},addSelectedNode(e,t){e.selectedNodes.push(t)},removeNodeFromSelection(e,t){let s;for(s in e.selectedNodes)if(e.selectedNodes[s].name===t.name){e.selectedNodes.splice(parseInt(s,10),1);break}},resetSelectedNodes(e){o["default"].set(e,"selectedNodes",[])},setActive(e,t){e.workflow.active=t},addConnection(e,t){if(2!==t.connection.length)return;const s=t.connection[0],i=t.connection[1];if(e.workflow.connections.hasOwnProperty(s.node)||o["default"].set(e.workflow.connections,s.node,{}),e.workflow.connections[s.node].hasOwnProperty(s.type)||o["default"].set(e.workflow.connections[s.node],s.type,[]),e.workflow.connections[s.node][s.type].length<s.index+1)for(let o=e.workflow.connections[s.node][s.type].length;o<=s.index;o++)e.workflow.connections[s.node][s.type].push([]);const n=["index","node","type"];let a,r=!1;e:for(const o of e.workflow.connections[s.node][s.type][s.index]){for(a of n)if(o[a]!==i[a])continue e;r=!0;break}!1===r&&e.workflow.connections[s.node][s.type][s.index].push(i)},removeConnection(e,t){const s=t.connection[0],o=t.connection[1];if(!e.workflow.connections.hasOwnProperty(s.node))return;if(!e.workflow.connections[s.node].hasOwnProperty(s.type))return;if(e.workflow.connections[s.node][s.type].length<s.index+1)return;const i=e.workflow.connections[s.node][s.type][s.index];for(const n in i)i[n].node===o.node&&i[n].type===o.type&&i[n].index===o.index&&i.splice(parseInt(n,10),1)},removeAllConnections(e){e.workflow.connections={}},removeAllNodeConnection(e,t){e.workflow.connections.hasOwnProperty(t.name)&&delete e.workflow.connections[t.name];const s=[];let o,i,n,a,r;for(o of Object.keys(e.workflow.connections))for(i of Object.keys(e.workflow.connections[o]))for(n of Object.keys(e.workflow.connections[o][i])){for(a of(s.length=0,Object.keys(e.workflow.connections[o][i][parseInt(n,10)])))r=e.workflow.connections[o][i][parseInt(n,10)][parseInt(a,10)],r.node===t.name&&s.push(a);s.forEach(t=>{e.workflow.connections[o][i][parseInt(n,10)].splice(parseInt(t,10),1)})}},addCredentials(e,t){null!==e.credentials&&e.credentials.push(t)},removeCredentials(e,t){if(null!==e.credentials)for(let s=0;s<e.credentials.length;s++)if(e.credentials[s].id===t.id)return void e.credentials.splice(s,1)},updateCredentials(e,t){if(null!==e.credentials)for(let s=0;s<e.credentials.length;s++)if(e.credentials[s].id===t.id)return void(e.credentials[s]=t)},setCredentials(e,t){o["default"].set(e,"credentials",t)},setCredentialTypes(e,t){o["default"].set(e,"credentialTypes",t)},renameNodeSelectedAndExecution(e,t){null!==e.workflowExecutionData&&e.workflowExecutionData.data.resultData.runData.hasOwnProperty(t.old)&&(e.workflowExecutionData.data.resultData.runData[t.new]=e.workflowExecutionData.data.resultData.runData[t.old],delete e.workflowExecutionData.data.resultData.runData[t.old]),e.lastSelectedNode===t.old&&(e.lastSelectedNode=t.new)},resetAllNodesIssues(e){return e.workflow.nodes.forEach(e=>{e.issues=void 0}),!0},setNodeIssue(e,t){const s=e.workflow.nodes.find(e=>e.name===t.node);if(!s)return!1;if(null===t.value){if(void 0===s.issues||void 0===s.issues[t.type])return!0;o["default"].delete(s.issues,t.type)}else void 0===s.issues&&o["default"].set(s,"issues",{}),o["default"].set(s.issues,t.type,t.value);return!0},setWorkflowId(e,t){e.workflow.id=t},setWorkflowName(e,t){e.workflow.name=t},addNode(e,t){t.hasOwnProperty("name")&&e.workflow.nodes.push(t)},removeNode(e,t){for(let s=0;s<e.workflow.nodes.length;s++)if(e.workflow.nodes[s].name===t.name)return void e.workflow.nodes.splice(s,1)},removeAllNodes(e){e.workflow.nodes.splice(0,e.workflow.nodes.length)},updateNodeProperties(e,t){const s=e.workflow.nodes.find(e=>e.name===t.name);if(s)for(const i of Object.keys(t.properties))o["default"].set(s,i,t.properties[i])},setNodeValue(e,t){const s=e.workflow.nodes.find(e=>e.name===t.name);if(void 0===s||null===s)throw new Error(`Node with the name "${t.name}" could not be found to set parameter.`);o["default"].set(s,t.key,t.value)},setNodeParameters(e,t){const s=e.workflow.nodes.find(e=>e.name===t.name);if(void 0===s||null===s)throw new Error(`Node with the name "${t.name}" could not be found to set parameter.`);o["default"].set(s,"parameters",t.value)},addToNodeIndex(e,t){e.nodeIndex.push(t)},setNodeIndex(e,t){e.nodeIndex[t.index]=t.name},resetNodeIndex(e){o["default"].set(e,"nodeIndex",[])},setNodeViewMoveInProgress(e,t){e.nodeViewMoveInProgress=t},setNodeViewOffsetPosition(e,t){e.nodeViewOffsetPosition=t},setNodeTypes(e,t){o["default"].set(e,"nodeTypes",t)},setExecutingNode(e,t){e.executingNode=t},setExecutionWaitingForWebhook(e,t){e.executionWaitingForWebhook=t},setActiveExecutionId(e,t){e.executionId=t},setPushConnectionActive(e,t){e.pushConnectionActive=t},setUrlBaseWebhook(e,t){o["default"].set(e,"urlBaseWebhook",t)},setEndpointWebhook(e,t){o["default"].set(e,"endpointWebhook",t)},setEndpointWebhookTest(e,t){o["default"].set(e,"endpointWebhookTest",t)},setSaveDataErrorExecution(e,t){o["default"].set(e,"saveDataErrorExecution",t)},setSaveDataSuccessExecution(e,t){o["default"].set(e,"saveDataSuccessExecution",t)},setSaveManualExecutions(e,t){o["default"].set(e,"saveManualExecutions",t)},setTimezone(e,t){o["default"].set(e,"timezone",t)},setVersionCli(e,t){o["default"].set(e,"versionCli",t)},addNodeType(e,t){t.hasOwnProperty("name")&&e.nodeTypes.push(t)},setActiveNode(e,t){e.activeNode=t},setLastSelectedNode(e,t){e.lastSelectedNode=t},setLastSelectedNodeOutputIndex(e,t){e.lastSelectedNodeOutputIndex=t},setWorkflowExecutionData(e,t){e.workflowExecutionData=t},addNodeExecutionData(e,t){if(null===e.workflowExecutionData)throw new Error('The "workflowExecutionData" is not initialized!');void 0===e.workflowExecutionData.data.resultData.runData[t.nodeName]&&o["default"].set(e.workflowExecutionData.data.resultData.runData,t.nodeName,[]),e.workflowExecutionData.data.resultData.runData[t.nodeName].push(t.data)},setWorkflowSettings(e,t){o["default"].set(e.workflow,"settings",t)},setWorkflow(e,t){o["default"].set(e,"workflow",t),e.workflow.hasOwnProperty("active")||o["default"].set(e.workflow,"active",!1),e.workflow.hasOwnProperty("connections")||o["default"].set(e.workflow,"connections",{}),e.workflow.hasOwnProperty("createdAt")||o["default"].set(e.workflow,"createdAt",-1),e.workflow.hasOwnProperty("updatedAt")||o["default"].set(e.workflow,"updatedAt",-1),e.workflow.hasOwnProperty("id")||o["default"].set(e.workflow,"id",ze["d"]),e.workflow.hasOwnProperty("nodes")||o["default"].set(e.workflow,"nodes",[]),e.workflow.hasOwnProperty("settings")||o["default"].set(e.workflow,"settings",{})}},getters:{isActionActive:e=>t=>e.activeActions.includes(t),getActiveExecutions:e=>e.activeExecutions,getBaseUrl:e=>e.baseUrl,getRestUrl:e=>{let t="rest";return Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENDPOINT_REST&&(t=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_ENDPOINT_REST),`${e.baseUrl}${t}`},getWebhookBaseUrl:e=>e.urlBaseWebhook,getWebhookUrl:e=>`${e.urlBaseWebhook}${e.endpointWebhook}`,getWebhookTestUrl:e=>`${e.urlBaseWebhook}${e.endpointWebhookTest}`,saveDataErrorExecution:e=>e.saveDataErrorExecution,saveDataSuccessExecution:e=>e.saveDataSuccessExecution,saveManualExecutions:e=>e.saveManualExecutions,timezone:e=>e.timezone,versionCli:e=>e.versionCli,pushConnectionActive:e=>e.pushConnectionActive,sessionId:e=>e.sessionId,getActiveWorkflows:e=>e.activeWorkflows,getNodeIndex:e=>t=>e.nodeIndex.indexOf(t),getNodeNameByIndex:e=>t=>e.nodeIndex[t],getNodeViewOffsetPosition:e=>e.nodeViewOffsetPosition,isNodeViewMoveInProgress:e=>e.nodeViewMoveInProgress,getSelectedNodes:e=>e.selectedNodes,isNodeSelected:e=>t=>{let s;for(s in e.selectedNodes)if(e.selectedNodes[s].name===t)return!0;return!1},isActive:e=>e.workflow.active,allConnections:e=>e.workflow.connections,connectionsByNodeName:e=>t=>e.workflow.connections.hasOwnProperty(t)?e.workflow.connections[t]:{},allNodes:e=>e.workflow.nodes,nodeByName:e=>t=>{const s=e.workflow.nodes.find(e=>e.name===t);return void 0===s?null:s},nodesIssuesExist:e=>{for(const t of e.workflow.nodes)if(void 0!==t.issues&&0!==Object.keys(t.issues).length)return!0;return!1},allCredentialTypes:e=>e.credentialTypes,allCredentials:e=>e.credentials,credentialsByType:e=>t=>null===e.credentials?null:e.credentials.filter(e=>e.type===t),credentialType:e=>t=>{if(null===e.credentialTypes)return null;const s=e.credentialTypes.find(e=>e.name===t);return void 0===s?null:s},allNodeTypes:e=>e.nodeTypes,nodeType:e=>t=>{const s=e.nodeTypes.find(e=>e.name===t);return void 0===s?null:s},activeNode:(e,t)=>t.nodeByName(e.activeNode),lastSelectedNode:(e,t)=>t.nodeByName(e.lastSelectedNode),lastSelectedNodeOutputIndex:(e,t)=>e.lastSelectedNodeOutputIndex,executingNode:e=>e.executingNode,activeExecutionId:e=>e.executionId,executionWaitingForWebhook:e=>e.executionWaitingForWebhook,workflowName:e=>e.workflow.name,workflowId:e=>e.workflow.id,workflowSettings:e=>void 0===e.workflow.settings?{}:e.workflow.settings,getWorkflowExecution:e=>e.workflowExecutionData,getWorkflowRunData:e=>null===e.workflowExecutionData?null:e.workflowExecutionData.data.resultData.runData,getWorkflowResultDataByNodeName:(e,t)=>e=>{const s=t.getWorkflowRunData;return null===s?null:s.hasOwnProperty(e)?s[e]:null}}});o["default"].use(i,{locale:a.a}),bs["c"].add(xs["a"]),bs["c"].add(xs["b"]),bs["c"].add(xs["c"]),bs["c"].add(xs["d"]),bs["c"].add(xs["e"]),bs["c"].add(xs["f"]),bs["c"].add(xs["g"]),bs["c"].add(xs["h"]),bs["c"].add(xs["i"]),bs["c"].add(xs["j"]),bs["c"].add(xs["n"]),bs["c"].add(xs["o"]),bs["c"].add(xs["p"]),bs["c"].add(xs["q"]),bs["c"].add(xs["k"]),bs["c"].add(xs["l"]),bs["c"].add(xs["m"]),bs["c"].add(xs["r"]),bs["c"].add(xs["s"]),bs["c"].add(xs["t"]),bs["c"].add(xs["u"]),bs["c"].add(xs["v"]),bs["c"].add(xs["z"]),bs["c"].add(xs["x"]),bs["c"].add(xs["y"]),bs["c"].add(xs["w"]),bs["c"].add(xs["A"]),bs["c"].add(xs["B"]),bs["c"].add(xs["C"]),bs["c"].add(xs["D"]),bs["c"].add(xs["E"]),bs["c"].add(xs["F"]),bs["c"].add(xs["G"]),bs["c"].add(xs["H"]),bs["c"].add(xs["I"]),bs["c"].add(xs["J"]),bs["c"].add(xs["K"]),bs["c"].add(xs["L"]),bs["c"].add(xs["M"]),bs["c"].add(xs["N"]),bs["c"].add(xs["O"]),bs["c"].add(xs["P"]),bs["c"].add(xs["Q"]),bs["c"].add(xs["R"]),bs["c"].add(xs["S"]),bs["c"].add(xs["T"]),bs["c"].add(xs["U"]),bs["c"].add(xs["V"]),bs["c"].add(xs["W"]),bs["c"].add(xs["X"]),bs["c"].add(xs["Y"]),bs["c"].add(xs["Z"]),bs["c"].add(xs["ab"]),bs["c"].add(xs["bb"]),bs["c"].add(xs["cb"]),bs["c"].add(xs["db"]),bs["c"].add(xs["eb"]),bs["c"].add(xs["fb"]),bs["c"].add(xs["gb"]),bs["c"].add(xs["hb"]),bs["c"].add(xs["ib"]),bs["c"].add(xs["jb"]),bs["c"].add(xs["kb"]),bs["c"].add(xs["lb"]),bs["c"].add(xs["mb"]),bs["c"].add(xs["nb"]),bs["c"].add(xs["ob"]),bs["c"].add(xs["pb"]),bs["c"].add(xs["qb"]),o["default"].component("font-awesome-icon",Cs["a"]),o["default"].config.productionTip=!1,new o["default"]({router:ks,store:Ds,render:e=>e(h)}).$mount("#app")},ce61:function(e,t,s){"use strict";var o=s("335e"),i=s.n(o);i.a},d201:function(e,t,s){},d2e2:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var o=s("85ee"),i=s("e105"),n=s("7b04"),a=s("6fae"),r=s("77f0"),l=s("aaf5");const d=Object(l["a"])(a["a"],n["a"],r["a"]).extend({methods:{connectionInputData(e,t,s,o){let i=null;if(e.length){const n=e[0],a=this.$store.getters.getWorkflowRunData;if(null===a)return null;i=!a[n]||a[n].length<=s||!a[n][s].hasOwnProperty("data")||void 0===a[n][s].data||!a[n][s].data.hasOwnProperty(t)||a[n][s].data[t].length<=o?[]:a[n][s].data[t][o]}return i},getNodes(){const e=this.$store.getters.allNodes,t=[];for(const s of e)t.push(Object.assign({},s));return t},getNodeTypesMaxCount(){const e=this.$store.getters.allNodes,t={},s=this.$store.getters.allNodeTypes;for(const o of s)void 0!==o.maxNodes&&(t[o.name]={exist:0,max:o.maxNodes,nodeNames:[]});for(const o of e)void 0!==t[o.type]&&(t[o.type].exist+=1,t[o.type].nodeNames.push(o.name));return t},getNodeTypeCount(e){const t=this.$store.getters.allNodes;let s=0;for(const o of t)o.type===e&&s++;return s},checkReadyForExecution(e){let t,s,o=null;const i={};for(const n of Object.keys(e.nodes))o=null,t=e.nodes[n],!0!==t.disabled&&(s=e.nodeTypes.getByName(t.type),o=void 0===s?{typeUnknown:!0}:this.getNodeIssues(s.description,t,["execution"]),null!==o&&(i[t.name]=o));return 0===Object.keys(i).length?null:i},getWorkflow(e,t,s){e=e||this.getNodes(),t=t||this.$store.getters.allConnections;const n={nodeTypes:{},init:async e=>{},getAll:()=>[],getByName:e=>{const t=this.$store.getters.nodeType(e);if(null!==t)return{description:t}}};let a=this.$store.getters.workflowId;a===o["d"]&&(a=void 0);const r=this.$store.getters.workflowName;return!0===s?new i["Workflow"]({id:a,name:r,nodes:JSON.parse(JSON.stringify(e)),connections:JSON.parse(JSON.stringify(t)),active:!1,nodeTypes:n}):new i["Workflow"]({id:a,name:r,nodes:e,connections:t,active:!1,nodeTypes:n})},getWorkflowDataToSave(){const e=this.$store.getters.allNodes,t=this.$store.getters.allConnections;let s;const i=[];for(let o=0;o<e.length;o++){try{s=this.getNodeDataToSave(e[o])}catch(r){return Promise.reject(r)}i.push(s)}const n={name:this.$store.getters.workflowName,nodes:i,connections:t,active:this.$store.getters.isActive,settings:this.$store.getters.workflowSettings},a=this.$store.getters.workflowId;return a!==o["d"]&&(n.id=a),Promise.resolve(n)},getNodeDataToSave(e){const t=["color","continueOnFail","credentials","disabled","issues","notes","parameters","status"],s={parameters:{}};for(const i in e)"_"!==i.charAt(0)&&-1===t.indexOf(i)&&(s[i]=e[i]);const o=this.$store.getters.nodeType(e.type);if(null!==o){const t=i["NodeHelpers"].getNodeParameters(o.properties,e.parameters,!1,!1);if(s.parameters=null!==t?t:{},void 0!==e.credentials&&void 0!==o.credentials){const t={};for(const s of Object.keys(e.credentials)){const i=o.credentials.find(e=>e.name===s);void 0!==i&&(!1!==this.displayParameter(e.parameters,i,"")&&(t[s]=e.credentials[s]))}0!==Object.keys(t).length&&(s.credentials=t)}e.color&&e.color!==o.defaults.color&&(s.color=e.color)}else s.credentials=e.credentials,s.parameters=e.parameters,void 0!==s.color&&(s.color=e.color);return!0===e.disabled&&(s.disabled=!0),!0===e.continueOnFail&&(s.continueOnFail=!0),[void 0,""].includes(e.notes)||(s.notes=e.notes),s},resolveExpression(e){const t=0,s=0,o=0,i="main",n=this.$store.getters.activeNode,a=this.getWorkflow(),r=a.getParentNodes(n.name,i,1),l=this.$store.getters.getWorkflowExecution;let d,c=this.connectionInputData(r,i,o,t);return d=null===l?{resultData:{runData:{}}}:l.data,null===c&&(c=[]),a.getParameterValue(e,d,o,s,n.name,c,!0)},async saveCurrentWorkflow(e=!1){const t=this.$route.params.name;let s="";if(void 0===t||!0===e){if(s=await this.$prompt("Enter workflow name","Name",{confirmButtonText:"Save",cancelButtonText:"Cancel"}).then(e=>e.value).catch(()=>{}),void 0===s)return;if(["",null].includes(s))return void this.$showMessage({title:"Name missing",message:"No name for the workflow got entered and could so not be saved!",type:"error"})}try{this.$store.commit("addActiveAction","workflowSaving");let o=await this.getWorkflowDataToSave();void 0===t||!0===e?(o.name=s.trim(),!0===e&&(o.active=!1),o=await this.restApi().createNewWorkflow(o),this.$store.commit("setActive",o.active||!1),this.$store.commit("setWorkflowId",o.id),this.$store.commit("setWorkflowName",o.name),this.$store.commit("setWorkflowSettings",o.settings||{})):await this.restApi().updateWorkflow(t,o),this.$route.params.name!==o.id&&this.$router.push({name:"NodeViewExisting",params:{name:o.id,action:"workflowSave"}}),this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:"Workflow saved",message:`The workflow "${o.name}" got saved!`,type:"success"})}catch(o){this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:"Problem saving workflow",message:`There was a problem saving the workflow: "${o.message}"`,type:"error"})}},updateNodePositions(e,t){if(void 0===e.nodes)return;const s=[99999999,99999999];for(const i of e.nodes)(i.position[1]<s[1]||i.position[1]===s[1]&&i.position[0]<s[0])&&(s[0]=i.position[0],s[1]=i.position[1]);const o=[t[0]-s[0],t[1]-s[1]];for(const i of e.nodes)i.position[0]+=o[0],i.position[1]+=o[1]}}})},d3d8:function(e,t,s){},d63c:function(e,t,s){"use strict";var o=s("9321"),i=s.n(o);i.a},e1e8:function(e,t,s){"use strict";var o=s("e846"),i=s.n(o);i.a},e596:function(e,t,s){"use strict";var o=s("753b"),i=s.n(o);i.a},e78d:function(e,t,s){},e82f:function(e,t,s){"use strict";var o=s("9147"),i=s.n(o);i.a},e846:function(e,t,s){},ea6e:function(e,t,s){},eaf6:function(e,t,s){},eec6:function(e,t,s){"use strict";var o=s("fe97"),i=s.n(o);i.a},f3ce:function(e,t,s){},f408:function(e,t,s){"use strict";var o=s("f3ce"),i=s.n(o);i.a},f427:function(e,t,s){"use strict";var o=s("368d"),i=s.n(o);i.a},f481:function(e,t,s){},f53f:function(e,t,s){},fc8e:function(e,t,s){},fd90:function(e,t,s){},fe0b:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fixed-collection-parameter",on:{keydown:function(e){e.stopPropagation()}}},[0===e.getProperties.length?s("div",{staticClass:"no-items-exist"},[e._v("\n\t\tCurrently no items exist\n\t")]):e._e(),e._l(e.getProperties,(function(t){return s("div",{key:t.name,staticClass:"fixed-collection-parameter-property"},[s("div",{staticClass:"parameter-name",attrs:{title:t.displayName}},[e._v(e._s(t.displayName)+":")]),!0===e.multipleValues?s("div",e._l(e.values[t.name],(function(o,i){return s("div",{key:t.name+i,staticClass:"parameter-item"},[s("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():s("div",{staticClass:"delete-option",attrs:{title:"Delete"}},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Delete Item"},on:{click:function(s){return e.deleteOption(t.name,i)}}})],1),s("parameter-input-list",{attrs:{parameters:t.values,nodeValues:e.nodeValues,path:e.getPropertyPath(t.name,i),hideDelete:!0},on:{valueChanged:e.valueChanged}})],1)])})),0):s("div",{staticClass:"parameter-item"},[s("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():s("div",{staticClass:"delete-option",attrs:{title:"Delete"}},[s("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:"Delete Item"},on:{click:function(s){return e.deleteOption(t.name)}}})],1),s("parameter-input-list",{staticClass:"parameter-item",attrs:{parameters:t.values,nodeValues:e.nodeValues,path:e.getPropertyPath(t.name),hideDelete:!0},on:{valueChanged:e.valueChanged}})],1)])])})),e.parameterOptions.length>0&&!e.isReadOnly?s("div",[1===e.parameter.options.length?s("el-button",{staticClass:"add-option",attrs:{size:"small"},on:{click:function(t){return e.optionSelected(e.parameter.options[0].name)}}},[e._v(e._s(e.getPlaceholderText))]):s("el-select",{staticClass:"add-option",attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}},e._l(e.parameterOptions,(function(e){return s("el-option",{key:e.name,attrs:{label:e.displayName,value:e.name}})})),1)],1):e._e()],2)},i=[],n=s("9ec3"),a=s("4971"),r=s("aaf5"),l=Object(r["a"])(a["a"]).extend({name:"FixedCollectionParameter",props:["nodeValues","parameter","path","values"],data(){return{selectedOption:void 0}},computed:{getPlaceholderText(){return this.parameter.placeholder?this.parameter.placeholder:"Choose Option To Add"},getProperties(){const e=[];let t;for(const s of this.propertyNames)t=this.getOptionProperties(s),void 0!==t&&e.push(t);return e},multipleValues(){return void 0!==this.parameter.typeOptions&&!0===this.parameter.typeOptions.multipleValues},parameterOptions(){return!0===this.multipleValues?this.parameter.options:this.parameter.options.filter(e=>!this.propertyNames.includes(e.name))},propertyNames(){return this.values?Object.keys(this.values):[]}},methods:{deleteOption(e,t){const s={name:this.getPropertyPath(e,t),value:void 0};this.$emit("valueChanged",s)},getPropertyPath(e,t){return`${this.path}.${e}`+(void 0!==t?`[${t}]`:"")},getOptionProperties(e){for(const t of this.parameter.options)if(t.name===e)return t},optionSelected(e){const t=this.getOptionProperties(e);if(void 0===t)return;const s=`${this.path}.${t.name}`;let o;const i={};for(const r of t.values)"fixedCollection"===r.type&&void 0!==r.typeOptions&&!0===r.typeOptions.multipleValues?i[r.name]={}:void 0!==r.typeOptions&&!0===r.typeOptions.multipleValues?(i[r.name]=Object(n["get"])(this.nodeValues,`${this.path}.${r.name}`,[]),i[r.name].push(JSON.parse(JSON.stringify(r.default)))):i[r.name]=JSON.parse(JSON.stringify(r.default));let a;!0===this.multipleValues?(a=Object(n["get"])(this.nodeValues,s,[]),a.push(i)):a=i,o={name:s,value:a},this.$emit("valueChanged",o),this.selectedOption=void 0},valueChanged(e){this.$emit("valueChanged",e)}},beforeCreate:function(){this.$options.components.ParameterInputList=s("3c38").default}}),d=l,c=(s("c6ff"),s("2be6")),u=Object(c["a"])(d,o,i,!1,null,"5fa8a4d0",null);t["default"]=u.exports},fe97:function(e,t,s){},fec8:function(e,t,s){"use strict";var o=s("0232"),i=s.n(o);i.a}});
//# sourceMappingURL=app.0195ed98.js.map